(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[19],Array(45).concat([function(e,t,n){"use strict";n.d(t,"e",function(){return a});var a="OnePlayer-SettingOverride-languageOverride"}],Array(217),[function(e,t,n){"use strict";function a(e){return!!e&&!(!e||"boolean"!=typeof e.value)&&e.value}n.d(t,"e",function(){return a})},function(e,t,n){"use strict";var a,i;n.d(t,"t",function(){return a}),n.d(t,"e",function(){return i}),n.d(t,"n",function(){return r}),n.d(t,"o",function(){return s}),n.d(t,"i",function(){return c}),n.d(t,"a",function(){return d}),n.d(t,"r",function(){return l}),function(e){e.string="string",e.stringOrAnyGuid="stringOrAnyGuid",e.number="number"}(a||(a={})),function(e){e.scrub="scrub",e.scrubOrAnyGuid="scrubOrAnyGuid",e.scrubUrls="scrubUrls",e.drop="drop"}(i||(i={}));var r=["sharepoint"],o=function(){this.FullPath="",this.Strategy=i.scrub},s="regexCheck";function c(e){var t=!0,n=new o;return null!==e&&"object"==typeof e&&Array.isArray(e)?e.forEach(function(e){Object.keys(n).forEach(function(n){t=t&&n in e})}):t=!1,t}function d(e){return"string"==typeof e&&e in i}function l(e){return"object"==typeof e&&!Array.isArray(e)&&void 0!==e.RegEx&&void 0!==e.Strategy}}],Array(43),[function(e,t,n){"use strict";n.d(t,"i",function(){return r}),n.d(t,"t",function(){return o}),n.d(t,"n",function(){return s}),n.d(t,"e",function(){return c}),n.d(t,"a",function(){return d});var a=n(0),i=n(12);function r(e){return e?e.name||(e.name="undefinedNullOrEmptyEventName"):e={name:"undefinedOrNullEvent"},e}function o(e){var t={};return Object.keys(e).forEach(function(n){var i=e[n];"object"!=typeof i?t[n]=i:t=Object(a.e)(Object(a.e)({},t),i)}),t}function s(){var e=null;return document&&document.location&&(e=document.location.href),e}function c(){return Object(i.v4)()}var d=function(e){return void 0!==e&&!!["401","403","407","409"].includes(e)}}],Array(35),[function(e,t,n){"use strict";n.d(t,"d",function(){return i}),n.d(t,"c",function(){return r}),n.d(t,"a",function(){return s}),n.d(t,"i",function(){return c}),n.d(t,"o",function(){return d}),n.d(t,"t",function(){return l}),n.d(t,"n",function(){return u}),n.d(t,"e",function(){return f}),n.d(t,"r",function(){return p}),n.d(t,"s",function(){return o});var a=n(264),i=/\bhttps?:\/\/\S+[\w]/gi;function r(e){return new RegExp("[a-zA-Z0-9.-]*domainGeneralPlaceholder[-a-zA-Z]*.com".replace("domainGeneralPlaceholder","("+e.join("|")+")"),"gi")}a.t.stringOrAnyGuid,a.t.number,a.t.string,a.t.string,a.e.scrub,a.e.scrub,a.e.scrub,a.e.scrub,a.e.scrub;var o,s="SCRUBBED",c="FRAME_SCRUBBED",d="INVALID",l="[GUID]",u="[JWT]",f="[redacted]",p="[UnknownUrl]";!function(e){e.NotLoadedUrl="https://privacyScrubberNotLoaded/",e.InvalidUriErrorUrl="https://privacyScrubberInvalidUriError/"}(o||(o={}))}],Array(75),[function(e,t,n){"use strict";var a=n(545);t.e=a.e},,,,function(e,t,n){"use strict";n.d(t,"e",function(){return u});var a=n(0),i=n(19),r=n(3582),o=n(1764),s=n(3353),c=n(544),d=s.e.object({isTranscriptionShown:s.e.optional(s.e.union(s.e.boolean,s.e.undefined,s.e.null))}),l=s.e.object({media:s.e.optional(d)}),u=function(e,t,n,s,d,u){return Object(a.t)(void 0,void 0,void 0,function(){var m,_,h,b,g,v,y,S,D,I,x,C,O,w;return Object(a.i)(this,function(a){switch(a.label){case 0:return u=null!=u?u:Object(i.e)(),m="Network issue",_="MediaSettings.patch",h={},b=d?e.documentId.value.replace("/_api/v2.1","/_api/v2.0"):e.documentId.value,g="",[4,e.getAccessTokenVroom2_0()];case 1:v=a.sent(),y={access_token:v,correlationId:u,select:"media"},S=void 0,D={media:(w={},w[n]=s,w)},I=t.startQos({name:"PatchMediaSettings",pluginCorrelationId:u}),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,r.e.patch(_,h,b,g,y,D,S,l)];case 3:return x=a.sent(),I.end(),x.media?[2,{isTranscriptionShown:p(x.media.isTranscriptionShown),isNoiseSuppressionControlShown:p(x.media.isNoiseSuppressionControlShown),noiseSuppressionEnabledByDefault:p(x.media.noiseSuppressionEnabledByDefault),tableOfContentsVisibility:Object(c.e)(p(x.media.tableOfContentsVisibility)),aboutVisibility:Object(c.e)(p(x.media.aboutVisibility)),analyticsVisibility:Object(c.e)(p(x.media.analyticsVisibility)),notesVisibility:Object(c.e)(p(x.media.notesVisibility))}]:[2,{}];case 4:throw C=a.sent(),(O=Object(o.t)(C)).isExpected=void 0!==O.statusCode&&f.includes(O.statusCode)||void 0!==O.staticMessage&&O.staticMessage.includes(m),O.isExpected?I.endExpectedError("Fatal",C):I.endUnexpectedError("Fatal",C),O;case 5:return[2]}})})},f=[401,403,404,409,429,503];function p(e){return null===e?void 0:e}}],Array(53),[function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"n",function(){return o}),n.d(t,"t",function(){return c}),n.d(t,"e",function(){return d});var a=n(3613),i=n(263),r="OnePlayer-SettingOverride-",o="isDeveloperModeEnabled",s=location.search.indexOf("hideDeveloperTools")>-1;function c(e){var t=Object(i.e)(e.getSettingObject("DeveloperToolsPanelEnabled","boolean"));return{isDeveloperToolsPluginEnabled:t?!s&&t:!s&&Object(i.e)(e.getSettingObject("60213","boolean")),isDeveloperToolsHotkeyEnabled:Object(i.e)(e.getSettingObject("DeveloperToolsHotkeyEnabled","boolean"))||Object(i.e)(e.getSettingObject("60216","boolean"))}}function d(){if(!Object(a.n)())return!1;for(var e in localStorage)if(0===e.indexOf(r))return!0;return!1}}],Array(65),[function(e,t,n){"use strict";function a(e){if(e)switch(e.toLowerCase()){case"0":case"none":return"none";case"1":case"all":return"all";case"2":case"editors":return"editors";default:throw new Error("Unsupported media visibility status received from backend")}}n.d(t,"e",function(){return a})},function(e,t,n){"use strict";var a;n.d(t,"e",function(){return i}),function(e){e[e.absolute=0]="absolute",e[e.relative=1]="relative",e[e.serverRelative=2]="serverRelative",e[e.dataUrl=3]="dataUrl"}(a||(a={}));var i=function(e,t){void 0===e&&(e=""),void 0===t&&(t=!1);var n=e.indexOf("//"),i=e.indexOf("/"),o=n>-1&&n<=i?n+"//".length:-1,s=function(e,t){if(t>-1){var n=e.indexOf("/",t);return n>-1?e.slice(0,n):e}return""}(e,o),c=s&&s.slice(o),d=e.slice(s.length),l=s?a.absolute:t&&r.test(e)?a.dataUrl:"/"===d[0]?a.serverRelative:a.relative,u=d.split("/");this.authority=s,this.domain=c,this.format=l,this.path=d,this.segments=u,this.value=e},r=/^data:((?:\w+\/(?:(?!;).)+)?)((?:;[\w\W]*?[^;])*),(.+)$/},,,,function(e,t,n){"use strict";n.d(t,"e",function(){return r}),n.d(t,"a",function(){return o}),n.d(t,"t",function(){return s}),n.d(t,"n",function(){return c}),n(0);var a,i=n(55);function r(e){return null!=e&&""!==e&&e.toLowerCase()!==i.e}function o(e){return void 0!==e&&["Business","Consumer"].includes(e.accountType)}function s(e){var t,n,a;return"meeting"===(null===(n=null===(t=e.telemetryContext.mediaContext)||void 0===t?void 0:t.contentType)||void 0===n?void 0:n.toLowerCase())&&"teams"===(null===(a=e.contentSourceApplication.value)||void 0===a?void 0:a.toLowerCase())}function c(e){return"EditTrustedHost"===e||"NoEditTrustedHost"===e}!function(e){e.Pending="pending",e.Resolved="resolved",e.Rejected="rejected"}(a||(a={}))}],Array(94),[function(e,t,n){"use strict";n.d(t,"e",function(){return o});var a=n(1757),i=window.Flight&&window.Flight.version?window.Flight.version:void 0,r=window._spModuleLink&&window._spModuleLink.buildNumber?window._spModuleLink.buildNumber:void 0,o=i||r||a},function(e,t,n){"use strict";n.d(t,"e",function(){return o}),n.d(t,"a",function(){return s}),n.d(t,"d",function(){return c}),n.d(t,"i",function(){return d}),n.d(t,"n",function(){return l}),n.d(t,"c",function(){return u}),n.d(t,"r",function(){return f}),n.d(t,"t",function(){return p}),n.d(t,"s",function(){return m}),n.d(t,"o",function(){return _});var a,i=n(0),r=n(478),o={name:"DeveloperTools",version:n(644).e,phasesToInit:["BeforeUi"],getPluginInstanceFactory:function(e,t){return function(a){return Object(i.t)(void 0,void 0,void 0,function(){return Object(i.i)(this,function(i){switch(i.label){case 0:return[4,a("LoadPluginModule",function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(584)]).then(n.bind(null,3172))})];case 1:return[2,i.sent().createPluginInstance(e,t)]}})})}}},s="".concat(r.a,"autoPlay"),c="".concat(r.a,"showMetadataOverlay"),d="".concat(r.a,"darkTheme"),l="".concat(r.a,"accentColor"),u="".concat(r.a,"languageOverride"),f="Host app (default)",p="isODBDarkMode",m=((a={})[f]={primaryColor:"",primaryColorDark:""},a.ODSP={primaryColor:"#0078D4",primaryColorDark:"#2899F5"},a.Stream={primaryColor:"#BC1948",primaryColorDark:"#E8467C"},a.Teams={primaryColor:"#6264A7",primaryColorDark:"#7A7FEA"},a.Yammer={primaryColor:"#0078D4",primaryColorDark:"#2899F5"},a.SharePoint={primaryColor:"#03787C",primaryColorDark:"#009CA4"},a.PowerPoint={primaryColor:"#C43E1C",primaryColorDark:"#CA5010"},a.Forms={primaryColor:"#03787C",primaryColorDark:"#009CA4"},a);function _(e,t){var n=t?JSON.parse(t):"",a=m[n];return a?e?a.primaryColorDark:a.primaryColor:""}},,function(e,t,n){"use strict";function a(e){var t,n;return void 0!==e.hidden?(t="hidden",n="visibilitychange"):void 0!==e.msHidden?(t="msHidden",n="msvisibilitychange"):void 0!==e.webkitHidden&&(t="webkitHidden",n="webkitvisibilitychange"),[n,t]}function i(){var e=a(document),t=(e[0],e[1]);return document.visibilityState!==t}n.d(t,"e",function(){return a}),n.d(t,"t",function(){return i})}],Array(115),[function(e,t,n){"use strict";n.d(t,"e",function(){return u}),n.d(t,"a",function(){return f}),n.d(t,"n",function(){return p}),n.d(t,"t",function(){return m});var a=n(0),i=n(1760);function r(e){return Object(a.t)(this,void 0,void 0,function(){return Object(a.i)(this,function(t){switch(t.label){case 0:return[4,n(1759)("./".concat(e,".json")).then(function(e){return e.default})];case 1:return[2,t.sent()]}})})}var o,s,c={},d=n(57),l=(n(419),n(790));function u(){return o||(o=n.e(593).then(n.bind(null,3614)))}function f(){return s||(s=n.e(646).then(n.t.bind(null,3369,7)))}function p(e){return void 0===e&&(e=""),function(e){return Object(a.t)(this,void 0,void 0,function(){var t,n,o,s;return Object(a.i)(this,function(a){switch(a.label){case 0:return t=Object.keys(i.e).indexOf(e)>=0?e:"en",(n=c[t])?[2,n]:(o=c,s=t,[4,r(t)]);case 1:return[2,o[s]=a.sent()]}})})}(Object(d.e)(e))}function m(e){var t;return e&&(t=Object(l.n)(Object(d.e)(e))),Promise.all([t])}}],Array(26),[function(e,t,n){"use strict";n.d(t,"e",function(){return u}),n.d(t,"n",function(){return f}),n.d(t,"t",function(){return p});var a,i,r=n(0),o=n(53),s=n(57),c=n(3346),d=n(791),l=n.e(864).then(n.t.bind(null,1999,3)).then(function(e){return e.default}),u="en";function f(e){return e===u?Promise.resolve(l):(e===i&&a||(a=n(1761)("./".concat(e,"/strings.json")).then(function(e){return e.default})),i=e,a)}var p=function(){function e(t){var n=t.loader,a=t.locale,i=this;this.loadResources=function(){return Object(r.t)(i,void 0,void 0,function(){return Object(r.i)(this,function(e){switch(e.label){case 0:return[4,Promise.all([this.setLanguagePromise,this.waitDefaultResourcesLoadPromise])];case 1:return e.sent(),this.resourcesLoaded=!0,[2]}})})},this.resourcesLoaded=!1,this.locale=new o.e(void 0),this.locale.value=e.DEFAULT_LOCALE,this.language=Object(s.e)(e.DEFAULT_LOCALE),this.localizedStringsProvider=new c.e({defaultLang:this.language,rootElement:document.documentElement,loadDefaultStringsAsync:function(){return n("langRes",function(){return f(u)})},loadNonDefaultLangAsync:function(e){return n("langRes",function(){return f(e)})}}),this.waitDefaultResourcesLoadPromise=this.localizedStringsProvider.waitDefaultResourcesLoad(),this.setLanguagePromise=void 0,this.isValidLocale(a)&&(this.locale.value=a,this.language=Object(s.e)(a),this.setLanguagePromise=this.localizedStringsProvider.setLanguage(this.language))}return e.prototype.getLanguage=function(){return this.language},e.prototype.getString=function(e){if(!this.resourcesLoaded)throw new Error(Object(d.n)("getString() is called before resources are loaded"));return this.localizedStringsProvider.getString(e)},e.prototype.setLocale=function(e){return Object(r.t)(this,void 0,void 0,function(){return Object(r.i)(this,function(e){return[2,Promise.resolve()]})})},e.prototype.isValidLocale=function(e){return!!e&&!!Object(s.e)(e)},e.DEFAULT_LOCALE="en-us",e}()},,,,,,function(e,t,n){"use strict";n.d(t,"e",function(){return r});var a=n(0),i={auth:{clientId:"",authority:"",redirectUri:"".concat(window.location.origin,"/"),navigateToLoginRequestUrl:!0},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1}},r=function(){function e(e,t,n,r,o,s,c){this.configuration=e,this.accountInfo=null,this.signOnPromise=void 0,this.aadConfiguration=i,this.aadConfiguration.auth.clientId=r,this.userInteractionSignOnEnabled=c||!1,!0===n?this.aadConfiguration.auth.authority="https://login.microsoftonline.us/f8cdef31-a31e-4b4a-93e4-5f571e91255a":"".concat(window.location.origin,"/").startsWith("https://localhost")?(this.aadConfiguration.auth.authority="https://login.windows-ppe.net/f686d426-8d16-42db-81b7-ab578e110ccd",this.aadConfiguration.auth.clientId="5eecb03e-a8b5-4052-bacf-32ac0ec67924"):this.aadConfiguration.auth.authority="https://login.microsoftonline.com/72f988bf-86f1-41af-91ab-2d7cd011db47",this.silentLoginRequest={scopes:[],loginHint:s,domainHint:o},this.loginRequest={scopes:[]},this.loginRedirectRequest=Object(a.e)(Object(a.e)({},this.loginRequest),{redirectStartPage:window.location.href}),this.log=t,this.accountInfo=null,this.signOnResult={result:!1}}return e.prototype.signOn=function(){return Object(a.t)(this,void 0,void 0,function(){var e,t,i,r,o,s,c,d=this;return Object(a.i)(this,function(a){switch(a.label){case 0:return this.msalModule?[3,2]:(e=this.log.measureQos("PlayerAuthEndQos",{name:"LoadMsal"},function(){return n.e(860).then(n.bind(null,3167))}),t=this,[4,e]);case 1:t.msalModule=a.sent(),a.label=2;case 2:return this.msalPublicClientApp||(this.msalPublicClientApp=new this.msalModule.PublicClientApplication(this.aadConfiguration)),i=this.msalModule,r=this.msalPublicClientApp,this.signOnPromise||(o={name:"SignOn",signOnResult:void 0},s=this.log.startQos("PlayerAuthEndQos",o),c=this.attemptSso(i,r).then(function(e){return o.signOnResult=d.signOnResult,"success"===e?(s.end(),!0):"redirectRequired"===e?(s.end(),r.loginRedirect(d.loginRedirectRequest),!1):(s.endExpectedError("Warning","Sign on failed."),!1)}).catch(function(e){return s.endUnexpectedError("Warning",e),!1}),this.signOnPromise=c),[2,this.signOnPromise]}})})},e.prototype.getToken=function(e){return Object(a.t)(this,void 0,void 0,function(){return Object(a.i)(this,function(t){switch(t.label){case 0:return[4,this.signOn()];case 1:return t.sent(),this.msalModule?[2,this.initiateAcquireToken(e,this.msalModule)]:[2,Promise.reject("getToken(): Msal module has not been loaded.")]}})})},e.prototype.attemptSso=function(e,t){return Object(a.t)(this,void 0,void 0,function(){var n,i,r=this;return Object(a.i)(this,function(a){switch(a.label){case 0:return[4,t.ssoSilent(this.silentLoginRequest).catch(function(n){return n instanceof e.InteractionRequiredAuthError&&r.userInteractionSignOnEnabled?r.loginPopup(e,t):"failure"})];case 1:return(n=a.sent())&&n.account?(this.accountInfo=n.account,this.signOnResult.result=!0,i="success"):"success"===n?(this.signOnResult.result=!0,i="success"):"redirectRequired"===n?(this.signOnResult.result=!1,i="redirectRequired"):(this.signOnResult.result=!1,i="failure"),[2,i]}})})},e.prototype.loginPopup=function(e,t){return Object(a.t)(this,void 0,void 0,function(){var n,i=this;return Object(a.i)(this,function(a){switch(a.label){case 0:return[4,t.loginPopup(this.loginRequest).catch(function(n){return n instanceof e.BrowserAuthError?i.loginRedirect(t):"failure"})];case 1:return(n=a.sent()).account?(this.accountInfo=n.account,[2,"success"]):[2,"redirectRequired"===n?"redirectRequired":"failure"]}})})},e.prototype.loginRedirect=function(e){return Object(a.t)(this,void 0,void 0,function(){var t,n;return Object(a.i)(this,function(a){switch(a.label){case 0:return[4,e.handleRedirectPromise()];case 1:if(null!==(t=a.sent()))return this.accountInfo=t.account,[2,"success"];if(this.msalPublicClientApp){if(0===(n=this.msalPublicClientApp.getAllAccounts()).length)return[2,"redirectRequired"];if(n.length>1)return this.accountInfo=n[0],[2,"success"];if(1===n.length)return this.accountInfo=n[0],[2,"success"]}return[2,"failure"]}})})},e.prototype.initiateAcquireToken=function(e,t){return Object(a.t)(this,void 0,void 0,function(){return Object(a.i)(this,function(e){return[2,Promise.resolve("not implemented")]})})},e}()},function(e,t,n){"use strict";n.d(t,"e",function(){return a}),n.d(t,"a",function(){return i}),n.d(t,"n",function(){return r}),n.d(t,"t",function(){return o}),n.d(t,"i",function(){return s});var a="7a5ec2494138408c8c2648229a0ad350-81b965d6-1adc-496b-af9b-939f8df3114c-7189",i="0fc0b80704fd4c3babc4ac44e2c30813-9bda7050-70bb-4bd3-ae6a-af35ce33726d-7321",r="e9f3842f342d40f8a05d58405c124371-b2f745ef-0abc-404b-9ef9-688c6aa28e78-7599",o="c3f8e19767ce421dafebd4155fc0a621-fb75a55c-ec65-4419-839f-154188984765-6741",s="e2b7936cc86e4da2ae385636b628ff6f-a2bd37b6-dd21-4287-b5f6-f3ce1c743305-7585"},,,,,,,function(e,t,n){"use strict";n.d(t,"e",function(){return r}),n.d(t,"a",function(){return o}),n.d(t,"i",function(){return s}),n.d(t,"r",function(){return c}),n.d(t,"o",function(){return d}),n.d(t,"s",function(){return l}),n.d(t,"t",function(){return a}),n.d(t,"n",function(){return i});var a,i,r={Html5:"Html5",AzureHtml5JS:"AzureHtml5JS",Flash:"FlashSS"},o={maxRetryCount:1},s={unknownError:"0000000",liveRecoverableError:"recoverable",abortedErrUnknown:"0100000",networkErrStart:"0200000",networkErrUnknown:"0200000",networkErrHttpUserAuthRequired:"0200191",networkErrHttpUrlNotFound:"0200194",networkErrHttpPreconditionFailed:"020019c",networkErrTimeout:"0200258",networkErrError:"0200259",networkErrNoInternet:"020025b",networkErrNoAuth:"020025c",networkErrNotAcceptable:"0200196",decodeErrStart:"0300000",decodeErrUnknown:"0300000",srcErrParseSegment:"0400002",srcErrUnsupportedPresentation:"0400003",srcErrInvalidSegment:"0400004",srcErrLiveNoSegments:"0400005",encryptErrKeyAcquire:"0500004",encryptErrDecryption:"0500005",srcPlayerMismatchStart:"0600000",srcPlayerMismatchUnknown:"0600000",srcPlayerMismatchFlashNotInstalled:"0600001",srcPlayerMismatchFlashAndSilverlight:"0600003",noCodecAvailableiOs:"0400000"},c={ErrorMessageKeyAcquireAuthFailFlash:"ENCRYPTIONKEY_DOWNLOAD_AUTH_ERROR",ErrorMessageKeyAcquireTimeoutFlash:"ENCRYPTIONKEY_DOWNLOAD_TIMEOUT"},d={PlaybackErrors:"https://docs.microsoft.com/stream/portal-understanding-playback-errors",LiveEncoderLearnMoreLink:"https://go.microsoft.com/fwlink/?linkid=2004436"},l="Shockwave Flash";!function(e){e.Hls="HlsHtml5",e.Progressive="ProgressiveHtml5"}(a||(a={})),function(e){e.Dash="DASH",e.Hls="HLS",e.Progressive="PROGRESSIVE",e.Smooth="SMOOTH"}(i||(i={})),i.Dash,i.Hls,i.Progressive,i.Smooth},function(e,t,n){"use strict";n.d(t,"e",function(){return r});var a=n(647),i=document,r=function(){function e(){var e,t=this;this.handleVisibilityChange=function(){i.visibilityState===t.hidden?t.timeAtStartInBackgroundMS=Date.now():(t.timeAtEndInBackgroundMS=Date.now(),t.timeSpentInBackgroundMS+=t.timeAtEndInBackgroundMS-t.timeAtStartInBackgroundMS)},this.timeSpentInBackgroundMS=0,e=Object(a.e)(i),this.visibilityChange=e[0],this.hidden=e[1],void 0===document.addEventListener||void 0===this.hidden?console.error("The browser does not support loading video telemtry"):(i.visibilityState===this.hidden&&(this.timeAtStartInBackgroundMS=Date.now()),i.addEventListener(this.visibilityChange,this.handleVisibilityChange,!1))}return e.prototype.getTimeInBackgroundMS=function(){return!this.timeAtEndInBackgroundMS&&this.timeAtStartInBackgroundMS?Date.now()-this.timeAtStartInBackgroundMS:this.timeAtEndInBackgroundMS<this.timeAtStartInBackgroundMS?this.timeSpentInBackgroundMS+Date.now()-this.timeAtStartInBackgroundMS:this.timeSpentInBackgroundMS},e.prototype.dispose=function(){i.removeEventListener(this.visibilityChange,this.handleVisibilityChange,!1)},e}()},function(e,t,n){"use strict";n.d(t,"e",function(){return i});var a=n(3616);function i(e,t){var n={Year:{Singular:"",Plural:""},Month:{Singular:"",Plural:""},Day:{Singular:"",Plural:""},Hour:{Singular:t.getString("timeunit.hour.single"),Plural:t.getString("timeunit.hour.plural")},Minute:{Singular:t.getString("timeunit.minute.single"),Plural:t.getString("timeunit.minute.plural")},Second:{Singular:t.getString("timeunit.second.single"),Plural:t.getString("timeunit.second.plural")},Seperator:":"};return Object(a.e)(e,n)}},function(e,t){(function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};amp.plugin("analytics_collectData",function(t){var n=this,a=videojs.getComponent("Player"),i={analyticsstreamloaded:{name:"analyticsstreamloaded",label:"loaded",properties:["loadTimeMs"]},analyticsstreamstarted:{name:"analyticsstreamstarted",label:"started",properties:[]},analyticsstreamended:{name:"analyticsstreamended",label:"ended",properties:["ended"]},analyticspercentreached:{name:"analyticspercentreached",label:"percentReached",properties:["percentReached"]},analyticsplay:{name:"analyticsplay",label:"play",properties:["currentTime"]},analyticspause:{name:"analyticspause",label:"pause",properties:["currentTime"]},analyticsseek:{name:"analyticsseek",label:"seek",properties:["currentTime","seekTime"]},analyticsfullscreen:{name:"analyticsfullscreen",label:"fullscreen",properties:["enteringFullscreen","currentTime"]},analyticserror:{name:"analyticserror",label:"error",properties:["errorCode","currentTime"]},analyticsbuffering:{name:"analyticsbuffering",label:"buffering",properties:["currentTime","bufferingTime","currentBufferedLength","perceivedBandwidth"]},analyticsplaybackfinishedplaytime:{name:"analyticsplaybackfinishedplaytime",label:"playTime",properties:["playedSeconds"]},analyticsheartbeat:{name:"analyticsheartbeat",label:"heartbeat",properties:["playedSeconds","fullscreenTime","percentPlayed","duration","endReached","suspendedTriggered","enteredFullscreen","currentTime","loadTimeMs","seekCount","seekTimeTotal","maxSeekTime","avgSeekTime","rebufferCount","rebufferingSeconds","maxRebufferTime","avgRebufferTime","qualityLevelCount","minQualityLevel","maxQualityLevel","avgBitrate","modeBitrate","avgPerceivedBandwidth","avgMeasuredBandwidth","Br_0Kbps_300Kbps","Br_300Kbps_500Kbps","Br_500Kbps_1Mbps","Br_1Mbps_1_5Mbps","Br_1_5Mbps_3Mbps","Br_3Mbps_5Mbps","Br_5Mbps_6Mbps","Br_6Mbps_20Mbps","Br_20Mbps_above","failedDownloadCount","Pr_2_0","Pr_1_75","Pr_1_5","Pr_1_25","Pr_1_0","Pr_0_5","currentPlaybackRate","uniquePlayTime","qoeRebufferingScore","currentBufferedLength","currentAudioBufferLength","currentVideoBufferLength","currentDownloadBitrate","perceivedBandwidth","manifestRetryCount","isInAudioOnlyMode","displayedAudioOnlyMessage"]},analyticsplaybackfinished:{name:"analyticsplaybackfinished",label:"playbackSummary",properties:["playedSeconds","fullscreenTime","percentPlayed","duration","endReached","suspendedTriggered","enteredFullscreen","currentTime","loadTimeMs","seekCount","seekTimeTotal","maxSeekTime","avgSeekTime","rebufferCount","rebufferingSeconds","maxRebufferTime","avgRebufferTime","qualityLevelCount","minQualityLevel","maxQualityLevel","avgBitrate","modeBitrate","avgPerceivedBandwidth","avgMeasuredBandwidth","Br_0Kbps_300Kbps","Br_300Kbps_500Kbps","Br_500Kbps_1Mbps","Br_1Mbps_1_5Mbps","Br_1_5Mbps_3Mbps","Br_3Mbps_5Mbps","Br_5Mbps_6Mbps","Br_6Mbps_20Mbps","Br_20Mbps_above","failedDownloadCount","errorCode","Pr_2_0","Pr_1_75","Pr_1_5","Pr_1_25","Pr_1_0","Pr_0_5","currentPlaybackRate"]},analyticsplaybackwarning:{name:"analyticsplaybackwarning",label:"playbackwarning"}};a.prototype.analyticsEvents=i;var r,o={playbackSummary:"playbackSummary",loadTimeMs:"loadTimeMs",buffering:"buffering",downloadCompleted:"downloadCompleted",downloadFailed:"downloadFailed",bitrateQuality:"bitrateQuality",playedSeconds:"playedSeconds",percentReached:"percentReached",percentPlayed:"percentPlayed",rebufferTime:"rebufferTime"},s=!1,c={isBehindCDN:!1,checkSourceIsBehindCDN:function(){var e=(n.options?n.options():{}).sourceList;if(e&&e.length>0){var t=e[0].src;c.isBehindCDN=t.indexOf("azureedge.net")>-1}}},d={prevTriggerType:"",msSinceSourceSet:void 0,msSinceLastStage:void 0,isActive:!1,timeAtSourceSet:void 0,timeAtLastStage:void 0,isCyclePresent:!1,completedStages:new Set,registerStage:function(e){var t=Date.now();"sourceset"===e&&d.initOnSrcSet(t),d.isActive&&(d.msSinceSourceSet=t-d.timeAtSourceSet,d.msSinceLastStage=t-d.timeAtLastStage,d.completedStages.has(e)&&(d.isCyclePresent=!0),d.completedStages.add(e),d.timeAtLastStage=t,d.prevTriggerType=e,"canplaythrough"===e&&(d.isActive=!1))},initOnSrcSet:function(e){d.timeAtSourceSet=e,d.timeAtLastStage=e,d.prevTriggerType="",d.isActive=!0,d.isCyclePresent=!1,d.completedStages.clear()}},l={currentTime:function(){return Math.round(n.currentTime())||0},duration:function(){return(s?n.duration().toFixed(2):x.duration)||null},currentDownloadBitrate:function(){return n.currentDownloadBitrate()},currentAudioBufferLength:function(){return function(){if(n.audioBufferData){var e=n.audioBufferData();if(e)return e.bufferLevel}return null}()},currentVideoBufferLength:function(){return function(){if(n.videoBufferData){var e=n.videoBufferData();if(e)return e.bufferLevel}return null}()},loadTimeMs:function(){return x.loadTime},timeToStartPlayback:function(){},suspendedTriggered:function(){return x.suspended?1:0},manifestRetryCount:function(){return x.livestartupretry()},playIntervals:function(){return E.getArrayOfTimes()||null},uniquePlayIntervals:function(){return E.getUniqueArrayOfTimes()||null},uniquePlayTime:function(){return E.getUniquePlayTime()},playedSeconds:function(){return s?Math.round(A.totalSeconds):Math.round(E.totalSecondsWatched)},fullscreenTime:function(){return s?Math.round(A.totalSecondsFullscreen):Math.round(E.totalSecondsWatchedFullscreen)},percentReached:function(){return Math.round(Math.round(n.currentTime())/Math.round(n.duration())*100)},percentPlayed:function(){return s?null:Math.min(Math.round(E.getUniquePlayTime()/n.duration()*100),100)||0},endReached:function(){return x.endedReached?1:0},perceivedBandwidth:function(){return O.videoBuffer?Math.round(O.videoBuffer.perceivedBandwidth):0},avgPerceivedBandwidth:function(){return O.videoBuffer?Math.round(O.sumPerceivedBandwidth/O.downloadedChunks):0},avgMeasuredBandwidth:function(){return O.videoBuffer?Math.round(O.sumMeasuredBandwidth/O.downloadedChunks):0},qualityLevelCount:function(){return O.qualityLevels||null},minQualityLevel:function(){return O.minQualityLevel||null},maxQualityLevel:function(){return O.maxQualityLevel||null},avgBitrate:function(){return O.downloadedChunks>0?Math.round(O.sumBitrate/O.downloadedChunks):null},modeBitrate:function(){return O.getModeBitrate()},Br_0Kbps_300Kbps:function(){return O.chunksInBitrateRange.Br_0Kbps_300Kbps},Br_300Kbps_500Kbps:function(){return O.chunksInBitrateRange.Br_300Kbps_500Kbps},Br_500Kbps_1Mbps:function(){return O.chunksInBitrateRange.Br_500Kbps_1Mbps},Br_1Mbps_1_5Mbps:function(){return O.chunksInBitrateRange.Br_1Mbps_1_5Mbps},Br_1_5Mbps_3Mbps:function(){return O.chunksInBitrateRange.Br_1_5Mbps_3Mbps},Br_3Mbps_5Mbps:function(){return O.chunksInBitrateRange.Br_3Mbps_5Mbps},Br_5Mbps_6Mbps:function(){return O.chunksInBitrateRange.Br_5Mbps_6Mbps},Br_6Mbps_20Mbps:function(){return O.chunksInBitrateRange.Br_6Mbps_20Mbps},Br_20Mbps_above:function(){return O.chunksInBitrateRange.Br_20Mbps_above},Pr_2_0:function(){return k.Pr_2_0},Pr_1_75:function(){return k.Pr_1_75},Pr_1_5:function(){return k.Pr_1_5},Pr_1_25:function(){return k.Pr_1_25},Pr_1_0:function(){return k.Pr_1_0},Pr_0_5:function(){return k.Pr_0_5},currentPlaybackRate:function(){return n.playbackRate()},failedDownloadCount:function(){return O.videoBuffer?O.failedChunks:null},errorCode:function(){return n.error()?n.error().code.toString(16):null},errorMessage:function(){return n.error()?n.error().message:null},bufferingTime:function(){return C.bufferingTime},currentBufferedLength:function(){return I?I():null},rebufferCount:function(){return C.state?C.count+1:C.count},rebufferingSeconds:function(){return(C.state?C.bufferingTimeTotal+Math.abs(Date.now()-C.bufferingTimeStart):C.bufferingTimeTotal)/1e3},maxRebufferTime:function(){return C.maxBufferingTime},qoeRebufferingScore:function(){return C.score()},avgRebufferTime:function(){return Math.round(1e3*this.rebufferingSeconds()/this.rebufferCount())||0},seekTime:function(){return w.seekTime},seekTimeTotal:function(){return w.seekTimeTotal},maxSeekTime:function(){return w.maxSeekTime},avgSeekTime:function(){return Math.round(w.seekTimeTotal/w.seekCount)||0},seekCount:function(){return w.seekCount},enteringFullscreen:function(){return n.isFullscreen()?1:0},enteredFullscreen:function(){return E.totalSecondsWatchedFullscreen>0||A.totalSecondsFullscreen>0?1:0},playbackSummary:function(){getPlaybackSummary()},maxVideoResolution:function(){var e=n.getMaxVideoResolution&&n.getMaxVideoResolution();if(e)return e.width+"x"+e.height},isInAudioOnlyMode:function(){return n.getIsInAudioOnlyMode?n.getIsInAudioOnlyMode():null},displayedAudioOnlyMessage:function(){return n.getDisplayedAudioOnlyMessage?n.getDisplayedAudioOnlyMessage():null}};a.prototype.getData=l,n.telemetryData={},null==t&&(t={});var u={};this.options()["data-setup"]&&(r=JSON.parse(this.options()["data-setup"])).analytics_collectData&&(u=r.analytics_collectData);var f=t.metricsToTrack||u.metricsToTrack||["playbackSummary"],p={};f.forEach(function(e,t,n){p[e]=!0}),a.prototype.metricsToTrack=p;var m=t.heartbeatInterval||u.heartbeatInterval||3e4,_=t.percentsPlayedInterval||u.percentsPlayedInterval||20,h=t.debug||u.debug||!1;a.prototype.analyticsDebug=h;var b=t.streamId||u.streamId||null,g=[],v=-1,y=null;function S(e){if(e){var t="",n=e.split("//");if(n.length>1)for(var a=1;a<n.length;a++)a>1&&(t+="//"),t+=n[a];else t=e;t.match(/.ism\/manifest/i)&&(t=t.split(/.ism\/manifest/i)[0]+".ism/manifest")}return t||"unknown"}function D(e){var t="unknown";if(e)switch(e.toLowerCase()){case"aes":t="aes";break;case"playready":case"widevine":case"fairplay":t="drm";break;default:t="none"}return t}function I(){var e=n.buffered(),t=n.currentTime();if(e)return Math.max(0,e.end(e.length-1)-t).toFixed(2)}var x={loadTime:0,canplaythrough:!1,suspended:!1,loadTimeStart:Date.now(),duration:null,firstPlay:!1,videoPlayerLoaded:!1,endedReached:!1,videoElementUsed:!1,manifestRetryCount:0,wasPageInBackgroundDuringLoad:!1,updateLoadTime:function(){n.error()||(this.duration=n.duration().toFixed(2)),this.loadTime=Math.abs(Math.round(Date.now()-this.loadTimeStart)),h&&(console.log("Player Load Time determined: "+this.loadTime+"ms"),console.log("Load Time since pageload determined: "+performance.now().toFixed(2)+"ms")),p.loaded&&n.trigger(i.analyticsstreamloaded.name)},reset:function(){this.loadTime=0,this.loadTimeStart=Date.now(),this.duration=null,this.isLive=!1,this.firstPlay=!1,this.endedReached=!1,this.canplaythrough=!1,this.videoPlayerLoaded=!1,this.suspended=!1,b=t.streamId||u.streamId||null},livestartupretry:function(){this.manifestRetryCount++}},C={aboveRebufferThreshold:!1,state:!1,bufferingTime:0,bufferingTimeStart:0,bufferingTimeTotal:0,maxBufferingTime:0,count:0,enterBuffering:function(){x.firstPlay&&(this.state&&this.send(),this.bufferingTimeStart=Date.now(),this.state=!0,this.count++,h&&console.log("Entering buffering state..."))},send:function(){if(this.state){var e=Math.abs(Date.now()-this.bufferingTimeStart);e>10?(this.bufferingTime=e,this.maxBufferingTime=Math.max(this.maxBufferingTime,this.bufferingTime),0!==Math.round(n.currentTime())&&p.buffering&&n.trigger(i.analyticsbuffering.name),this.bufferingTimeTotal+=this.bufferingTime,h&&console.log("Exiting buffering state.  Time spent rebuffering was "+this.bufferingTime+"ms")):h&&console.log("Exit buffering state...no buffering detected"),this.state=!1}},reset:function(){this.bufferingTime=0,this.bufferingTimeStart=0,this.bufferingTimeTotal=0,this.count=0,this.state=!1,this.maxBufferingTime=0},score:function(){var e;return l.playedSeconds()>0&&(e=(5*this.count+this.bufferingTimeTotal/1e3)/l.playedSeconds()),e},rebufferingQuality:function(){var e=l.playedSeconds,t=this.score();return 0===e?"DidNotStart":e<120?"Unknown":t<=.3?"Excellent":t>.3&&t<=1?"Good":t>1&&t<=2?"Fair":t>2&&t<=4?"Poor":t>4?"VeryPoor":"Unknown"}},O={videoBuffer:null,audioBuffer:null,sumBitrate:0,sumPerceivedBandwidth:0,sumMeasuredBandwidth:0,downloadedChunks:0,failedChunks:0,qualityLevels:null,maxQualityLevel:null,minQualityLevel:null,downloadsByBitrate:null,chunksInBitrateRange:{Br_0Kbps_300Kbps:0,Br_300Kbps_500Kbps:0,Br_500Kbps_1Mbps:0,Br_1Mbps_1_5Mbps:0,Br_1_5Mbps_3Mbps:0,Br_3Mbps_5Mbps:0,Br_5Mbps_6Mbps:0,Br_6Mbps_20Mbps:0,Br_20Mbps_above:0},setQualityLevels:function(){if(this.videoBuffer){var e=n.currentVideoStreamList().streams?n.currentVideoStreamList().streams[0]:void 0;if(e){this.qualityLevels=e.tracks.length,this.downloadsByBitrate={};for(var t=0;t<this.qualityLevels;t++)this.downloadsByBitrate[e.tracks[t].bitrate]=0,this.maxQualityLevel=this.maxQualityLevel?Math.max(this.maxQualityLevel,e.tracks[t].bitrate):e.tracks[t].bitrate,this.minQualityLevel=this.minQualityLevel?Math.min(this.minQualityLevel,e.tracks[t].bitrate):e.tracks[t].bitrate}}},getModeBitrate:function(){var e=null,t=0;if(this.videoBuffer)for(var n in this.downloadsByBitrate)if(this.downloadsByBitrate.hasOwnProperty(n)){var a=this.downloadsByBitrate[n];a>=t&&(t=a,e=parseInt(n))}return t?e:null},completed:function(){if(this.qualityLevels||this.setQualityLevels(),n.currentDownloadBitrate()){this.downloadedChunks+=1,this.sumBitrate+=n.currentDownloadBitrate(),this.downloadsByBitrate&&(this.downloadsByBitrate[n.currentDownloadBitrate()]+=1),this.videoBuffer&&(p.downloadInfo&&(n.telemetryData[o.downloadCompleted]={bitrate:n.currentDownloadBitrate(),measuredBandwidth:this.videoBuffer.downloadCompleted.measuredBandwidth,perceivedBandwidth:this.videoBuffer.perceivedBandwidth}),this.sumPerceivedBandwidth+=this.videoBuffer.perceivedBandwidth,this.sumMeasuredBandwidth+=this.videoBuffer.downloadCompleted.measuredBandwidth);var e=n.currentDownloadBitrate();e<3e5&&this.chunksInBitrateRange.Br_0Kbps_300Kbps++,e>3e5&&e<5e5&&this.chunksInBitrateRange.Br_300Kbps_500Kbps++,e>5e5&&e<1e6&&this.chunksInBitrateRange.Br_500Kbps_1Mbps++,e>1e6&&e<15e5&&this.chunksInBitrateRange.Br_1Mbps_1_5Mbps++,e>15e5&&e<3e6&&this.chunksInBitrateRange.Br_1_5Mbps_3Mbps++,e>3e6&&e<5e6&&this.chunksInBitrateRange.Br_3Mbps_5Mbps++,e>5e6&&e<6e6&&this.chunksInBitrateRange.Br_5Mbps_6Mbps++,e>6e6&&e<2e7&&this.chunksInBitrateRange.Br_6Mbps_20Mbps++,e>2e7&&this.chunksInBitrateRange.Br_20Mbps_above++}},failed:function(e){if(p.downloadInfo){var t,a;if("audio"==e.toLowerCase()){var i=0;t=this.audioBuffer.downloadFailed.code.toString(8),a=this.audioBuffer.downloadFailed.message}else i=1,t=this.videoBuffer.downloadFailed.code.toString(8),a=this.videoBuffer.downloadFailed.message;n.telemetryData[o.downloadFailed]={isVideo:i,code:t,message:a}}this.failedChunks++},send:function(){if(p.bitrateQuality&&this.downloadedChunks>0){if(bitrateQualityMetrics={avgBitrate:this.sumBitrate/this.downloadedChunks},this.videoBuffer){var e=Math.round(this.sumMeasuredBandwidth/this.downloadedChunks),t=Math.round(this.sumPerceivedBandwidth/this.downloadedChunks);bitrateQualityMetrics.avgMeasuredBandwidth=e,bitrateQualityMetrics.avgPerceivedBandwidth=t}n.telemetryData[o.telemetryData]=bitrateQualityMetrics}},reset:function(){this.videoBuffer=null,this.audioBuffer=null,this.sumBitrate=0,this.sumPerceivedBandwidth=0,this.sumMeasuredBandwidth=0,this.downloadedChunks=0,this.failedChunks=0,this.qualityLevels=null,this.minQualityLevel=null,this.maxQualityLevel=null,this.downloadsByBitrate=null,this.chunksInBitrateRange={Br_0Kbps_300Kbps:0,Br_300Kbps_500Kbps:0,Br_500Kbps_1Mbps:0,Br_1Mbps_1_5Mbps:0,Br_1_5Mbps_3Mbps:0,Br_3Mbps_5Mbps:0,Br_5Mbps_6Mbps:0,Br_6Mbps_20Mbps:0,Br_20Mbps_above:0}}},w={seeking:!1,seekTime:0,seekTimeTotal:0,seekCount:0,seekTimeStart:Date.now(),maxSeekTime:0,enterSeek:function(){C.state&&C.send(),this.seeking=!0,this.seekTimeStart=Date.now()},exitSeek:function(){this.seeking&&(this.seekTime=Math.abs(Date.now()-this.seekTimeStart),this.seekCount++,this.seekTimeTotal+=this.seekTime,this.maxSeekTime=Math.max(this.maxSeekTime,this.seekTime),p.seek&&n.trigger(i.analyticsseek.name),this.seeking=!1)},avgSeekTime:function(){return this.seekTimeTotal/this.seekCount||0},reset:function(){this.seeking=!1,this.seekTime=0,this.seekTimeTotal=0,this.seekCount=0,this.seekTimeStart=Date.now(),this.maxSeekTime=0}},E={startTime:0,endTime:0,added:!1,lastCheckedTime:0,arrayOfTimes:[],arrayOfTimesFullscreen:[],uniqueArrayOfTimesFullscreen:[],totalSecondsWatched:0,totalSecondsWatchedFullscreen:0,sortAlgorithm:function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0},update:function(e){e==this.lastCheckedTime+1&&(this.added=!1,n.playbackRate()>0&&(this.totalSecondsWatched+=1/n.playbackRate(),n.isFullscreen()&&(this.totalSecondsWatchedFullscreen+=1/n.playbackRate()))),e!=this.lastCheckedTime&&e!=this.lastCheckedTime+1&&(this.pushOn(),this.startTime=e),this.lastCheckedTime=e},pushOn:function(){this.endTime=this.lastCheckedTime,this.startTime!==this.endTime&&(this.arrayOfTimes.push([this.startTime,this.endTime]),this.added=!0)},getArrayOfTimes:function(){var e=[];e=this.arrayOfTimes.slice();var t=Math.round(n.currentTime());return this.added||this.startTime===t||e.push([this.startTime,t]),e},getUniqueArrayOfTimes:function(){var e=this.getArrayOfTimes().slice();e.sort(this.sortAlgorithm);var t=[];if(e.length>1){t.push(e[0]);for(var n=1;n<e.length;n++)if(e[n][0]<=t[t.length-1][1]){if(e[n][1]>t[t.length-1][1]){var a=t[t.length-1][0],i=e[n][1];t.pop(),t.push([a,i])}}else t.push(e[n])}else t=e;return t},getPlayTime:function(){for(var e=this.getArrayOfTimes(),t=0,n=0;n<e.length;n++)t+=e[n][1]-e[n][0];return Math.round(t)},getUniquePlayTime:function(){for(var e=this.getUniqueArrayOfTimes(),t=0,n=0;n<e.length;n++)t+=e[n][1]-e[n][0];return Math.round(t)},reset:function(){this.startTime=0,this.endTime=0,this.lastCheckedTime=0,this.totalSecondsWatched=0,this.totalSecondsWatchedFullscreen=0,this.added=!1,this.arrayOfTimes=[],this.arrayOfTimesFullscreen=[],this.uniqueArrayOfTimesFullscreen=[]}},A={totalSeconds:0,totalSecondsFullscreen:0,start:function(){var e=this;this.interval=setInterval(function(){n.playbackRate()>0&&(e.totalSeconds+=1/n.playbackRate(),n.isFullscreen()&&(e.totalSecondsFullscreen+=1/n.playbackRate()))},1e3)},pause:function(){clearInterval(this.interval),delete this.interval},resume:function(){this.interval||this.start()},reset:function(){this.totalSeconds=0,this.totalSecondsFullscreen=0}},L={heartbeatOn:!1,intervalHeartbeatFunction:null,lastTimeUpdateCallTime:0,timeupdateTimer:NaN,updateLastTimeupdateTime:function(){if(0===this.lastTimeUpdateCallTime)this.lastTimeUpdateCallTime=Date.now();else if(isNaN(this.timeupdateTimer)&&this.lastTimeUpdateCallTime>0){var e=this;this.timeupdateTimer=setTimeout(function(){e.lastTimeUpdateCallTime=Date.now(),e.timeupdateTimer=NaN},3e3)}},startHeartbeat:function(){this.heartbeatOn||(this.intervalHeartbeatFunction=setInterval(this.sendHeartbeat.bind(this),m),this.heartbeatOn=!0)},stopHeartbeat:function(){this.heartbeatOn&&(clearInterval(this.intervalHeartbeatFunction),this.heartbeatOn=!1,this.sendHeartbeat())},sendHeartbeat:function(e){x.canplaythrough||x.wasPageInBackgroundDuringLoad||(x.wasPageInBackgroundDuringLoad=!("visible"===document.visibilityState));var t="intervalHeartbeat";if(e=e||t,this.lastTimeUpdateCallTime>0&&e===t){var a=Date.now()-this.lastTimeUpdateCallTime;if(h&&console.log("Time since last timeupdate = "+a),a>3e4)return void this.stopHeartbeat()}d.registerStage(e);var r={triggerType:e,wasPageInBackgroundDuringLoad:x.wasPageInBackgroundDuringLoad},o={type:i.analyticsheartbeat.name,data:{telemetryProperties:r}};n.trigger(o)},reset:function(){clearInterval(this.intervalHeartbeatFunction),this.intervalHeartbeatFunction=null,this.heartbeatOn=!1,this.lastTimeUpdateCallTime=0,isNaN(this.timeupdateTimer)||(clearTimeout(this.timeupdateTimer),this.timeupdateTimer=NaN)}},k={Pr_2_0:0,Pr_1_75:0,Pr_1_5:0,Pr_1_25:0,Pr_1_0:0,Pr_0_5:0},M=!0,P=function(){x.canplaythrough||(x.updateLoadTime(),x.canplaythrough=!0,s=n.isLive(),x.videoPlayerLoaded=!0)},T=function(){switch(n.playbackRate()){case.5:k.Pr_0_5=1;break;case 1:k.Pr_1_0=1;break;case 1.25:k.Pr_1_25=1;break;case 1.5:k.Pr_1_5=1;break;case 1.75:k.Pr_1_75=1;break;case 2:k.Pr_2_0=1}},U={warningsConfirmationTimer:NaN,decryptionFailedHandler:function(e,t){p.warnings&&isNaN(U.warningsConfirmationTimer)&&(U.warningsConfirmationTimer=setTimeout(function(){var a={triggerType:"playbackWarning"};a.errorMessage=e.type.concat(" ",t.url),a.workflowType=t.streamType,a.warning=e.type;var r={type:i.analyticsplaybackwarning.name,data:{telemetryProperties:a}};n.trigger(r),U.warningsConfirmationTimer=NaN},5e3))}};function F(){C.state&&C.send(),p.playTime&&n.trigger(i.analyticsplaybackfinishedplaytime.name),p.heartbeat&&(L.stopHeartbeat(),L.sendHeartbeat()),p.playbackSummary&&n.trigger(i.analyticsplaybackfinished.name)}n.addEventListener("sourceset",function(){n.options().sourceSetByRetry?n.options().sourceSetByRetry=!1:M&&(x.videoElementUsed&&F(),x.reset(),C.reset(),A.reset(),E.reset(),O.reset(),w.reset(),L.reset(),v=null,y=null,b=null,s=!1,c.checkSourceIsBehindCDN(),h&&console.log("Resetting App Insight Plugin Config"),M=!1),L.sendHeartbeat("sourceset")}),n.addEventListener("loadedmetadata",function(){(b=t.streamId||u.streamId||null)||(b=S(n.currentSrc())),h&&console.log("streamId set as: "+b),y=n.currentProtectionInfo()?D(n.currentProtectionInfo()[0].type):"none",h&&console.log("protectionInfo set as: "+y),x.videoElementUsed=!0}),n.addEventListener("canplaythrough",P),n.addEventListener("ratechange",T),n.addEventListener("livestartupretry",x.livestartupretry),n.addEventListener("decryptionFailed",U.decryptionFailedHandler);var H=n.tagAttributes.id;function R(e){if(!e||0===e.length)return null;var t=[];return e.forEach(function(e){2===e.length&&t.push("["+e[0]+","+e[1]+"]")}),t.join(",")}(document.getElementById(H+"_html5_api")?document.getElementById(H+"_html5_api"):document.getElementById(H)).addEventListener("suspend",function(){}),(p.bitrateQuality||p.downloadInfo||p.playbackSummary||p.heartbeat)&&n.addEventListener("loadedmetadata",function(){O.videoBuffer=n.videoBufferData(),O.videoBuffer&&(O.videoBuffer.addEventListener("downloadcompleted",function(){O.completed()}),O.videoBuffer.addEventListener("downloadfailed",function(){O.failed("video")})),O.audioBuffer=n.audioBufferData(),O.audioBuffer&&O.audioBuffer.addEventListener("downloadfailed",function(){O.failed("audio")})}),(p.error||p.playTime||p.playbackSummary||p.heartbeat)&&n.addEventListener("error",function(){isNaN(U.warningsConfirmationTimer)||(clearTimeout(U.warningsConfirmationTimer),U.warningsConfirmationTimer=NaN),0==x.loadTime&&x.updateLoadTime(),(p.playTime||p.playbackSummary||p.heartbeat)&&s&&A.pause(),p.error&&n.trigger(i.analyticserror.name)}),(p.end||p.playTime||p.playbackSummary||p.heartbeat)&&n.addEventListener("ended",function(){x.endedReached||(x.endedReached=!0),(p.playTime||p.playbackSummary||p.heartbeat)&&s&&A.pause(),p.ended&&n.trigger(i.analyticsstreamended.name)}),p.heartbeat&&(n.addEventListener("error",function(){x.videoPlayerLoaded=!0,L.stopHeartbeat()}),n.addEventListener("loadeddata",function(){x.videoPlayerLoaded=!0,L.sendHeartbeat("loadeddata")}),n.addEventListener("canplaythrough",function(){L.sendHeartbeat("canplaythrough")}),n.addEventListener("playerSetupCheckCompleted",function(){L.sendHeartbeat("playerSetupCheckCompleted")}),n.addEventListener("manifestFetchCompleted",function(){L.sendHeartbeat("manifestFetchCompleted")}),n.addEventListener("manifestParsingCompleted",function(){L.sendHeartbeat("manifestParsingCompleted")}),n.addEventListener("livestartupretry",function(){L.sendHeartbeat("livestartupretry")}),n.addEventListener("initialBandwidthEstimationCompleted",function(){L.sendHeartbeat("initialBandwidthEstimationCompleted")}),n.addEventListener("aesKeyFetchCompleted",function(){L.sendHeartbeat("aesKeyFetchCompleted")}),n.addEventListener("decryptorInitialized",function(){L.sendHeartbeat("decryptorInitialized")}),n.addEventListener("mediaSourceSrcSetResolved",function(){L.sendHeartbeat("mediaSourceSrcSetResolved")}),n.addEventListener("playing",function(){L.startHeartbeat()}),n.addEventListener("ended",function(){L.stopHeartbeat()}),n.addEventListener("pause",function(){setTimeout(function(){n.paused()&&L.stopHeartbeat()},1e3)})),(p.percentsPlayed||p.bitrateQuality||p.playbackSummary||p.playTime||p.heartbeat)&&n.addEventListener("timeupdate",function(){if(b){C.state&&C.send();var t=Math.round(n.currentTime());if((p.playbackSummary||p.heartbeat||p.playTime)&&E.update(t),p.percentsPlayed&&!s){var a=Math.round(n.duration()),r=Math.round(t/a*100);r!=v&&r%_==0&&r<=100&&(e.call(g,r)<0&&g.push(r),n.trigger(i.analyticspercentreached.name)),v=r}(p.bitrateQuality||p.playbackSummary||p.heartbeat)&&!O.videoBuffer&&n.currentDownloadBitrate()&&O.completed(),L.updateLastTimeupdateTime()}}),n.addEventListener("playing",function(){x.canplaythrough||P(),w.seeking=!1,x.firstPlay||(p.viewed&&n.trigger(i.analyticsstreamstarted.name),x.firstPlay=!0,T()),(p.buffering||p.playbackSummary||p.heartbeat)&&C.send(),(p.playTime||p.playbackSummary||p.heartbeat)&&s&&(0==A.totalSeconds?A.start():A.resume())}),(p.playTime||p.bitrateQuality||p.playbackSummary||p.heartbeat)&&n.addEventListener("disposing",function(){for(var e in F(),n.analyticsEvents){var t=n.analyticsEvents[e];n.removeEventListener(t.name)}}),p.play&&n.addEventListener("play",function(){p.play&&(w.seeking||n.trigger(i.analyticsplay.name))}),(p.pause||p.playTime||p.buffering||p.playbackSummary||p.heartbeat)&&n.addEventListener("pause",function(){(p.playTime||p.playbackSummary||p.heartbeat)&&s&&A.pause(),p.pause&&setTimeout(function(){Math.round(n.currentTime())===Math.round(n.duration())||w.seeking||p.pause&&n.trigger(i.analyticspause.name)},100)}),(p.buffering||p.playbackSummary||p.heartbeat)&&n.addEventListener("waiting",function(e,t){t&&"bufferUnderrun"!==t.context||(C.enterBuffering(),L.sendHeartbeat("buffering"));var a,i=l.playedSeconds(),r=l.rebufferingSeconds();r&&i&&(a=r/i),i>10&&n.options_&&n.options_.audioOnlyRebufferThreshold&&a&&n.options_.audioOnlyRebufferThreshold<a&&!C.aboveRebufferThreshold&&(C.aboveRebufferThreshold=!0,n.trigger("rebufferRatioReached"))}),(p.buffering||p.seek||p.playbackSummary||p.heartbeat)&&(n.addEventListener("seeking",function(){w.enterSeek()}),n.addEventListener("seeked",function(){w.exitSeek()})),p.fullscreen&&n.addEventListener("fullscreenchange",function(){n.trigger(i.analyticsfullscreen.name)}),a.prototype.getTelemetryProperties=function(){var e={StreamId:"unknown",PluginVersion:.6,PlayerVersion:n.getFullAmpVersion()||"unknown",PlaybackTech:n.currentTechName()||"unknown",ProtectionType:y||"unknown",autoPlay:n.autoplay()||"unknown",heuristicsProfile:n.currentHeuristicProfile()||"unknown",isBehindCDN:c.isBehindCDN};if(b||n.options_.sourceList[0]&&S(n.options_.sourceList[0].src),!y){var t="unknown";n.options_.sourceList[0]&&(t=n.options_.sourceList[0].protectionInfo?D(n.options_.sourceList[0].protectionInfo[0].type):"none"),e.ProtectionType=t}return e.manualBitrateChanged=!1,e},a.prototype.getEventMetrics=function(e){var t={};return i[e]&&i[e].hasOwnProperty("properties")&&i[e].properties.forEach(function(e,n,a){if(l[e]&&"function"==typeof l[e]){var i=l[e]();null===i||isNaN(i)||(t[e]=i)}}),t},a.prototype.getDynamicTelemetryProperties=function(){var e=R(l.playIntervals()),t=R(l.uniquePlayIntervals()),a=l.manifestRetryCount(),i=n.currentType()||"unknown",r={};return function(e,t,n){if(e&&t&&n&&Array.isArray(t)&&Array.isArray(n)&&t.length==n.length)for(var a=0;a<t.length;a++)null!=n[a]&&(e[t[a]]=n[a])}(r,["qoeRebuffering","playIntervals","uniquePlayIntervals","manifestRetryCount","MimeType","maxVideoResolution","loaded"],[C.rebufferingQuality(),e,t,a,i,l.maxVideoResolution(),x.videoPlayerLoaded]),r},a.prototype.getChronometerData=function(){return{prevChronometerTriggerType:d.prevTriggerType,isCyclePresent:d.isCyclePresent,msSinceSourceSet:d.msSinceSourceSet,msSinceLastStage:d.msSinceLastStage}}})}).call(this)}],Array(14),[function(e,t,n){"use strict";n.d(t,"w",function(){return a}),n.d(t,"n",function(){return i}),n.d(t,"U",function(){return r}),n.d(t,"T",function(){return o}),n.d(t,"P",function(){return s}),n.d(t,"M",function(){return c}),n.d(t,"b",function(){return d}),n.d(t,"h",function(){return l}),n.d(t,"r",function(){return u}),n.d(t,"E",function(){return f}),n.d(t,"N",function(){return p}),n.d(t,"R",function(){return m}),n.d(t,"t",function(){return _}),n.d(t,"e",function(){return h}),n.d(t,"a",function(){return b}),n.d(t,"H",function(){return g}),n.d(t,"L",function(){return v}),n.d(t,"k",function(){return y}),n.d(t,"I",function(){return S}),n.d(t,"D",function(){return D}),n.d(t,"y",function(){return I}),n.d(t,"v",function(){return x}),n.d(t,"x",function(){return C}),n.d(t,"F",function(){return O}),n.d(t,"O",function(){return w}),n.d(t,"C",function(){return E}),n.d(t,"S",function(){return A}),n.d(t,"g",function(){return L}),n.d(t,"d",function(){return k}),n.d(t,"f",function(){return M}),n.d(t,"p",function(){return P}),n.d(t,"m",function(){return T}),n.d(t,"_",function(){return U}),n.d(t,"u",function(){return F}),n.d(t,"l",function(){return H}),n.d(t,"s",function(){return R}),n.d(t,"c",function(){return N}),n.d(t,"i",function(){return B}),n.d(t,"o",function(){return j}),n.d(t,"B",function(){return V}),n.d(t,"A",function(){return z});var a="OriginalAudio",i="EnhancedAudio",r="NoiseSuppressionOnTooltip",o="NoiseSuppressionOffTooltip",s="FluentNoiseSuppressionOnTooltip",c="FluentNoiseSuppressionOffTooltip",d="NoiseSuppressionAriaLabel",l="NoiseSuppressionAriaDescription",u="FluentNoiseSuppressionAriaDescription",f="PROGRESSIVE",p="NoiseSuppressionTurnedOn",m="NoiseSuppressionTurnedOff",_="DefaultTrackSetToOriginal",h="DefaultTrackSetToEnhanced",b="Switching audio tracks failed because playback was progressive",g="Switching audio tracks failed when expected to work.",v="TimeToInteractionResponse",y="NoiseSuppressionTrackReady",S="NoiseSuppression",D="NoiseSuppressionErrorMessage",I="NoiseSuppressionBufferingThresholdReached",x="NoiseSuppressionBufferingMessage",C="NoiseSuppressionTurnOffLinkClick",O="NoiseSuppressionTurnOff",w="NoiseSuppressionWithIncreasedPlaybackSpeed",E="NoiseSuppressionTurnOffWithIncreasedPlaybackSpeed",A=5,L=10,k="noiseSuppressionEnabledByDefault",M="MediaSettingsNoiseSuppression",P="MediaSettingsNoiseSuppressionTooltipAria",T="MediaSettingsNoiseSuppressionTooltip",U="NoiseSuppression",F="MediaSettingsNoiseSuppressionCheckboxText",H="MediaSettingsNoiseSuppressionAdditionalText",R="Couldn't register NoiseSuppression MediaSetting, uiApi was undefined",N="NoiseSuppressionMediaSettingRegister",B="FallbackToProgressiveDownload",j="ForcingAdaptiveStreamingPlaybackTypeFailed",V="VideoDoesNotContainAudioStream",z="SwitchingToAdaptiveStreamingIsNotPossible"}],Array(223),[function(e,t,n){"use strict";var a;function i(e,t){for(var n=e,a=0;0!==window.performance.getEntriesByName(n,t).length;)n="".concat(e,"-").concat(a++);return n}function r(e,t){var n=t||"MsSinceNavigationStart";if(e){if(window.performance&&window.performance.mark&&o(e)){var r=i(n,"mark");window.performance.mark(r);var s=window.performance.getEntriesByName(r,"mark")[0];return window.performance.clearMarks(r),{Method:a.HostSpecifiedPerformanceMark,MsSinceNavigationStart:s.startTime-e.startTime}}return{Method:a.HostSpecifiedDate,MsSinceNavigationStart:Date.now()-e.getTime()}}if(window.performance&&window.performance.measure){r=i(n,"measure"),window.performance.measure(r);var c=window.performance.getEntriesByName(r,"measure");return window.performance.clearMeasures(r),{Method:a.PerformanceNavigationTiming,MsSinceNavigationStart:c[0].duration}}return window.performance&&window.performance.timing?{Method:a.NavigationTiming,MsSinceNavigationStart:Date.now()-window.performance.timing.navigationStart}:window.estimatedNavigationStartTime?{Method:a.Estimated,MsSinceNavigationStart:Date.now()-window.estimatedNavigationStartTime.getTime()}:void 0}function o(e){return void 0!==e&&"mark"===e.entryType}function s(e){return"measure"===e.entryType}n.d(t,"e",function(){return r}),n.d(t,"t",function(){return o}),n.d(t,"n",function(){return s}),function(e){e.PerformanceNavigationTiming="PerformanceNavigationTiming",e.NavigationTiming="NavigationTiming",e.Estimated="Estimated",e.HostSpecifiedPerformanceMark="HostSpecifiedPerformanceMark",e.HostSpecifiedDate="HostSpecifiedDate"}(a||(a={}))}],Array(59),[function(e,t,n){"use strict";n.d(t,"e",function(){return s}),n.d(t,"t",function(){return c});var a=n(0),i=n(51),r=n(1108),o=n(1107);function s(e,t){var n=i.t().toString();return{prefetchManifestPromise:Promise.all([e,t]).then(function(e){var t=e[0],a=e[1];return d(n,t,a)}),playbackSessionId:n}}function c(e,t){var n=i.t().toString();return{prefetchManifestPromise:e.then(function(e){return d(n,{dashUrl:e},t)}),playbackSessionId:n}}function d(e,t,n){return Object(a.t)(this,void 0,void 0,function(){var i,s;return Object(a.i)(this,function(a){switch(a.label){case 0:return i=function(e,t,n,a){var i=Object(r.i)(e,a);return Object(r.t)(i,t,n)}(t,e,n.contentType,n.enableNoiseSuppression),[4,Object(o.e)(i,n.getDownloadRequestParameters,n.enableHybridPlayback)];case 1:return(s=a.sent())?[4,s.text()]:[2,void 0];case 2:return[2,{text:a.sent(),status:s.status,statusText:s.statusText,headers:s.headers,url:s.url}]}})})}},function(e,t,n){"use strict";n.d(t,"e",function(){return i});var a=n(0);function i(e,t,n){return Object(a.t)(this,void 0,void 0,function(){var i,r,o;return Object(a.i)(this,function(a){switch(a.label){case 0:return i="unknown",e&&e.dashUrl&&e.dashUrl[0]?((r=e.dashUrl[0])&&(r=function(e,t){if(t&&-1!==e.indexOf("enableCdn=1")){var n=e.indexOf("?")>=0?"&":"?";return e+n+"hybridPlayback=true"}return e}(r,n)),[4,t(r)]):[3,5];case 1:return(o=a.sent())&&o.url?[4,fetch(o.url,{headers:o.headers})]:[3,3];case 2:return[2,a.sent()];case 3:o?o.url||(i="updated url not defined"):i="updateDashRequest not defined",a.label=4;case 4:return[3,6];case 5:e?e.dashUrl?e.dashUrl[0]||(i="dashUrl[0] not defined"):i="dashUrl not defined":i="playbackUrls not defined",a.label=6;case 6:throw new Error("Parameters to prefetch manifest are not valid: "+i)}})})}},function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"e",function(){return c}),n.d(t,"n",function(){return d}),n.d(t,"t",function(){return l}),n.d(t,"i",function(){return u});var a=n(0),i=n(3613),r=n(55),o=n(2);function s(e,t){var n="";if(e){var a=function(e){return 16===e.length?e:e.length>=34?e.substr(18,16):""}(e.principalId);n=/^[a-fA-F0-9]{16}$/.test(a)?a.toUpperCase():""}return{UserClaim:{TenantId:e&&/^[a-f0-9]{8}-([a-f0-9]{4}-){3}[a-f0-9]{12}$/.test(e.tenantId)?e.tenantId:"",UserInfo:{DisplayableId:e&&e.userEmail?e.userEmail:"",FamilyName:"",GivenName:"",UniqueId:n}},SessionId:t,ServerTime:"",AccessToken:"",AccessTokenExpiry:"",UserRegion:"",UserLanguage:"",ApiGatewayUri:"",ApiGatewayVersion:"",NotificationEndPoint:"",ServiceRegion:"",IsRightToLeft:!1,LCID:"",ClientSessionId:"",ServicePlanForTelemetry:"",PrincipalId:n,PrincipalInfo:"",OfficeVideoApiUri:"",OfficeVideoApiVersion:"",ClientAppId:"",ReferrerUrl:"",IsEmbed:!0,TenantedAuth:!1,UserTimezone:"",OfficeNavBarData:"",AntiForgeryToken:"",MarketingPageUrl:""}}function c(e,t,n,i){var r=this;return function(){return Object(a.t)(r,void 0,void 0,function(){var r;return Object(a.i)(this,function(a){switch(a.label){case 0:return[4,n];case 1:return r=a.sent(),[2,d(e,t,i,p(r.contentType))]}})})}}function d(e,t,n,i){return Object(a.t)(this,void 0,void 0,function(){var r,o;return Object(a.i)(this,function(s){switch(s.label){case 0:return r={addPsi:!0,contextCategory:i,playbackSessionId:t},[4,e()];case 1:return m(o=s.sent(),"dashUrl",r),m(o,"hlsUrl",r),n||m(o,"progressiveUrl",Object(a.e)(Object(a.e)({},r),{addPsi:!1})),[2,o]}})})}function l(e,t,n){var i={addPsi:!0,contextCategory:n?p(n):o.e.Unknown,playbackSessionId:t};return m(e,"dashUrl",i),m(e,"hlsUrl",i),m(e,"progressiveUrl",Object(a.e)(Object(a.e)({},i),{addPsi:!1})),e}function u(e,t){var n,a;return e&&t?{dashUrl:null===(n=e.dashUrl)||void 0===n?void 0:n.map(function(e){return f(e)}),hlsUrl:null===(a=e.hlsUrl)||void 0===a?void 0:a.map(function(e){return f(e)}),progressiveUrl:e.progressiveUrl}:e}function f(e){var t=Object(i.c)(e);return t?(t.searchParams.set("enhanceAudio","true"),t.toString()):e}function p(e){return e&&e!==r.e?"MEETING"===e.toUpperCase()?o.e.TeamsMeetingRecording:o.e.Others:o.e.Unknown}function m(e,t,n){var a=e[t];a&&(e[t]=a.map(function(e){return Object(o.t)(e,n,function(e){return Object(i.c)(e)})}))}},function(e,t,n){"use strict";n.d(t,"e",function(){return c}),n.d(t,"t",function(){return d});var a=n(0),i=n(263),r=n(1112),o=n(1762),s=[{pluginName:"Chaptering"},{pluginName:"OneTranscript"}];function c(e,t,n){var c,d,u,f,p=["FastOneUpFileViewer","OneUpFileViewer"].includes(null!==(d=null===(c=e.hostContext)||void 0===c?void 0:c.app)&&void 0!==d?d:""),m=Object(i.e)(t.getSettingObject("isTranscriptsOpenByDefaultInOnePlayerEnabled","boolean"))&&p,_=Object(i.e)(t.getSettingObject("isTranscriptsOpenByDefaultInOnePlayerEmbedsEnabled","boolean"))&&!p&&"StreamPlaylist"!==(null===(u=e.hostContext)||void 0===u?void 0:u.app),h=e.container&&e.container.clientWidth?e.container.clientWidth>=512:window.innerWidth>=512,b=Object(i.e)(t.getSettingObject("isRemoveChatToNavPanelDefaultOpenOrder","boolean")),g=m||_?{assumePanelWillBeOpen:!1,panelOrder:b?s:Object(a.c)(Object(a.c)([],s,!0),[{pluginName:"Chat"}],!1),sufficientWidthForDefaultPanelToOpen:h}:void 0,v=Object(o.a)(t,null===(f=e.hostContext)||void 0===f?void 0:f.integrationType);if(e.navigationMenuDefaultOpenOverride){var y=e.navigationMenuDefaultOpenOverride;g&&g.panelOrder&&g.panelOrder.unshift({pluginName:y.pluginName,panelName:y.panelName})}var S=Object(i.e)(t.getSettingObject("isFluentMtcContainersUnloadEnabled","boolean")),D=Object(i.e)(t.getSettingObject("isFluentMtcThumbnailFixEnabled","boolean")),I=Object(i.e)(t.getSettingObject("isFluentMtcGradientShadowFixEnabled","boolean")),x=Object(i.e)(t.getSettingObject("isGradientShadowForNextGenEngineFixEnabled","boolean")),C=Object(i.e)(t.getSettingObject("isFluentMtcControlsWrapFixEnabled","boolean")),O=Object(r.e)(v,e.container,!e.navigationContainer,S,D,I,C,x),w=Object(i.e)(t.getSettingObject("isMediaSettingsOrderEnabled","boolean")),E=Object(i.e)(t.getSettingObject("isTranscriptChaptersReverseOrderEnabled","boolean")),A=[];return w||A.push({pluginName:"MediaSettingsLayer"}),A.push({pluginName:"AboutVideo",panelName:"First"}),E?A.push({pluginName:"Chaptering",panelName:"First"},{pluginName:"OneTranscript",panelName:"First"}):A.push({pluginName:"OneTranscript",panelName:"First"},{pluginName:"Chaptering",panelName:"First"}),A.push({pluginName:"Chat",panelName:"First"},{pluginName:"MeetingNotes",panelName:"First"},{pluginName:"Comment",panelName:"First"}),w&&A.push({pluginName:"MediaSettingsLayer"}),A.push({pluginName:"Analytics",panelName:"First"},{pluginName:"NoiseSuppression",panelName:"First"},{pluginName:"DebugPanel",panelName:"First"},{pluginName:"Help",panelName:"First"}),{playbackButtonPermissions:[],ordering:{mediaSettings:["CustomOptions","AboutVideo","OneTranscript","Chaptering","MeetingNotes","Comment","Analytics","NoiseSuppression"],timeline:[],playbackExperienceControls:[],videoActions:[]},panels:{navigationMenu:A,navigationMenuDefaultOpenBehavior:g,disableMediaSettingsPanel:l(n)},videoEngineContainer:v?O.videoEngineContainer:e.container,playbackControlsContainer:O.playbackControlsContainer,playbackExperienceContainer:O.playbackExperienceContainer,seekBarContainer:O.seekBarContainer,playerContainer:e.container,onePlayerOverlayContainer:O.onePlayerOverlayContainer,isFluentMtcEnabled:v,messageBarContainer:O.messageBarContainer,navigationContainer:O.navigationContainer,modalContainer:O.modalContainer,errorBoxContainer:O.errorBoxContainer,videoEngineOverlayContainer:O.videoEngineOverlayContainer,criticalPlaybackContainer:v?O.criticalPlaybackContainer:void 0,audioThumbnailContainer:O.audioThumbnailContainer}}function d(e,t,n){var c,d=Object(i.e)(t.getSettingObject("isMediaSettingsOrderEnabled","boolean")),l=Object(i.e)(t.getSettingObject("isTranscriptChaptersReverseOrderEnabled","boolean")),u=Object(i.e)(t.getSettingObject("isHelpPluginInSWAEnabled","boolean")),f=[];d||f.push({pluginName:"MediaSettingsLayer"}),f.push({pluginName:"AboutVideoInline",panelName:"First"}),l?f.push({pluginName:"Chaptering"},{pluginName:"OneTranscript"}):f.push({pluginName:"OneTranscript"},{pluginName:"Chaptering"}),f.push({pluginName:"Chat",panelName:"First"},{pluginName:"MeetingNotes"},{pluginName:"Comment"}),d&&f.push({pluginName:"MediaSettingsLayer"}),f.push({pluginName:"Analytics"},{pluginName:"Interactivity"},{pluginName:"NoiseSuppression"}),u&&f.push({pluginName:"Help"}),f.push({pluginName:"DebugPanel"});var p={assumePanelWillBeOpen:!0,panelOrder:Object(i.e)(t.getSettingObject("isRemoveChatToNavPanelDefaultOpenOrder","boolean"))?s:Object(a.c)(Object(a.c)([],s,!0),[{pluginName:"Chat"}],!1),sufficientWidthForDefaultPanelToOpen:!0};if(e.navigationMenuDefaultOpenOverride){var m=e.navigationMenuDefaultOpenOverride;p.panelOrder.unshift({pluginName:"AboutVideo"===m.pluginName?"AboutVideoInline":m.pluginName,panelName:m.panelName})}var _=Object(o.a)(t,null===(c=e.hostContext)||void 0===c?void 0:c.integrationType),h=Object(i.e)(t.getSettingObject("isFluentMtcContainersUnloadEnabled","boolean")),b=Object(i.e)(t.getSettingObject("isFluentMtcThumbnailFixEnabled","boolean")),g=Object(i.e)(t.getSettingObject("isFluentMtcGradientShadowFixEnabled","boolean")),v=Object(i.e)(t.getSettingObject("isGradientShadowForNextGenEngineFixEnabled","boolean")),y=Object(i.e)(t.getSettingObject("isFluentMtcControlsWrapFixEnabled","boolean")),S=Object(r.e)(_,e.container,!1,h,b,g,y,v);return{playbackButtonPermissions:[],ordering:{mediaSettings:["CustomOptions","AboutVideoInline","OneTranscript","Chaptering","MeetingNotes","Comment","Analytics","NoiseSuppression"],timeline:[],playbackExperienceControls:[],videoActions:[]},panels:{navigationMenu:f,navigationMenuDefaultOpenBehavior:p,belowVideo:{pluginName:"AboutVideoInline",panelName:"Second"}},navigationButtonStyle:n,videoEngineContainer:_?S.videoEngineContainer:e.container,navigationContainer:e.navigationContainer,belowVideoContainer:e.belowVideoContainer,playbackControlsContainer:S.playbackControlsContainer,playbackExperienceContainer:S.playbackExperienceContainer,seekBarContainer:S.seekBarContainer,playerContainer:e.container,onePlayerOverlayContainer:S.onePlayerOverlayContainer,isFluentMtcEnabled:_,messageBarContainer:e.messageBarContainer||S.messageBarContainer,modalContainer:S.modalContainer,errorBoxContainer:S.errorBoxContainer,videoEngineOverlayContainer:S.videoEngineOverlayContainer,criticalPlaybackContainer:_?S.criticalPlaybackContainer:void 0,audioThumbnailContainer:S.audioThumbnailContainer}}function l(e){return"Yammer"===(null==e?void 0:e.hostApp)&&"moments"===(null==e?void 0:e.hostView)}},function(e,t,n){"use strict";n.d(t,"e",function(){return a});var a={isRemoveHeaderFetchForNonMetaHeuristicProfileEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isRemoveHeaderFetchForNonMetaHeuristicProfileEnabled",featureFlagClassification:"Fix"},60587:{defaultValue:!1,type:"boolean",friendlyName:"isRemoveHeaderFetchForNonMetaHeuristicProfileKillswitchEnabled",featureFlagClassification:"Fix"},isResponsiveCSSToHostEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isResponsiveCSSToHostEnabled",featureFlagClassification:"Fix"},60588:{defaultValue:!1,type:"boolean",friendlyName:"isResponsiveCSSToHostKillswitchEnabled",featureFlagClassification:"Fix"},isVideoPlaybackTypeEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isVideoPlaybackTypeEnabled",featureFlagClassification:"Fix"},isAllowHostDefaultReloadOverrideEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isAllowHostDefaultReloadOverrideEnabled",featureFlagClassification:"MinorFeature"},isAllowStreamWebAppToHideBrandingEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isAllowStreamWebAppToHideBrandingEnabled",featureFlagClassification:"Fix"},isAllowHostDisableFullScreenEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isAllowHostDisableFullScreenEnabled",featureFlagClassification:"MinorFeature"},isDeepCloningSourcesArray:{defaultValue:!0,type:"boolean",friendlyName:"isDeepCloningSourcesArray",featureFlagClassification:"Fix"},isAddingVideoSeekingAriaMessage:{defaultValue:!0,type:"boolean",friendlyName:"isAddingVideoSeekingAriaMessage",featureFlagClassification:"Fix"},isDupSrcSetTimeoutPrevented:{defaultValue:!0,type:"boolean",friendlyName:"isDupSrcSetTimeoutPrevented",featureFlagClassification:"Fix"},isTimeSinceSourceSetEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isTimeSinceSourceSetEnabled",featureFlagClassification:"Fix"},isAllProgressiveTimingLogEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isAllProgressiveTimingLogEnabled",featureFlagClassification:"Fix"},isHandleEarlyPrefetchErrorEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isHandleEarlyPrefetchErrorEnabled",featureFlagClassification:"Fix"},isFluentMTCEnabled:{defaultValue:!1,type:"boolean",friendlyName:"OnePlayerFluentMTCEnabled",featureFlagClassification:"MajorFeature"},isFluentMTCEnabledForOdspIntegration:{defaultValue:!1,type:"boolean",friendlyName:"OnePlayerFluentMTCEnabledForOdspIntegration",featureFlagClassification:"MajorFeature"},isHandleEventDelayedErrorEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isHandleEventDelayedErrorEnabled",featureFlagClassification:"Fix"},isOnePlayerLoggingInAMPEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isOnePlayerLoggingInAMPEnabled",featureFlagClassification:"Fix"},isPauseOnPopOutButtonClickEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isPauseOnPopOutButtonClickEnabled",featureFlagClassification:"MinorFeature"},isRemoveMouseEventFocusStateEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isRemoveMouseEventFocusStateEnabled",featureFlagClassification:"Fix"},isFallbackErrorCodePartialMatchingEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFallbackErrorCodePartialMatchingEnabled",featureFlagClassification:"Fix"},isPrefetchInitSegmentsQualityPassToEngine:{defaultValue:!0,type:"boolean",friendlyName:"isPrefetchInitSegmentsQualityPassToEngine",featureFlagClassification:"MinorFeature"},isClosedCaptionsLanguageLabelEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isClosedCaptionsLanguageLabelEnabled",featureFlagClassification:"Fix"},isSetAmpTimeErrorLoggingEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isSetAmpTimeErrorLoggingEnabled",featureFlagClassification:"Fix"},isEngineRetryDisabled:{defaultValue:!1,type:"boolean",friendlyName:"isEngineRetryDisabled",featureFlagClassification:"Fix"},isPlaybackSpeedA11ScreenReaderEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isPlaybackSpeedA11ScreenReaderEnabled",featureFlagClassification:"Fix"},isMultipleTranscriptsEnabled:{defaultValue:!1,type:"boolean",friendlyName:"MultipleTranscripts",featureFlagClassification:"MajorFeature"},isAddCrossOriginAnonymousEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isAddCrossOriginAnonymousEnabled",featureFlagClassification:"Fix"},enableRebufferingTelemetry:{defaultValue:!1,type:"boolean",friendlyName:"enableRebufferingTelemetry",featureFlagClassification:"MinorFeature"},isClosedCaptions401ErrorFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isClosedCaptions401ErrorFixEnabled",featureFlagClassification:"Fix"},isCaptionOptionsFormWrapEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isCaptionOptionsFormWrapEnabled",featureFlagClassification:"Fix"},isCaptionLargeFontSizeEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isCaptionLargeFontSizeEnabled",featureFlagClassification:"Fix"},isStartTimeInSecondsAmpFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isStartTimeInSecondsAmpFixEnabled",featureFlagClassification:"Fix"},isPskinLoadedForFluentMtcWithPlaybackTelemetryEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isPskinLoadedForFluentMtcWithPlaybackTelemetryEnabled",featureFlagClassification:"Fix"},isAMPCaptionMenuResponsiveEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isAMPCaptionMenuResponsiveEnabled",featureFlagClassification:"Fix"},isPlayerFocusableInTeamsDirectIntegrationEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isPlayerFocusableInTeamsDirectIntegrationEnabled",featureFlagClassification:"Fix"},isNextGenEngineAutoplayFailedResetEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isNextGenEngineAutoplayFailedResetEnabled",featureFlagClassification:"Fix"},isPlaybackFormatFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isPlaybackFormatFixEnabled",featureFlagClassification:"Fix"},isNextGenEnginePageVisibleLogged:{defaultValue:!0,type:"boolean",friendlyName:"isNextGenEnginePageVisibleLogged",featureFlagClassification:"MinorFeature"},isMediaDecodeErrorAddedToFallbackEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isMediaDecodeErrorAddedToFallbackEnabled",featureFlagClassification:"Fix"},isGetRequestAsyncParamsErrorEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isGetRequestAsyncParamsErrorEnabled",featureFlagClassification:"Fix"},isVidElemResetForFallback:{defaultValue:!0,type:"boolean",friendlyName:"isVidElemResetForFallback",featureFlagClassification:"Fix"},isParseUsingRequestUrlEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isParseUsingRequestUrlEnabled",featureFlagClassification:"Fix"},isVidDurAndPercPlayLogEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isVidDurAndPercPlayLogEnabled",featureFlagClassification:"Fix"},isNextGenEngineMetadataContextEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isNextGenEngineMetadataContextEnabled",featureFlagClassification:"MinorFeature"},isDefaultTrackBugFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isDefaultTrackBugFixEnabled",featureFlagClassification:"Fix"},isErrorClearedBeforePlaybackReadyLogEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isErrorClearedBeforePlaybackReadyLogEnabled",featureFlagClassification:"Fix"},isNoSourceSelectedErrorHandlingEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isNoSourceSelectedErrorHandlingEnabled",featureFlagClassification:"Fix"},isTimedPromiseRejectionHandled:{defaultValue:!0,type:"boolean",friendlyName:"isTimedPromiseRejectionHandled",featureFlagClassification:"Fix"},isVidElemUnloadEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isVidElemUnloadEnabled",featureFlagClassification:"Fix"},isFluentMtcNavPanelRtlFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFluentMtcNavPanelRtlFixEnabled",featureFlagClassification:"Fix"},isDashPlaybackReady2LogicEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isDashPlaybackReady2LogicEnabled",featureFlagClassification:"Fix"},isStartupProgressListenerEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isStartupProgressListenerEnabled",featureFlagClassification:"Fix"},isKeepOriginalHeadersFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isKeepOriginalHeadersFixEnabled",featureFlagClassification:"Fix"},isPrefetchManagerResetBugFixed:{defaultValue:!0,type:"boolean",friendlyName:"isPrefetchManagerResetBugFixed",featureFlagClassification:"Fix"},isPrefetchSegmentMatchingBugFixed:{defaultValue:!0,type:"boolean",friendlyName:"isPrefetchSegmentMatchingBugFixed",featureFlagClassification:"Fix"},isResetLatestErrorEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isResetLatestErrorEnabled",featureFlagClassification:"Fix"},isQualitySelectionLogEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isQualitySelectionLogEnabled",featureFlagClassification:"MinorFeature"},is403ErrorFallbackEnabled:{defaultValue:!0,type:"boolean",friendlyName:"is403ErrorFallbackEnabled",featureFlagClassification:"MinorFeature"}}},,function(e,t,n){"use strict";n.d(t,"e",function(){return i});var a=n(19);function i(e,t,n,a,i,I,x,C){if(void 0===n&&(n=!1),void 0===a&&(a=!1),void 0===i&&(i=!1),void 0===I&&(I=!1),void 0===x&&(x=!1),void 0===C&&(C=!1),e){a&&D(t);var O=r(n),w=s(t),E=d(),A=o(),L=l(),k=u(),M=f(n),P=p(),T=y(I,C),U=v(),F=g(),H=b(x),R=h(),N=_(),B=m(),j=S();H.appendChild(R),H.appendChild(N),U.appendChild(F),U.appendChild(H),U.appendChild(B),P.appendChild(T),P.appendChild(E),i&&P.appendChild(j),M.appendChild(U),M.appendChild(P);var V=t.children&&t.children.length>0&&t.getElementsByTagName("video");if(V&&V.length>0){var z=V[0];O.appendChild(z)}A.appendChild(O),A.appendChild(M);var G=c(n,A);return O.appendChild(L),O.appendChild(k),t.appendChild(w),t.appendChild(A),t.classList.contains("oneplayer-root")&&(t.style.position="relative"),t.style.setProperty("--oneplayer-mtc-fluent-spacing","space-between"),{videoEngineContainer:O,playbackExperienceContainer:N,playbackControlsContainer:R,seekBarContainer:F,onePlayerOverlayContainer:P,messageBarContainer:w,criticalPlaybackContainer:A,navigationContainer:G,modalContainer:E,errorBoxContainer:L,videoEngineOverlayContainer:k,audioThumbnailContainer:j}}return{videoEngineContainer:t,playbackControlsContainer:document.createElement("div"),playbackExperienceContainer:document.createElement("div"),seekBarContainer:document.createElement("div"),onePlayerOverlayContainer:document.createElement("div")}}var r=function(e){var t=document.createElement("div");return t.classList.add("video-engine-container"),t.style.width="100%",t.style.height="100%",e&&t.classList.add("react-to-nav"),t},o=function(){var e=document.createElement("div");return e.id=Object(a.e)(),e.classList.add("critical-playback-container"),e.style.width="100%",e.style.height="100%",e.style.position="relative",e},s=function(e){var t=document.createElement("div");return t.classList.add("message-bar"),t.style.top="0",t.style.zIndex="3",e.style.display="flex",e.style.flexDirection="column",t},c=function(e,t){if(e){var n=document.createElement("div");return n.classList.add("navigation-root"),n.style.position="absolute",n.style.top="0",n.style.height="100%",n.style.zIndex="2",n.style.pointerEvents="none",n.addEventListener("mousedown",function(e){return e.stopPropagation()}),n.addEventListener("touchstart",function(e){return e.stopPropagation()}),t.appendChild(n),n}},d=function(){var e=document.createElement("div");return e.classList.add("modal-container"),e},l=function(){var e=document.createElement("div");return e.classList.add("error-box-container"),e.style.position="absolute",e.style.top="0",e.style.right="0",e.style.height="100%",e.style.width="100%",e.style.zIndex="5",e.addEventListener("mousedown",function(e){return e.stopPropagation()}),e.addEventListener("touchstart",function(e){return e.stopPropagation()}),e},u=function(){var e=document.createElement("div");return e.classList.add("video-engine-overlay"),e.style.position="absolute",e.style.top="0",e.style.right="0",e.style.height="100%",e.style.width="100%",e.style.zIndex="1",e.style.pointerEvents="none",e},f=function(e){var t=document.createElement("div");return t.classList.add("fluent-critical-ui-container"),t.style.transition="width 0.2s ease-out 0s",t.style.position="absolute",t.style.width="100%",t.style.height="100%",t.style.top="0",t.style.overflow="hidden",e&&t.classList.add("react-to-nav"),t},p=function(){var e=document.createElement("div");return e.classList.add("onePlayer-overlay"),e.style.position="relative",e.style.width="100%",e.style.height="100%",e},m=function(){var e=document.createElement("div");return e.classList.add("fluent-mtc-gradient-overlay"),e.style.position="absolute",e.style.width="100%",e.style.height="176px",e.style.bottom="0",e.style.right="0",e.style.left="0",e.style.pointerEvents="none",e.style.background="linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.6) 100%)",e},_=function(){var e=document.createElement("div");return e.classList.add("playback-experience-controls-container"),e.style.display="flex",e.style.justifyContent="flex-end",e.style.height="32px",e.style.flex="1",e.style.marginLeft="8px",e.style.minWidth="0",e},h=function(){var e=document.createElement("div");return e.classList.add("playback-controls-container"),e.style.display="flex",e.style.justifyContent="flex-start",e.style.minWidth="64px",e.style.height="32px",e},b=function(e){var t=document.createElement("div");return t.classList.add("mtc-controls"),t.style.display="flex",t.style.alignItems="flex-end",t.style.flexDirection="row",t.style.flexWrap=e?"initial":"wrap",t.style.position="relative ",t.style.zIndex="1",t.style.justifyContent="var(--oneplayer-mtc-fluent-spacing)",t.setAttribute("role","region"),t},g=function(){var e=document.createElement("div");return e.classList.add("seek-bar-container"),e.style.flex="1 0 100%",e.style.zIndex="1",e.style.position="relative",e.setAttribute("role","region"),e},v=function(){var e=document.createElement("div");return e.dir="ltr",e.classList.add("fluent-mtc-container"),e.style.position="absolute",e.style.bottom="0",e.style.right="0",e.style.left="0",e.style.zIndex="4",e.style.visibility="hidden",e.style.padding="0 ".concat(8,"px 8px"),e.style.width="calc(100% - ".concat(16,"px)"),e},y=function(e,t){var n=document.createElement("div");return n.classList.add("overlay-gradient-background"),n.style.width="100%",n.style.height="176px",n.style.pointerEvents="none",n.style.visibility="hidden",n.style.position="absolute",n.style.zIndex=t?"2":e?"1":"0",n.style.background="linear-gradient(360deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.6) 100%)",n},S=function(){var e=document.createElement("div");return e.classList.add("audio-thumbnail-container"),e.style.position="absolute",e.style.top="0",e.style.right="0",e.style.height="100%",e.style.width="100%",e.style.zIndex="1",e.style.pointerEvents="none",e},D=function(e){var t,n;null===(t=e.querySelector(".critical-playback-container"))||void 0===t||t.remove(),null===(n=e.querySelector(".message-bar"))||void 0===n||n.remove()}},function(e,t,n){"use strict";n.d(t,"t",function(){return a}),n.d(t,"e",function(){return i});var a="isTimelineEventsProviderEnabled",i=[401,403,404,409,412,423,429,503,507]},,,,,,,function(e,t,n){"use strict";n.d(t,"t",function(){return i}),n.d(t,"e",function(){return r});var a="msoneplayer:performance:visualizer:data";function i(e){try{var t=e.slice(0,10);localStorage.setItem(a,JSON.stringify(t))}catch(e){}}function r(){var e=[];try{var t=localStorage.getItem(a);if(t){var n=JSON.parse(t);e.push.apply(e,n)}}catch(e){}return e}},function(e,t,n){"use strict";n.d(t,"e",function(){return i});var a=n(0);function i(e,t,n){return void 0===n&&(n=!0),Object(a.t)(this,void 0,void 0,function(){var i,r,o;return Object(a.i)(this,function(a){switch(a.label){case 0:i=n?0:3,a.label=1;case 1:if(!(i<=3))return[3,9];a.label=2;case 2:return a.trys.push([2,4,,8]),[4,e()];case 3:return[2,a.sent()];case 4:return o=a.sent(),++i>3?(r=o,[3,7]):[3,5];case 5:return[4,(s=200*Math.pow(2,i),new Promise(function(e){return setTimeout(e,s)}))];case 6:a.sent(),a.label=7;case 7:return[3,8];case 8:return[3,1];case 9:return[4,t(r&&r.request||"")];case 10:throw a.sent(),r}var s})})}},function(e,t,n){"use strict";n.d(t,"t",function(){return a}),n.d(t,"e",function(){return i});var a={smooth:"application/vnd.ms-sstr+xml",dash:"application/dash+xml",hls:"application/vnd.apple.mpegurl",progressive:"video/mp4"},i={EnhancedAudio:"EnhancedAudio",OriginalAudio:"OriginalAudio"}},function(e,t,n){"use strict";n.d(t,"e",function(){return i});var a=n(0);function i(e,t,n,i){return Object(a.t)(this,void 0,void 0,function(){var o;return Object(a.i)(this,function(a){switch(a.label){case 0:return function(e,t,n,a){var i=n.getContext("2d");(function(e,t,n,a){return e<=0&&t<=0&&(e=a.videoWidth,t=a.videoHeight),e<=0&&(e=Math.round(t*a.videoWidth/a.videoHeight)),t<=0&&(t=Math.round(e*a.videoHeight/a.videoWidth)),(n.width!==e||n.height!==t)&&(n.width=e,n.height=t,!0)})(e,t,n,a)||i.clearRect(0,0,n.width,n.height),i.drawImage(a,0,0,n.width,n.height)}(e,t,n,i),HTMLCanvasElement.prototype.toBlob?[4,new Promise(function(e){n.toBlob(e,"image/jpeg")})]:[2,r(n.toDataURL("image/jpeg"))];case 1:return[2,null!=(o=a.sent())?o:void 0]}})})}function r(e){var t=e.split(",");if(!(t.length<2)){for(var n=atob(t[1]),a=[],i=0;i<n.length;i++)a.push(n.charCodeAt(i));return new Blob([new Uint8Array(a)],{type:"image/jpeg"})}}},function(e,t,n){"use strict";n.d(t,"e",function(){return c});var a=n(0),i=n(3363),r=n(18),o=n(53),s=n(3359),c=function(){function e(){var e=this;this.playbackRates=[.5,1,1.2,1.5,1.8,2],this.playState=new i.e(void 0),this.autoplayFailed=new i.e(void 0),this.isFullscreen=new i.e(void 0),this.loadingState=new i.e("None"),this.currentTimeInSeconds=new i.e(void 0),this.seeking=new r.e,this.isActive=new r.e,this.isPlayerReady=new i.e(!1),this.isPreRoll=new i.e(!0),this.isEnhancedTrackReady=new o.e(!1),this.audioStreamSwitchingFailed=new o.e(!1),this.muted=new i.e(!1),this.volume=new i.e(5),this.loop=new s.e(!1),this.mediaDurationInSecondsV2=new i.e(0),this.playbackRate=new i.e(1),this.downloadBitrate=new i.e(void 0),this.availableBitrateQualities=new i.e([]),this.bufferedTimeRanges=new i.e(void 0),this.textTracks=new s.e([]),this.activeTextTrack=new s.e(void 0),this.hasAudioStream=new o.e(!0),this.hasAudio=new i.e(void 0),this.mediaDimensions=new i.e(void 0),this.latestError=new i.e(void 0),this.itemUrl=new i.e(void 0),this.isBuffering=new i.e(!0),this.availablePlaybackFormats=new i.e([]),this.availablePlaybackTracks=new i.e([]),this.playbackFormat=new i.e(void 0),this.playbackTrack=new i.e("OriginalAudio"),this.earlyUnload=!1,this.earlyMethodCalls=[],this.initialize=function(){return Object(a.t)(e,void 0,void 0,function(){var e;return Object(a.i)(this,function(t){switch(t.label){case 0:return[4,this.waitForAttachPromise];case 1:return t.sent(),[2,null===(e=this.playerEngineAdaptorImpl)||void 0===e?void 0:e.initialize()]}})})},this.waitForAttachPromise=new Promise(function(t){e.waitForAttachPromiseResolver=t}),this.playbackTrack.value="OriginalAudio",this.toggleSeekMouseVisibility=this.toggleSeekMouseVisibility.bind(this)}return e.prototype.attach=function(e){var t=this;this.playerEngineAdaptorImpl=e,this.waitForAttachPromiseResolver(),this.earlyUnload?this.unload():(this.backfillEarlyVoidCalls(),e.isActive.subscribe(function(e){t.isActive.notify(e)}),e.seeking.subscribe(function(e){t.seeking.notify(e)}),this.isPreRoll.attach(e.isPreRoll),this.isPlayerReady.attach(e.isPlayerReady),this.playState.attach(e.playState),this.autoplayFailed.attach(e.autoplayFailed),this.currentTimeInSeconds.attach(e.currentTimeInSeconds),this.availableBitrateQualities.attach(e.availableBitrateQualities),this.downloadBitrate.attach(e.downloadBitrate),this.loadingState.attach(e.loadingState),this.isBuffering.attach(e.isBuffering),this.playbackRate.attach(e.playbackRate),this.mediaDurationInSecondsV2.attach(e.mediaDurationInSecondsV2),this.isFullscreen.attach(e.isFullscreen),this.mediaDimensions.attach(e.mediaDimensions),this.availablePlaybackTracks.attach(e.availablePlaybackTracks),this.playbackTrack.attach(e.playbackTrack,!1),this.availablePlaybackFormats.attach(e.availablePlaybackFormats),this.playbackFormat.attach(e.playbackFormat),e.latestError&&this.latestError.attach(e.latestError),this.volume.attach(e.volume),this.muted.attach(e.muted),this.hasAudio.attach(e.hasAudio),this.bufferedTimeRanges.attach(e.bufferedTimeRanges),this.itemUrl.attach(e.itemUrl))},e.prototype.getVideoElement=function(){var e;return null===(e=this.playerEngineAdaptorImpl)||void 0===e?void 0:e.getVideoElement()},e.prototype.unload=function(){this.playerEngineAdaptorImpl?(this.playerEngineAdaptorImpl.unload(!0),this.playerEngineAdaptorImpl=void 0,this.earlyMethodCalls=[]):this.earlyUnload=!0},e.prototype.renderVideo=function(e,t){var n;return Object(a.t)(this,void 0,void 0,function(){return Object(a.i)(this,function(a){switch(a.label){case 0:return[4,this.waitForAttachPromise];case 1:return a.sent(),[2,null===(n=this.playerEngineAdaptorImpl)||void 0===n?void 0:n.renderVideo(e,t)]}})})},e.prototype.getPosterImage=function(){var e;return null===(e=this.playerEngineAdaptorImpl)||void 0===e?void 0:e.getPosterImage()},e.prototype.initializeClosedCaptions=function(e){var t;return Object(a.t)(this,void 0,void 0,function(){return Object(a.i)(this,function(n){switch(n.label){case 0:return[4,this.waitForAttachPromise];case 1:return n.sent(),[2,null===(t=this.playerEngineAdaptorImpl)||void 0===t?void 0:t.initializeClosedCaptions(e)]}})})},e.prototype.setUserActive=function(){var e=this;this.adaptorImplDependentCall(function(){var t;null===(t=e.playerEngineAdaptorImpl)||void 0===t||t.setUserActive()})},e.prototype.updateMetadataFetchInfo=function(e){var t=this;this.adaptorImplDependentCall(function(){var n;null===(n=t.playerEngineAdaptorImpl)||void 0===n||n.updateMetadataFetchInfo(e)})},e.prototype.updateCaptionsContext=function(e){var t=this;this.adaptorImplDependentCall(function(){var n;null===(n=t.playerEngineAdaptorImpl)||void 0===n||n.updateCaptionsContext(e)})},e.prototype.summarizeResourceTimingsAfterLoad=function(){var e;null===(e=this.playerEngineAdaptorImpl)||void 0===e||e.summarizeResourceTimingsAfterLoad()},e.prototype.toggleSeekMouseVisibility=function(e){var t=this;this.adaptorImplDependentCall(function(){var n;null===(n=t.playerEngineAdaptorImpl)||void 0===n||n.toggleSeekMouseVisibility(e)})},e.prototype.setTheme=function(e){},e.prototype.getPlayIntervals=function(){var e;return(null===(e=this.playerEngineAdaptorImpl)||void 0===e?void 0:e.getPlayIntervals())||[]},e.prototype.getCurrentFrame=function(){var e;return Object(a.t)(this,void 0,void 0,function(){return Object(a.i)(this,function(t){return[2,null===(e=this.playerEngineAdaptorImpl)||void 0===e?void 0:e.getCurrentFrame()]})})},e.prototype.getResizedCurrentFrame=function(e,t){var n;return Object(a.t)(this,void 0,void 0,function(){return Object(a.i)(this,function(a){return[2,null===(n=this.playerEngineAdaptorImpl)||void 0===n?void 0:n.getResizedCurrentFrame(e,t)]})})},e.prototype.getScaledCurrentFrame=function(e,t){var n;return Object(a.t)(this,void 0,void 0,function(){return Object(a.i)(this,function(a){return[2,null===(n=this.playerEngineAdaptorImpl)||void 0===n?void 0:n.getScaledCurrentFrame(e,t)]})})},e.prototype.toggleCCButtons=function(e,t){var n=this;this.adaptorImplDependentCall(function(){var a;null===(a=n.playerEngineAdaptorImpl)||void 0===a||a.toggleCCButtons(e,t)})},e.prototype.initializeTextTracks=function(e){var t=this;this.adaptorImplDependentCall(function(){var n;null===(n=t.playerEngineAdaptorImpl)||void 0===n||n.initializeTextTracks(e)})},e.prototype.disableTextTracks=function(){var e=this;this.adaptorImplDependentCall(function(){var t;null===(t=e.playerEngineAdaptorImpl)||void 0===t||t.disableTextTracks()})},Object.defineProperty(e.prototype,"mediaDurationInSeconds",{get:function(){var e,t;return null!==(t=null===(e=this.playerEngineAdaptorImpl)||void 0===e?void 0:e.mediaDurationInSeconds)&&void 0!==t?t:0},enumerable:!1,configurable:!0}),e.prototype.canSwitchToAdaptiveStreaming=function(){return this.availablePlaybackFormats.value.some(function(e){return"DASH"===e||"HLS"===e})},e.prototype.switchToAdaptiveStreaming=function(){return this.playbackFormat.value="DASH",!0},e.prototype.adaptorImplDependentCall=function(e){this.playerEngineAdaptorImpl?e():this.earlyMethodCalls.push(e)},e.prototype.backfillEarlyVoidCalls=function(){for(var e=0;e<this.earlyMethodCalls.length;e++)this.earlyMethodCalls[e].call(this);this.earlyMethodCalls=[]},e}()}],Array(47),[function(e){e.exports=JSON.parse('"2.3.52"')}],Array(346),[function(e,t,n){"use strict";n.d(t,"e",function(){return s});var a=n(1770),i=function(){function e(){}return e.getLocalUserId=function(t,n,a,i){void 0===a&&(a=!0),void 0===i&&(i="Unknown");var r=e.getUserId(n);return r?function(e,t,n){if(!e)return"c";if(t)return"a";switch(n){case"Consumer":case"ConsumerAnonymous":return"m";case"Business":case"BusinessAnonymous":return"p";default:return"c"}}(!t.EnableMockApiGateway,a,i)+":"+r:r},e.getUserId=function(e){var t=e.UserClaim;return t&&t.UserInfo?t.UserInfo.UniqueId:""},e}(),r=function(){function e(e,t){this.portalConfiguration=e,this.userSessionInfo=t,this.unloadListeners={}}return e.prototype.createLoggerConfiguration=function(e,t,n,a,r,o,s,c,d){return void 0===n&&(n=!0),void 0===s&&(s="Unknown"),this.unloadListeners=o||{},{ingestionKey:c||t.IngestionKey,localUserId:i.getLocalUserId(this.portalConfiguration,this.userSessionInfo,n,s),appName:e,version:a||this.portalConfiguration.BuildNumber,isClassic:n,sessionId:r,overrideEndpointUrl:d||t.OverrideEndpointUrl,privacyScrubbingConfig:this.portalConfiguration.PrivacyScrubbingConfiguration,unloadListeners:this.unloadListeners}},e.prototype.addUnloadListener=function(e,t){return"logAppExited"!==e&&void 0===this.unloadListeners[e]&&(this.unloadListeners[e]=t,!0)},e}(),o=n(419);function s(e,t,n,i,s,d,l,u,f,p,m){var _=e&&e.stream&&e.stream.hostContext?e.stream.hostContext.hostApp:"Microsoft.Stream",h=e&&e.stream?e.stream.standardContext.accountType:"Unknown",b=new r(t,n).createLoggerConfiguration(_,t.StreamWebAriaConfiguration||function(e){return{IngestionKey:"https://*.stream.azure-test.net"===e.AadResourceId?"6f8c6bf216934a758f8e6f8f52ef910c-6f09ec66-cf1d-4645-826e-81898c341372-7581":"208caf6a38a844be84e1d2fc006f4194-da66fd33-4ceb-4c4a-a6e8-ad0bade87897-7914",OverrideEndpointUrl:""}}(t),!i,i,s,l,h,p,m),g="use22"===t.ClusterName||"uswc1"===t.ClusterName||"srol1"===t.ClusterName||"refe1"===t.ClusterName,v=o.e.Never,y=o.n.Never;return!1===g&&(v=void 0!==f?f:o.e.WhenNotInErrorHashAllowlist|o.e.WhenNotMarkedAsSafe,y=o.n.OnlyOffendingFrames),Object(a.t)(b,e,c,y,v,d,u)}var c=function(e){var t=window;if(t.OfficeBrowserFeedback&&t.OfficeBrowserFeedback.floodgate){var n=t.OfficeBrowserFeedback.floodgate.getEngine();if(n){var a=n.getActivityListener();a.logActivity(e),a.logActivity(e+"Embed")}}}},,,,,,,,,,function(e,t,n){"use strict";n.d(t,"e",function(){return o});var a={"af-za":{d:"YYYY-MM-DD",ns:""},"am-et":{d:"DD/MM/YYYY"},"ar-ae":{d:"DD/MM/YYYY",t:"hh:mm tt"},"ar-bh":{d:"DD/MM/YYYY",t:"hh:mm tt"},"ar-dz":{d:"DD-MM-YYYY",t:"H:mm"},"ar-eg":{d:"DD/MM/YYYY",t:"hh:mm tt"},"ar-iq":{d:"DD/MM/YYYY",t:"hh:mm tt"},"ar-jo":{d:"DD/MM/YYYY",t:"hh:mm tt"},"ar-kw":{d:"DD/MM/YYYY",t:"hh:mm tt"},"ar-lb":{d:"DD/MM/YYYY",t:"hh:mm tt"},"ar-ly":{d:"DD/MM/YYYY",t:"hh:mm tt"},"ar-ma":{d:"DD-MM-YYYY",t:"H:mm"},"ar-om":{d:"DD/MM/YYYY",t:"hh:mm tt"},"ar-qa":{d:"DD/MM/YYYY",t:"hh:mm tt"},"ar-sa":{d:"DD/MM/YY",t:"hh:mm tt"},"ar-sy":{d:"DD/MM/YYYY",t:"hh:mm tt"},"ar-tn":{d:"DD-MM-YYYY",t:"H:mm"},"ar-ye":{d:"DD/MM/YYYY",t:"hh:mm tt"},"arn-cl":{d:"DD-MM-YYYY",t:"H:mm",ns:"."},"as-in":{d:"DD-MM-YYYY",t:"tt h:mm",gs:!0},"az-cyrl-az":{d:"DD.MM.YYYY",t:"H:mm",ns:""},"az-latn-az":{d:"DD.MM.YYYY",t:"HH:mm",ns:"."},"ba-ru":{d:"DD.MM.YY",t:"H:mm",ns:""},"be-by":{d:"DD.MM.YY",t:"HH:mm",ns:""},"bg-bg":{d:"D.M.YYYY '.'",t:"H:mm",ns:""},"bin-ng":{d:"D/M/YYYY",t:"h:mmtt"},"bn-bd":{d:"DD-MM-YY",t:"HH.mm",ts:".",gs:!0},"bn-in":{d:"DD-MM-YY",t:"HH.mm",ts:".",gs:!0},"bo-cn":{d:"YYYY/M/D",t:"HH:mm",gs:!0},"br-fr":{d:"YYYY-MM-DD",t:"HH:mm",ns:""},"bs-cyrl-ba":{d:"D.M.YYYY",t:"H:mm",ns:"."},"bs-latn-ba":{d:"DD.MM.YYYY.",t:"HH:mm",ns:"."},"ca-es":{d:"D/M/YYYY",t:"H:mm",ns:"."},"ca-es-valencia":{d:"D/M/YYYY",t:"H:mm",ns:"."},"chr-cher-us":{},"co-fr":{d:"DD/MM/YYYY",t:"HH:mm",ns:""},"cs-cz":{d:"DD.MM.YYYY",t:"H:mm",ns:""},"cy-gb":{d:"DD/MM/YYYY",t:"HH:mm"},"da-dk":{d:"DD-MM-YYYY",t:"HH:mm",ns:"."},"de-at":{d:"DD.MM.YYYY",t:"HH:mm",ns:""},"de-ch":{d:"DD.MM.YYYY",t:"HH:mm",ns:"'"},"de-de":{d:"DD.MM.YYYY",t:"HH:mm",ns:"."},"de-li":{d:"DD.MM.YYYY",t:"HH:mm",ns:"'"},"de-lu":{d:"DD.MM.YYYY",t:"HH:mm",ns:"."},"dsb-de":{d:"D. M. YYYY",t:"HH:mm",ns:"."},"dv-mv":{d:"DD/MM/YY",t:"HH:mm"},"dz-bt":{d:"YYYY-MM-DD",t:" h  mm tt",gs:!0},"el-gr":{d:"D/M/YYYY",ns:"."},"en-029":{d:"DD/MM/YYYY",t:"HH:mm"},"en-au":{d:"D/MM/YYYY"},"en-bz":{d:"DD/MM/YYYY",t:"HH:mm"},"en-ca":{d:"YYYY-MM-DD"},"en-gb":{d:"DD/MM/YYYY",t:"HH:mm"},"en-hk":{d:"D/M/YYYY"},"en-id":{d:"DD/MM/YYYY",t:"H:mm",ns:"."},"en-ie":{d:"DD/MM/YYYY",t:"HH:mm"},"en-in":{d:"DD-MM-YYYY",t:"HH:mm",gs:!0},"en-jm":{d:"D/M/YYYY"},"en-my":{d:"D/M/YYYY"},"en-nz":{d:"D/MM/YYYY"},"en-ph":{d:"DD/MM/YYYY"},"en-sg":{d:"D/M/YYYY"},"en-tt":{d:"DD/MM/YYYY"},"en-us":{d:"M/D/YYYY",t:"h:mm tt",ts:":",gs:!1,ns:","},"en-za":{d:"YYYY/MM/DD",ns:""},"en-zw":{d:"D/M/YYYY"},"es-419":{d:"D/M/YYYY",t:"HH:mm"},"es-ar":{d:"D/M/YYYY",t:"HH:mm",ns:"."},"es-bo":{d:"D/M/YYYY",t:"HH:mm",ns:"."},"es-cl":{d:"DD-MM-YYYY",t:"H:mm",ns:"."},"es-co":{d:"D/MM/YYYY",ns:"."},"es-cr":{d:"D/M/YYYY",t:"HH:mm",ns:""},"es-cu":{d:"D/M/YYYY",t:"HH:mm"},"es-do":{d:"D/M/YYYY"},"es-ec":{d:"D/M/YYYY",t:"H:mm",ns:"."},"es-es":{d:"DD/MM/YYYY",t:"H:mm",ns:"."},"es-gt":{d:"D/MM/YYYY",t:"HH:mm"},"es-hn":{d:"D/M/YYYY",t:"HH:mm"},"es-mx":{d:"DD/MM/YYYY",t:"hh:mm tt"},"es-ni":{d:"D/M/YYYY",t:"HH:mm"},"es-pa":{d:"MM/DD/YYYY"},"es-pe":{d:"D/MM/YYYY",t:"HH:mm"},"es-pr":{d:"MM/DD/YYYY"},"es-py":{d:"D/M/YYYY",t:"HH:mm",ns:"."},"es-sv":{d:"D/M/YYYY",t:"HH:mm"},"es-us":{},"es-uy":{d:"D/M/YYYY",t:"H:mm",ns:"."},"es-ve":{d:"D/M/YYYY",ns:"."},"et-ee":{d:"DD.MM.YYYY",t:"H:mm",ns:""},"eu-es":{d:"YYYY/MM/DD",t:"HH:mm",ns:"."},"fa-ir":{d:"DD/MM/YYYY",t:"hh:mm tt"},"ff-latn-sn":{d:"DD/MM/YYYY",t:"HH:mm",ns:""},"ff-ng":{d:"D/M/YYYY",t:"H:mm"},"fi-fi":{d:"D.M.YYYY",t:"H.mm",ts:".",ns:""},"fil-ph":{},"fo-fo":{d:"DD.MM.YYYY",t:"HH:mm",ns:"."},"fr-029":{d:"DD/MM/YYYY",t:"H:mm",ns:""},"fr-be":{d:"DD-MM-YY",t:"HH:mm",ns:"."},"fr-ca":{d:"YYYY-MM-DD",t:"HH:mm",ns:""},"fr-cd":{d:"DD/MM/YYYY",t:"HH:mm",ns:""},"fr-ch":{d:"DD.MM.YYYY",t:"HH:mm",ns:""},"fr-ci":{d:"DD/MM/YYYY",t:"HH:mm",ns:""},"fr-cm":{d:"DD/MM/YYYY",t:"HH:mm",ns:""},"fr-fr":{d:"DD/MM/YYYY",t:"HH:mm",ns:""},"fr-ht":{d:"DD/MM/YYYY",t:"HH:mm",ns:""},"fr-lu":{d:"DD/MM/YYYY",t:"HH:mm",ns:"."},"fr-ma":{d:"DD/MM/YYYY",t:"HH:mm",ns:"."},"fr-mc":{d:"DD/MM/YYYY",t:"HH:mm",ns:""},"fr-ml":{d:"DD/MM/YYYY",t:"HH:mm",ns:""},"fr-re":{d:"DD/MM/YYYY",t:"HH:mm",ns:""},"fr-sn":{d:"DD/MM/YYYY",t:"HH:mm",ns:""},"fy-nl":{d:"DD-MM-YYYY",t:"HH:mm",ns:"."},"ga-ie":{d:"DD/MM/YYYY",t:"HH:mm"},"gd-gb":{d:"DD/MM/YYYY",t:"HH:mm"},"gl-es":{d:"DD/MM/YYYY",t:"HH:mm",ns:"."},"gn-py":{d:"DD/MM/YYYY",t:"HH:mm",ns:"."},"gsw-fr":{d:"DD/MM/YYYY",t:"HH:mm",ns:""},"gu-in":{d:"DD-MM-YY",t:"HH:mm",gs:!0},"ha-latn-ng":{d:"D/M/YYYY"},"haw-us":{d:"D/M/YYYY"},"he-il":{d:"DD/MM/YYYY",t:"HH:mm"},"hi-in":{d:"DD-MM-YYYY",t:"HH:mm",gs:!0},"hr-ba":{d:"DD.MM.YYYY.",t:"HH:mm",ns:"."},"hr-hr":{d:"D.M.YYYY.",t:"H:mm",ns:"."},"hsb-de":{d:"D.M.YYYY",t:"H:mm 'hod'.",ns:"."},"hu-hu":{d:"YYYY. MM. DD.",t:"H:mm",ns:""},"hy-am":{d:"DD.MM.YYYY",t:"HH:mm"},"ibb-ng":{d:"D/M/YYYY",t:"h:mmtt"},"id-id":{d:"DD/MM/YYYY",t:"HH.mm",ts:".",ns:"."},"ig-ng":{d:"DD/MM/YYYY"},"ii-cn":{d:"YYYY/M/D",t:"tt h:mm"},"is-is":{d:"D.M.YYYY",t:"HH:mm",ns:"."},"it-ch":{d:"DD.MM.YYYY",t:"HH:mm",ns:"'"},"it-it":{d:"DD/MM/YYYY",t:"HH:mm",ns:"."},"iu-cans-ca":{d:"D/M/YYYY"},"iu-latn-ca":{d:"D/MM/YYYY"},"ja-jp":{d:"YYYY/MM/DD",t:"H:mm"},"ka-ge":{d:"DD.MM.YYYY",t:"HH:mm",ns:""},"kk-kz":{d:"DD.MM.YYYY",t:"HH:mm",ns:""},"kl-gl":{d:"DD-MM-YYYY",t:"HH:mm",gs:!0,ns:"."},"km-kh":{d:"DD/MM/YY",t:"H:mm"},"kn-in":{d:"DD-MM-YY",t:"HH:mm",gs:!0},"ko-kr":{d:"YYYY-MM-DD",t:"tt h:mm"},"kok-in":{d:"DD-MM-YYYY",t:"HH:mm",gs:!0},"kr-ng":{d:"D/M/YYYY"},"ks-deva-in":{d:"DD-MM-YYYY",t:"H:mm",gs:!0},"ku-arab-iq":{d:"YYYY/MM/DD",t:"hh:mm tt"},"ky-kg":{d:"D-MMM YY",t:"HH:mm",ns:""},"la-001":{d:"DD/MM/YYYY",t:"H:mm"},"lb-lu":{d:"DD.MM.YY",t:"HH:mm",ns:""},"lo-la":{d:"D/M/YYYY",t:"H:mm",ns:"."},"lt-lt":{d:"YYYY-MM-DD",t:"HH:mm",ns:""},"lv-lv":{d:"DD.MM.YYYY",t:"HH:mm",ns:""},"mi-nz":{d:"DD/MM/YYYY"},"mk-mk":{d:"DD.M.YYYY",t:"HH:mm",ns:"."},"ml-in":{d:"D/M/YYYY"},"mn-mn":{d:"YYYY-MM-DD",t:"HH:mm"},"mn-mong-cn":{d:"YYYY/M/D",t:"H:mm",gs:!0},"mn-mong-mn":{d:"YYYY/M/D",t:"H:mm",gs:!0},"mni-in":{d:"DD/MM/YYYY",t:"HH:mm"},"moh-ca":{},"mr-in":{d:"DD-MM-YYYY",t:"HH:mm",gs:!0},"ms-bn":{d:"D/MM/YYYY",ns:"."},"ms-my":{d:"D/MM/YYYY"},"mt-mt":{d:"DD/MM/YYYY",t:"HH:mm"},"my-mm":{d:"DD-MM-YYYY",t:"HH:mm"},"nb-no":{d:"DD.MM.YYYY",t:"HH.mm",ts:".",ns:""},"ne-in":{d:"YYYY-MM-DD"},"ne-np":{},"nl-be":{d:"D/MM/YYYY",t:"H:mm",ns:""},"nl-nl":{d:"D-M-YYYY",t:"HH:mm",ns:"."},"nn-no":{d:"DD.MM.YYYY",t:"HH:mm",ns:""},"nso-za":{d:"YYYY-MM-DD",t:"HH:mm",ns:""},"oc-fr":{d:"DD/MM/YYYY",t:"HH' h 'mm",ts:".",ns:""},"om-et":{d:"DD/MM/YYYY"},"or-in":{d:"DD-MM-YY",t:"HH:mm",gs:!0},"pa-arab-pk":{d:"DD-MM-YY",t:"h.mm tt",ts:"."},"pa-in":{d:"DD-MM-YY",t:"tt hh:mm",gs:!0},"pap-029":{d:"D-M-YYYY",t:"H:mm"},"pl-pl":{d:"DD.MM.YYYY",t:"HH:mm",ns:""},"prs-af":{d:"YYYY/M/D",ns:"."},"ps-af":{d:"YYYY/M/D",t:"H:mm",ns:"."},"pt-br":{d:"DD/MM/YYYY",t:"HH:mm",ns:"."},"pt-pt":{d:"DD/MM/YYYY",t:"HH:mm",ns:""},"quc-latn-gt":{d:"DD/MM/YYYY"},"quz-bo":{d:"DD/MM/YYYY",t:"hh:mm tt",ns:"."},"quz-ec":{d:"DD/MM/YYYY",t:"H:mm",ns:"."},"quz-pe":{d:"DD/MM/YYYY",t:"hh:mm tt"},"rm-ch":{d:"DD-MM-YYYY",t:"HH:mm",ns:""},"ro-md":{d:"DD.MM.YYYY",t:"HH:mm",ns:"."},"ro-ro":{d:"DD.MM.YYYY",t:"HH:mm",ns:"."},"ru-md":{d:"DD.MM.YYYY",t:"H:mm",ns:""},"ru-ru":{d:"DD.MM.YYYY",t:"H:mm",ns:""},"rw-rw":{d:"YYYY/MM/DD",t:"HH:mm",ns:"."},"sa-in":{d:"DD-MM-YYYY",t:"HH:mm",gs:!0},"sah-ru":{d:"DD.MM.YYYY",t:"H:mm",ns:""},"sd-arab-pk":{d:"DD/MM/YYYY"},"sd-deva-in":{d:"DD/MM/YYYY",t:"H:mm"},"se-fi":{d:"D.M.YYYY",t:"H:mm",ns:""},"se-no":{d:"YYYY-MM-DD",t:"HH:mm",ns:""},"se-se":{d:"YYYY-MM-DD",t:"HH:mm",ns:""},"si-lk":{d:"YYYY-MM-DD",t:"HH.mm",ts:"."},"sk-sk":{d:"D.M.YYYY",t:"H:mm",ns:""},"sl-si":{d:"D. MM. YYYY",t:"HH:mm",ns:"."},"sma-no":{d:"DD.MM.YYYY",t:"HH:mm",ns:""},"sma-se":{d:"YYYY-MM-DD",t:"HH:mm",ns:""},"smj-no":{d:"DD.MM.YYYY",t:"HH:mm",ns:""},"smj-se":{d:"YYYY-MM-DD",t:"HH:mm",ns:""},"smn-fi":{d:"D.M.YYYY",t:"H:mm",ns:""},"sms-fi":{d:"D.M.YYYY",t:"H:mm",ns:""},"so-so":{d:"DD/MM/YYYY"},"sq-al":{d:"D.M.YYYY",ns:""},"sr-cyrl-ba":{d:"D.M.YYYY.",t:"H:mm",ns:"."},"sr-cyrl-me":{d:"D.M.YYYY.",t:"H:mm",ns:"."},"sr-cyrl-rs":{d:"DD.MM.YYYY.",t:"H:mm",ns:"."},"sr-latn-ba":{d:"D.M.YYYY.",t:"HH.mm",ts:".",ns:"."},"sr-latn-me":{d:"D.M.YYYY.",t:"HH.mm",ts:".",ns:"."},"sr-latn-rs":{d:"D.M.YYYY.",t:"HH.mm",ts:".",ns:"."},"st-za":{d:"YYYY-MM-DD",t:"HH:mm",ns:""},"sv-fi":{d:"DD-MM-YYYY",t:"HH:mm",ns:""},"sv-se":{d:"YYYY-MM-DD",t:"HH:mm",ns:""},"sw-ke":{d:"DD/MM/YYYY",t:"HH:mm"},"syr-sy":{d:"DD/MM/YYYY",t:"hh:mm tt"},"ta-in":{d:"DD-MM-YYYY",t:"HH:mm",gs:!0},"ta-lk":{d:"D/M/YYYY",t:"HH:mm",gs:!0},"te-in":{d:"DD-MM-YY",t:"HH:mm",gs:!0},"tg-cyrl-tj":{d:"DD.MM.YYYY",t:"HH:mm",ns:""},"th-th":{d:"D/M/YYYY",t:"H:mm"},"ti-er":{d:"DD/MM/YYYY"},"ti-et":{d:"DD/MM/YYYY"},"tk-tm":{d:"DD.MM.YY '.'",t:"HH:mm",ns:""},"tn-bw":{d:"YYYY-MM-DD",t:"HH:mm",ns:""},"tn-za":{d:"YYYY-MM-DD",t:"HH:mm",ns:""},"tr-tr":{d:"D.MM.YYYY",t:"HH:mm",ns:"."},"ts-za":{d:"YYYY-MM-DD",t:"HH:mm",ns:""},"tt-ru":{d:"DD.MM.YYYY",t:"HH:mm",ns:""},"tzm-arab-ma":{d:"D/M/YYYY",t:"H:mm",ns:""},"tzm-latn-dz":{d:"DD-MM-YYYY",t:"H:mm",ns:""},"tzm-tfng-ma":{d:"DD-MM-YYYY",t:"H:mm",ns:""},"ug-cn":{d:"YYYY-M-D",t:"H:mm"},"uk-ua":{d:"DD.MM.YYYY",t:"H:mm",ns:""},"ur-in":{d:"D/M/YY",gs:!0},"ur-pk":{d:"DD/MM/YYYY"},"uz-cyrl-uz":{d:"DD/MM/YYYY",t:"HH:mm",ns:""},"uz-latn-uz":{d:"DD/MM/YYYY",t:"HH:mm",ns:""},"ve-za":{d:"YYYY-MM-DD",t:"HH:mm",ns:""},"vi-vn":{d:"DD/MM/YYYY",ns:"."},"wo-sn":{d:"DD/MM/YYYY",t:"HH:mm",ns:""},"xh-za":{d:"YYYY-MM-DD",t:"HH:mm",ns:""},"yi-001":{d:"DD/MM/YYYY",t:"HH:mm"},"yo-ng":{d:"DD/MM/YYYY"},"zh-cn":{d:"YYYY/M/D",t:"H:mm"},"zh-hk":{d:"D/M/YYYY",t:"H:mm"},"zh-mo":{d:"D/M/YYYY",t:"H:mm"},"zh-sg":{d:"D/M/YYYY",t:"tt h:mm"},"zh-tw":{d:"YYYY/M/D",t:"tt hh:mm"},"zu-za":{}},i=s(a["en-us"]),r=i;function o(e){if(e){var t=a[e.toLowerCase()];r=t?s(t,i):i}return r}function s(e,t){return{shortDateformats:e.d||t&&t.shortDateformats||"",timeSeperator:e.ts||t&&t.timeSeperator||"",timeFormat:e.t||t&&t.timeFormat||"",numberDigitSeperator:e.ns||t&&t.numberDigitSeperator||"",numberSeperatorPosition:void 0!==e.gs?e.gs:t&&t.numberSeperatorPosition||!1}}}],Array(227),[function(e){e.exports=JSON.parse('"32.9.1"')},function(e,t,n){"use strict";n.d(t,"e",function(){return r});var a=n(0),i=n(763),r=function(e,t,n){return Object(a.t)(void 0,void 0,void 0,function(){var r,o,s;return Object(a.i)(this,function(a){switch(a.label){case 0:return o=Object(i.t)(e),n?[4,o]:[3,2];case 1:case 3:return a.sent(),[2];case 2:return s=Object(i.n)(e),r=t?Object(i.a)():Object(i.a)().then(i.e),[4,Promise.all([r,s,o])]}})})}},function(e,t,n){var a={"./ar.json":[1941,236],"./az-latn-az.json":[1942,237],"./bg.json":[1943,248],"./bs-latn-ba.json":[1944,259],"./ca.json":[1945,270],"./cs.json":[1946,281],"./cy-gb.json":[1947,290],"./da.json":[1948,291],"./de.json":[1949,292],"./el.json":[1950,293],"./en-gb.json":[1951,238],"./en.json":[1952,239],"./es-mx.json":[1953,240],"./es.json":[1954,241],"./et.json":[1955,242],"./eu.json":[1956,243],"./fi.json":[1957,244],"./fil-ph.json":[1958,245],"./fr-ca.json":[1959,246],"./fr.json":[1960,247],"./ga-ie.json":[1961,249],"./gl.json":[1962,250],"./he.json":[1963,251],"./hi.json":[1964,252],"./hr.json":[1965,253],"./hu.json":[1966,254],"./id.json":[1967,255],"./is.json":[1968,256],"./it.json":[1969,257],"./ja.json":[1970,258],"./ka.json":[1971,260],"./kk.json":[1972,261],"./ko.json":[1973,262],"./lt.json":[1974,263],"./lv.json":[1975,264],"./mk.json":[1976,265],"./ms.json":[1977,266],"./nb-no.json":[1978,267],"./nl.json":[1979,268],"./nn-np.json":[1980,269],"./pl.json":[1981,271],"./prs-af.json":[1982,272],"./pt-br.json":[1983,273],"./pt-pt.json":[1984,274],"./ro.json":[1985,275],"./ru.json":[1986,276],"./sk.json":[1987,277],"./sl.json":[1988,278],"./sq.json":[1989,279],"./sr-cyrl-rs.json":[1990,280],"./sr-latn-rs.json":[1991,282],"./sv.json":[1992,283],"./th.json":[1993,284],"./tr.json":[1994,285],"./uk.json":[1995,286],"./vi.json":[1996,287],"./zh-cn.json":[1997,288],"./zh-tw.json":[1998,289]};function i(e){if(!n.o(a,e))return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=a[e],i=t[0];return n.e(t[1]).then(function(){return n.t(i,3)})}i.keys=function(){return Object.keys(a)},i.id=1759,e.exports=i},function(e,t,n){"use strict";n.d(t,"e",function(){return a});var a={ar:void 0,"az-latn-az":void 0,bg:void 0,"bs-latn-ba":void 0,ca:void 0,cs:void 0,"cy-gb":void 0,da:void 0,de:void 0,el:void 0,en:void 0,"en-gb":void 0,es:void 0,"es-mx":void 0,et:void 0,eu:void 0,fi:void 0,"fil-ph":void 0,"fr-ca":void 0,fr:void 0,"ga-ie":void 0,gl:void 0,he:void 0,hi:void 0,hr:void 0,hu:void 0,id:void 0,is:void 0,it:void 0,ja:void 0,ka:void 0,kk:void 0,ko:void 0,lt:void 0,lv:void 0,mk:void 0,ms:void 0,"nb-no":void 0,nl:void 0,"nn-np":void 0,pl:void 0,"pt-br":void 0,"pt-pt":void 0,ro:void 0,ru:void 0,sk:void 0,sl:void 0,sq:void 0,"sr-cyrl-rs":void 0,"sr-latn-rs":void 0,sv:void 0,th:void 0,tr:void 0,uk:void 0,vi:void 0,"zh-cn":void 0,"zh-tw":void 0}},function(e,t,n){var a={"./ar/strings.json":[2e3,297],"./az-latn-az/strings.json":[2001,300],"./bg/strings.json":[2002,303],"./bs-latn-ba/strings.json":[2003,307],"./ca/strings.json":[2004,311],"./cs/strings.json":[2005,314],"./cy-gb/strings.json":[2006,316],"./da/strings.json":[2007,318],"./de/strings.json":[2008,320],"./el/strings.json":[2009,322],"./en-gb/strings.json":[2010,325],"./es-mx/strings.json":[2012,328],"./es/strings.json":[2011,329],"./et/strings.json":[2013,331],"./eu/strings.json":[2014,333],"./fi/strings.json":[2015,336],"./fil-ph/strings.json":[2016,338],"./fr-ca/strings.json":[2018,348],"./fr/strings.json":[2017,349],"./ga-ie/strings.json":[2019,351],"./gl/strings.json":[2020,354],"./he/strings.json":[2021,358],"./hi/strings.json":[2022,360],"./hr/strings.json":[2023,448],"./hu/strings.json":[2024,450],"./id/strings.json":[2025,453],"./is/strings.json":[2026,455],"./it/strings.json":[2027,457],"./ja/strings.json":[2028,459],"./ka/strings.json":[2029,461],"./kk/strings.json":[2030,464],"./ko/strings.json":[2031,468],"./lt/strings.json":[2032,474],"./lv/strings.json":[2033,476],"./mk/strings.json":[2034,481],"./ms/strings.json":[2035,486],"./nb-no/strings.json":[2037,491],"./nb/strings.json":[2036,492],"./nl/strings.json":[2038,496],"./nn-np/strings.json":[2039,498],"./pl/strings.json":[2040,575],"./prs-af/strings.json":[2041,592],"./pt-br/strings.json":[2042,596],"./pt-pt/strings.json":[2043,597],"./ro/strings.json":[2044,604],"./ru/strings.json":[2045,606],"./sk/strings.json":[2046,612],"./sl/strings.json":[2047,614],"./sq/strings.json":[2048,616],"./sr-cyrl-rs/strings.json":[2049,620],"./sr-latn-rs/strings.json":[2050,621],"./sv/strings.json":[2051,625],"./th/strings.json":[2052,631],"./tr/strings.json":[2053,634],"./uk/strings.json":[2054,640],"./vi/strings.json":[2055,722],"./zh-cn/strings.json":[2056,848],"./zh-hans/strings.json":[2057,849],"./zh-hant/strings.json":[2058,850],"./zh-tw/strings.json":[2059,851]};function i(e){if(!n.o(a,e))return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=a[e],i=t[0];return n.e(t[1]).then(function(){return n.t(i,3)})}i.keys=function(){return Object.keys(a)},i.id=1761,e.exports=i},function(e,t,n){"use strict";n.d(t,"n",function(){return p}),n.d(t,"e",function(){return _}),n.d(t,"t",function(){return h}),n.d(t,"a",function(){return g}),n.d(t,"i",function(){return v});var a=n(3613),i=n(3347),r=n(3348),o=n(3350),s=n(791),c=n(55),d=n(419),l=n(263),u=n(478),f=n(3174);function p(e,t,n){var a=m(e,!1,t,n),i=Object(u.t)(a),r=i.isDeveloperToolsPluginEnabled,o=i.isDeveloperToolsHotkeyEnabled;return(r||o)&&(a=m(e,!0,t,n)),{settingsStore:a,isDeveloperToolsPluginEnabled:r,isDeveloperToolsHotkeyEnabled:o}}function m(e,t,n,s){var c=[];if(e){var d=new i.e("OnePlayerQSP",window.location.search);c.push(d)}if(t&&Object(a.n)()){var l=new r.e("MsOnePlayerLocalStorage",function(){var e={};for(var t in localStorage)0===t.indexOf(u.a)&&(e[t]=localStorage[t]);return e}(),function(e,t){var n,a=t["".concat(u.a).concat(e)];return a&&(n=JSON.parse(a)),n},"Override");c.push(l)}s&&c.push.apply(c,s);var p=Object(f.e)(),m=new r.e("OnePlayerFallback",p,function(e,t){return t[e].defaultValue});return c.push(m),new o.e(c,n)}function _(e,t){return function(n){var a=e();a?n(a):t.push(n)}}function h(e){return{OnSettingStoreInitialized:function(t){var n={currentProviderList:t.activeProviders};e(function(e){e.appLogicThin("SettingsStoreInitialized",n)})},OnSettingsStoreInitializationError:function(t){e(function(e){e.fatalThin("SettingsStoreError",b(t))})},OnTryGetSettingError:function(t){e(function(e){e.fatalThin("SettingProviderError",b(t))})},OnProviderError:function(t){e(function(e){e.fatalThin("SettingProviderError",b(t))})},OnSettingTypeConversionError:function(t){e(function(e){e.fatalThin("SettingProviderError",b(t))})},OnSettingTypeConverted:function(t){e(function(e){e.warnThin("SettingsStoreInfo",b(t))})}}}function b(e){return{scenario:e.name,message:e.reason?Object(s.n)(e.reason):e.message?e.message:c.e,stack:d.a.NotApplicable,providerId:e.providerId?e.providerId:c.e,providerType:e.providerType?e.providerType:c.e,currentProviderList:e.activeProviders?e.activeProviders:[]}}function g(e,t){var n=Object(l.e)(e.getSettingObject("isFluentMTCEnabled","boolean")),a=Object(l.e)(e.getSettingObject("isFluentMTCEnabledForOdspIntegration","boolean")),i=["OneUp","OneUpEmbedPage","ODSPOnePlayerHost"].includes(null!=t?t:"");return n||a&&i}function v(e,t,n){return g(e,t)&&void 0!==n}},function(e,t,n){"use strict";n.d(t,"e",function(){return a});var a={JoinLeave:"isJoinLeaveEventsPOIEnabled",AtMention:"isAtMentionPOIEnabled",ScreenShare:"isScreenSharePOIEnabled"}},,,,function(e,t,n){"use strict";var a,i,r,o,s;n.d(t,"n",function(){return a}),n.d(t,"a",function(){return r}),n.d(t,"e",function(){return o}),n.d(t,"t",function(){return s}),function(e){e.CapturePanel="CapturePanel",e.EditPanel="EditPanel",e.EmbedVideo="EmbedVideo",e.FakePlayer="FakePlayer",e.Forms="Forms",e.MediaPlayerContainer="MediaPlayerContainer",e.O365Groups="O365Groups",e.Playlist="Playlist",e.ReportIssue="ReportIssue",e.SingleVideo="SingleVideo",e.Transcript="Transcript",e.WatchNext="WatchNext",e.UploadPanel="UploadPanel",e.VideoMetaOverlay="VideoMetaOverlay",e.VideoAnalytics="VideoAnalytics",e.WaffleBar="WaffleBar",e.ShareDialog="ShareDialog",e.EmbedSurvey="EmbedSurvey"}(a||(a={})),function(e){e.TopBar="TopBar"}(i||(i={})),function(e){e.ThinEmbedVideoPlayer="ThinEmbedVideoPlayer"}(r||(r={})),function(e){e.ScreenRecorder="ScreenRecorder",e.VideoPicker="VideoPicker"}(o||(o={})),function(e){e.Comments="Comments",e.SidebarMenu="SidebarMenu",e.AddToGroupsAndChannels="AddToGroupsAndChannels",e.Yammer="Yammer",e.NavBar="NavBar",e.WaffleBar="WaffleBar",e.VideoDetails="VideoDetails"}(s||(s={}))},function(e,t,n){"use strict";n.d(t,"e",function(){return r});var a=n(3353),i=a.e.object({id:a.e.string,displayName:a.e.string,startOffset:a.e.string,thumbnailId:a.e.optional(a.e.string),isAutoGenerated:a.e.optional(a.e.boolean),modelVersion:a.e.optional(a.e.string),source:a.e.optional(a.e.string)}),r=a.e.object({chapters:a.e.optional(a.e.array(i))})},,function(e,t,n){"use strict";n.d(t,"t",function(){return d}),n.d(t,"e",function(){return l});var a=n(3182),i=n(1771),r=n(1772),o=n(3354),s=n(3176),c=n(419);function d(e,t,n,c,d,l,u,f){var p=new a.e;return function(e,t,n,a,c,d,l,u,f){var p=function(e,t,n){var a,i;return t?(t.unloadListeners||(t.unloadListeners={}),t.unloadListeners.logAppExited=function(){e.logAppExited(!0,n)},i=(a=Object(s.t)(t)).PrivacyScrubber):a=Object(s.e)(),[a,i]}(e,t,f),m=p[0],_=p[1];_&&e.setupPrivacyScrubber(_),e.setupLogger(m,new i.e(m),n,a,c,d,l,u);var h={groupings:{features:[r.e.Telemetry]},loggerConfiguration:t,viewContext:f};h&&h.loggerConfiguration&&(h.loggerConfiguration.localUserId=""),e.appLogicThin("StreamLoggingServiceInitialized",h),o.e.initialize(e)}(p,e,t,n,c,d,l,u,f),p}function l(){return c.e.WhenNotInErrorHashAllowlist|c.e.WhenNotMarkedAsSafe}},function(e,t,n){"use strict";n.d(t,"e",function(){return i});var a=n(308),i=function(){function e(e){this.logger=e}return e.prototype.logEvent=function(e){e=Object(a.i)({name:e.name,data:e.data}),this.logger.trackEvent(e)},e}()},function(e,t,n){"use strict";var a;n.d(t,"e",function(){return a}),function(e){e.Navigation="Navigation",e.Sharing="Sharing",e.Telemetry="Telemetry",e.FeatureFlagsFactory="FeatureFlagsFactory",e.VideoPlayback="VideoPlayback",e.ProducerPlayback="ProducerPlayback",e.LivePlayback="LivePlayback",e.Forms="Forms",e.Search="Search",e.Transcript="Transcript",e.Playlist="Playlist",e.SessionManager="SessionManager",e.InjectedAuth="InjectedAuth",e.Chaptering="Chaptering",e.Channel="Channel",e.Group="Group",e.OCV="OCV",e.Role="Role",e.Tenant="Tenant",e.TextTrack="TextTrack",e.Survey="Survey",e.Video="Video",e.VideoEvent="VideoEvent",e.DataFetcher="DataFetcher",e.Principal="Principal",e.SDN="SDN"}(a||(a={}))},,,,,,,,function(e,t,n){"use strict";n.d(t,"e",function(){return i});var a=n(308),i=function(e,t){this.viewName=e,this.details=t,this.url=Object(a.n)()}},function(e,t,n){"use strict";n.d(t,"e",function(){return i});var a=n(791),i=function(){function e(e){void 0===e&&(e={}),this.trackedQosEvents=e}return e.prototype.add=function(e,t,n){if(this.trackedQosEvents[e]&&!n)throw new Error(Object(a.n)("Cannot add an IQosEvent to LongLivedQosEvents because one with that name is already being "+"tracked: ".concat(e)));this.trackedQosEvents[e]=t},e.prototype.tryCallEnd=function(e){var t,n=this.trackedQosEvents[e];return delete this.trackedQosEvents[e],n&&(t=n.end()),t},e.prototype.tryCallEndExpectedErrorOnAll=function(e,t){var n=Object.values(this.trackedQosEvents).map(function(n){n.endExpectedError(e,t)});return this.trackedQosEvents={},n},e.prototype.tryCallEndUnexpectedErrorOnAll=function(e,t){var n=Object.values(this.trackedQosEvents).map(function(n){n.endUnexpectedError(e,t)});return this.trackedQosEvents={},n},e}()}],Array(108),[function(e,t,n){"use strict";n.d(t,"e",function(){return a});var a={captionsTrackInset:"--oneplayer-caption-track-inset",captionsTrackMtcHiddenInset:"--oneplayer-caption-track-mtc-hidden-inset"}},function(e,t,n){"use strict";n.d(t,"e",function(){return i});var a=n(0),i={name:"OneTranscript",version:n(644).e,phasesToInit:["BeforeUi"],getIsPluginEnabled:function(e){return function(){return!e.areAlternateStreamsSupported||!1!==e.areAlternateStreamsSupported.value}},getPluginInstanceFactory:function(e){return function(t){return Object(a.t)(void 0,void 0,void 0,function(){return Object(a.i)(this,function(a){switch(a.label){case 0:return[4,t("LoadPluginModule",function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(588)]).then(n.bind(null,3168))})];case 1:return[2,a.sent().createPluginInstance(e)]}})})}}}},function(e,t,n){"use strict";n.d(t,"e",function(){return i});var a=n(0),i={name:"AboutVideo",version:n(644).e,phasesToInit:["BeforeUi","AfterUi"],getIsPluginEnabled:function(e){return function(){return e.aboutVisibility&&"all"===e.aboutVisibility.value||"EditTrustedHost"===e.userPermissions.value||"EditUntrustedHost"===e.userPermissions.value}},getPluginInstanceFactory:function(e){return function(t){return Object(a.t)(void 0,void 0,void 0,function(){return Object(a.i)(this,function(a){switch(a.label){case 0:return[4,t("LoadPluginModule",function(){return Promise.all([n.e(0),n.e(1),n.e(8),n.e(577)]).then(n.bind(null,2100))})];case 1:return[2,a.sent().createPluginInstance(e)]}})})}}}},function(e,t,n){"use strict";n.d(t,"e",function(){return i});var a=n(0),i={name:"AboutVideoInline",version:n(644).e,phasesToInit:["BeforeUi"],getPluginInstanceFactory:function(e){return function(t){return Object(a.t)(void 0,void 0,void 0,function(){return Object(a.i)(this,function(a){switch(a.label){case 0:return[4,t("LoadPluginModule",function(){return Promise.all([n.e(0),n.e(1),n.e(8),n.e(713),n.e(590)]).then(n.bind(null,2101))})];case 1:return[2,a.sent().createPluginInstance(e)]}})})}}}},function(e,t,n){"use strict";n.d(t,"e",function(){return i});var a=n(0),i={name:"Analytics",version:n(644).e,phasesToInit:["BeforeUi","AfterUi"],getIsPluginEnabled:function(e){return function(){return e.analyticsVisibility&&"all"===e.analyticsVisibility.value||"EditTrustedHost"===e.userPermissions.value||"EditUntrustedHost"===e.userPermissions.value}},getPluginInstanceFactory:function(e){return function(t){return Object(a.t)(void 0,void 0,void 0,function(){return Object(a.i)(this,function(a){switch(a.label){case 0:return[4,t("LoadPluginModule",function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(578)]).then(n.bind(null,3180))})];case 1:return[2,a.sent().createPluginInstance(e)]}})})}}}}],Array(1279),[function(e,t,n){"use strict";n.d(t,"e",function(){return s});var a=n(3349),i=n(0),r=Object(i.e)({isCommentsEnabled:{defaultValue:!1,type:"boolean",friendlyName:"RichComments",featureFlagClassification:"MajorFeature"}},{isCommentsAtMentionsPayloadEnabled:{defaultValue:!1,type:"boolean",friendlyName:"RichComments-AtMentionsPayloadEnabled",featureFlagClassification:"MinorFeature"},isCommentsAtMentionsNewFormatEnabled:{defaultValue:!1,type:"boolean",friendlyName:"RichComments-AtMentionsFormatEnabled",featureFlagClassification:"MinorFeature"},areProfilePicturesForCommentCardsEnabled:{defaultValue:!0,type:"boolean",friendlyName:"RichComments-ProfilePicturesEnabled",featureFlagClassification:"MinorFeature"},isCommentsLikesEnabled:{defaultValue:!1,type:"boolean",friendlyName:"RichComments-LikesEnabled",featureFlagClassification:"MinorFeature"}}),o=[a.t,{1122:{defaultValue:!1,type:"boolean",friendlyName:"PlaybackSignal",featureFlagClassification:"MinorFeature"},60213:{defaultValue:!1,type:"boolean",friendlyName:"DeveloperToolsPanelEnabledFOR",featureFlagClassification:"MajorFeature"},DeveloperToolsPanelEnabled:{defaultValue:!1,type:"boolean",friendlyName:"DeveloperToolsPanelEnabled",featureFlagClassification:"MajorFeature"},60216:{defaultValue:!1,type:"boolean",friendlyName:"DeveloperToolsHotkeyEnabledFOR",featureFlagClassification:"MinorFeature"},DeveloperToolsHotkeyEnabled:{defaultValue:!1,type:"boolean",friendlyName:"DeveloperToolsHotkeyEnabled",featureFlagClassification:"MinorFeature"},DebugModeEnabled:{defaultValue:!1,type:"boolean",friendlyName:"DebugModeEnabled",featureFlagClassification:"MinorFeature"},60360:{defaultValue:!1,type:"boolean",friendlyName:"UseStreamUriScrubber",featureFlagClassification:"Fix"},isStreamUriScrubberEnabled:{defaultValue:!1,type:"boolean",friendlyName:"UseStreamUriScrubberECS",featureFlagClassification:"Fix"},isMediaAnalyticsSignalEnabled:{defaultValue:!1,type:"boolean",friendlyName:"EnableMediaAnalyticsSignal",featureFlagClassification:"MinorFeature"},isPopOutButtonForEmbedMicroserviceEnabled:{defaultValue:!1,type:"boolean",friendlyName:"enablePopOutButtonForEmbedMicroservice",featureFlagClassification:"MinorFeature"},ingestionKeyOverride:{defaultValue:"",type:"string",friendlyName:"ingestionKeyOverride",featureFlagClassification:"Fix"},isThumbnailBase64Enabled:{defaultValue:!0,type:"boolean",friendlyName:"ThumbnailBase64KillSwitch"},isAccordionUsingFluentUiTheme:{defaultValue:!0,type:"boolean",friendlyName:"AccordionFluentUIThemeHookKillSwitch"},disableFeedbackAllowedHosts:{defaultValue:[],type:"string[]",friendlyName:"DisableFeedbackAllowedHosts",featureFlagClassification:"MinorFeature"},isHostProvidedPrefetchManifestEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isHostProvidedPrefetchManifestEnabled"},maxBufferInSec:{defaultValue:0,type:"number",friendlyName:"MaxVideoBufferInSec",featureFlagClassification:"MinorFeature"},minBitrateForBufferingControl:{defaultValue:0,type:"number",friendlyName:"MinBitrateForBufferingControl",featureFlagClassification:"MinorFeature"},isTranscriptsOpenByDefaultInOnePlayerEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isTranscriptsOpenByDefaultInOnePlayerEnabled",featureFlagClassification:"MinorFeature"},isIsHostTrustedTelemetryEnabled:{defaultValue:!0,type:"boolean",friendlyName:"IsHostTrustedTelemetryEnabled",featureFlagClassification:"Fix"},isVideoDataSourceVROOMTokenDisabled:{defaultValue:!0,type:"boolean",friendlyName:"isVideoDataSourceVROOMTokenDisabled",featureFlagClassification:"Fix"},isPopOutButtonForProfileVideoDisabled:{defaultValue:!0,type:"boolean",friendlyName:"isPopOutButtonForProfileVideoDisabled",featureFlagClassification:"MinorFeature"},60847:{defaultValue:!1,type:"boolean",friendlyName:"OnePlayerFavorAdaptiveForLongTMR",featureFlagClassification:"Fix"},60846:{defaultValue:!1,type:"boolean",friendlyName:"OnePlayerFavorAdaptiveForLongNonTMR",featureFlagClassification:"Fix"},isReportAnIssueFirstTab:{defaultValue:!1,type:"boolean",friendlyName:"isReportAnIssueFirstTab",featureFlagClassification:"MinorFeature"},isTranscriptsOpenByDefaultInOnePlayerEmbedsEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isTranscriptsOpenByDefaultInOnePlayerEmbedsEnabled",featureFlagClassification:"MinorFeature"},isReportIssueErrorBoxEnable:{defaultValue:!1,type:"boolean",friendlyName:"isReportIssueErrorBoxEnable",featureFlagClassification:"MajorFeature"},isStreamDebugInfoEnabled:{defaultValue:!0,type:"boolean",friendlyName:"StreamDebugInfoKillSwitch",featureFlagClassification:"MinorFeature"},60189:{defaultValue:!1,type:"boolean",friendlyName:"OnePlayerUseProgIdForContentCategory",featureFlagClassification:"MinorFeature"},90134:{defaultValue:0,type:"number",friendlyName:"OnePlayerUseProgIdForContentCategoryExp",featureFlagClassification:"MinorFeature"},90135:{defaultValue:0,type:"number",friendlyName:"OnePlayerFavorAdaptiveForLongerTMRVideoExp",featureFlagClassification:"MinorFeature"},90136:{defaultValue:0,type:"number",friendlyName:"OnePlayerFavorAdaptiveForLongerNonTMRVideoExp",featureFlagClassification:"MinorFeature"},isPermMaskForODSPOnePlayerHostEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isPermMaskForODSPOnePlayerHostEnabled",featureFlagClassification:"Fix"},isPermissionsFetchEnabledWheneverUserCanEditNotSupplied:{defaultValue:!0,type:"boolean",friendlyName:"isPermissionsFetchEnabledWheneverUserCanEditNotSupplied",featureFlagClassification:"Fix"},isRemoveChatToNavPanelDefaultOpenOrder:{defaultValue:!0,type:"boolean",friendlyName:"isRemoveChatToNavPanelDefaultOpenOrder",featureFlagClassification:"Fix"},odspEngineHeuristicSettings:{defaultValue:{},type:"object",friendlyName:"odspEngineHeuristicSettings",featureFlagClassification:"MinorFeature"},routeStrategy:{defaultValue:{},type:"object",friendlyName:"routeStrategy",featureFlagClassification:"MinorFeature"},isNewStreamEnabledGovCloud:{defaultValue:!1,type:"boolean",friendlyName:"isNewStreamEnabledGovCloud",featureFlagClassification:"MinorFeature"},isGovCloudFeatureFlowEnable:{defaultValue:!0,type:"boolean",friendlyName:"isGovCloudFeatureFlowEnable",featureFlagClassification:"MinorFeature"},isCobaltFixEnabled:{defaultValue:!1,type:"boolean",friendlyName:"Cobalt Fix ECS",featureFlagClassification:"Fix"},isShowWarningMessageBarToUnauthorizedOrExternalUsersEnable:{defaultValue:!0,type:"boolean",friendlyName:"isShowWarningMessageBarToUnauthorizedOrExternalUsersEnable",featureFlagClassification:"MinorFeature"},isMediaSettingsOrderEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isMediaSettingsOrderEnabled",featureFlagClassification:"MinorFeature"},90149:{defaultValue:0,type:"number",friendlyName:" OnePlayerAlwaysUseFFMPEGExp",featureFlagClassification:"MinorFeature"},1264:{defaultValue:!1,type:"boolean",friendlyName:" OnePlayerAlwaysUseFFMPEG",featureFlagClassification:"Fix"},enablePlaybackActivitiesFormationFix:{defaultValue:!1,type:"boolean",friendlyName:"enablePlaybackActivitiesFormationFix",featureFlagClassification:"MinorFeature"},isForcedMediaAnalyticsEndSignalEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isForcedMediaAnalyticsEndSignalEnabled",featureFlagClassification:"MinorFeature"},1451:{defaultValue:!1,type:"boolean",friendlyName:" IsAccurateOnePlayerLoadSignalEnabled",featureFlagClassification:"Fix"},90156:{defaultValue:0,type:"number",friendlyName:"IsOnePlayerLoadChangeExperimentEnabled",featureFlagClassification:"Fix"},isTranscriptChaptersReverseOrderEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isTranscriptChaptersReverseOrderEnabled",featureFlagClassification:"MinorFeature"},isResponseDataRedactedEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isResponseDataRedactedEnabled",featureFlagClassification:"Fix"},isRegexFieldAddedToConfigurationEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isRegexFieldAddedToConfigurationEnabled",featureFlagClassification:"MinorFeature"},isShakaBasedActivityFormationEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isShakaBasedActivityFormationEnabled",featureFlagClassification:"MajorFeature"},1295:{defaultValue:!1,type:"boolean",friendlyName:"TelemetryOnlyNextGenEngineRollout",featureFlagClassification:"MajorFeature"},90118:{defaultValue:0,type:"number",friendlyName:"TelemetryOnlyNextGenEngineExp",featureFlagClassification:"MajorFeature"},isOneDSEUDBOverrideEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isOneDSEUDBOverrideEnabled",featureFlagClassification:"MinorFeature"},isRedactFilePathsEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isRedactFilePathsEnabled",featureFlagClassification:"MinorFeature"},isMediaAnalyticsEventTraceLoggingEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isMediaAnalyticsEventTraceLoggingEnabled",featureFlagClassification:"MinorFeature"}},{isOneTranscriptEnabled:{defaultValue:!1,type:"boolean",friendlyName:"OneTranscriptECSFeature",featureFlagClassification:"MajorFeature"},isTranscriptManualUploadEnabled:{defaultValue:!1,type:"boolean",friendlyName:"OneTranscriptManualUpload",featureFlagClassification:"MajorFeature"},isTranscriptBlockForAudioEnabled:{defaultValue:!0,type:"boolean",friendlyName:"TranscriptBlockForAudioEnabled",featureFlagClassification:"Fix"},isTranscriptSearchEnabled:{defaultValue:!1,type:"boolean",friendlyName:"OneTranscriptSearch",featureFlagClassification:"MinorFeature"},canTranscriptBeRerequested:{defaultValue:!0,type:"boolean",friendlyName:"TranscriptBeRerequested",featureFlagClassification:"MinorFeature"},shouldFetchPeopleSuggestions:{defaultValue:!1,type:"boolean",friendlyName:"shouldFetchPeopleSuggestions",featureFlagClassification:"MinorFeature"},isKpeSuggestionsEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isKpeSuggestionsEnabled",featureFlagClassification:"MinorFeature"},isDownloadForNonOwnerEnabled:{defaultValue:!1,type:"boolean",friendlyName:"DownloadForNonOwnerEnabled",featureFlagClassification:"MinorFeature"},isSubstrateInstrumentationEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isSubstrateInstrumentationEnabled",featureFlagClassification:"MinorFeature"},isSubstrateInstrumentationForVisibilityEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isSubstrateInstrumentationForVisibilityEnabled",featureFlagClassification:"MinorFeature"},supportedGenerationLanguages:{defaultValue:[],type:"string[]",friendlyName:"SupportedGenerationLanguages",featureFlagClassification:"MajorFeature"},isTranscriptScrollingEnabled:{defaultValue:!1,type:"boolean",friendlyName:"OneTranscriptScrolling",featureFlagClassification:"MinorFeature"},isNonTMRSearchEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isNonTMRSearchEnabled",featureFlagClassification:"MinorFeature"},isTranscriptAvailableWhenNoDefaultExists:{defaultValue:!0,type:"boolean",friendlyName:"TranscriptAvailableWhenNoDefaultExists",featureFlagClassification:"Fix"},isTranscriptPlayOnSeekDuringPrerollEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isTranscriptPlayOnSeekDuringPrerollEnabled"},shouldAddResponseValuesToQosForTranscription:{defaultValue:!0,type:"boolean",friendlyName:"AddResponseValuesToLogsForTranscription",featureFlagClassification:"MinorFeature"},isAutoRefreshTranscriptStatusEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isAutoRefreshTranscriptStatusEnabled",featureFlagClassification:"MinorFeature"},isTargetedFocusZoneEnabled:{defaultValue:!0,type:"boolean",friendlyName:"TargetedFocusZoneEnabled",featureFlagClassification:"Fix"},isEntryVisibilityProviderEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isEntryVisibilityProviderEnabled",featureFlagClassification:"MinorFeature"},isTranscriptEditEnabled:{defaultValue:!1,type:"boolean",friendlyName:"TranscriptEdit",featureFlagClassification:"MajorFeature"},isTranscriptProfilePictureEnabled:{defaultValue:!1,type:"boolean",friendlyName:"TranscriptProfilePicture",featureFlagClassification:"MinorFeature"},isOnDemandTranscriptDownloadEnabled:{defaultValue:!1,type:"boolean",friendlyName:"DownloadTranscriptOnDemand",featureFlagClassification:"Fix"},isAvoidTranscriptContentRedirectEnabled:{defaultValue:!0,type:"boolean",friendlyName:"AvoidTranscriptContentRedirectEnabled",featureFlagClassification:"Fix"},isComponentStackLoggingEnabled:{defaultValue:!0,type:"boolean",friendlyName:"ComponentStackLoggingEnabled",featureFlagClassification:"MinorFeature"},isMeasuredEntryPositionValidationEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isMeasuredEntryPositionValidationEnabled",featureFlagClassification:"Fix"},isTranscriptLocalSearchEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isTranscriptLocalSearchEnabled",featureFlagClassification:"MajorFeature"},isSkipNotifyResultOnMountEnabled:{defaultValue:!0,type:"boolean",friendlyName:"SkipNotifyResultOnMount",featureFlagClassification:"Fix"},isTranscriptAccuracyAnalysisEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isTranscriptAccuracyAnalysisEnabled",featureFlagClassification:"MinorFeature"},isAddVroomIdToSearchRequestEnabled:{defaultValue:!0,type:"boolean",friendlyName:"AddVroomIdInSearchRequest",featureFlagClassification:"Fix"},isFileValidatedOnSelectionEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFileValidatedOnSelectionEnabled",featureFlagClassification:"MinorFeature"},isUseNavigationSearchResultsForScreenReaderAnnouncementsEnabled:{defaultValue:!0,type:"boolean",friendlyName:"useNavigationSearchResultsForScreenReaderAnnouncements",featureFlagClassification:"Fix"},isReadingParagraphOnSpeakerSearchEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isReadingParagraphOnSpeakerSearchEnabled",featureFlagClassification:"Fix"},isPositioningToTranscriptTopEnabled:{defaultValue:!0,type:"boolean",friendlyName:"PositioningToTranscriptTop",featureFlagClassification:"Fix"},isAddTranscriptFeatureTelemetryEnabled:{defaultValue:!0,type:"boolean",friendlyName:"AddTranscriptFeatureTelemetry",featureFlagClassification:"Fix"},isDebugLogStartQosEventsEnabled:{defaultValue:!1,type:"boolean",friendlyName:"DebugLogStartQosEventsEnabled",featureFlagClassification:"Fix"},isRemeasureOnLocaleChangeEnabled:{defaultValue:!0,type:"boolean",friendlyName:"RemeasureOnLocaleChange",featureFlagClassification:"Fix"},isTriggerPositionRemeasureInContextEnabled:{defaultValue:!0,type:"boolean",friendlyName:"TriggerPositionRemeasureInContext",featureFlagClassification:"Fix"},isEditRefValueUsedAsTextEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isEditRefValueUsedAsTextEnabled",featureFlagClassification:"Fix"},isHitSummaryRequiredForSearchQueryEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isHitSummaryRequiredForSearchQueryEnabled",featureFlagClassification:"Fix"},shouldLogResourceTimingOnDemandTranscription:{defaultValue:!0,type:"boolean",friendlyName:"shouldLogResourceTimingOnDemandTranscription",featureFlagClassification:"MinorFeature"},isRenderTextCallbackEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isRenderTextCallbackEnabled",featureFlagClassification:"Fix"},isEntryMeasurementOnEditOptimized:{defaultValue:!0,type:"boolean",friendlyName:"isEntryMeasurementOnEditOptimized",featureFlagClassification:"Fix"}},{isChatPluginEnabled:{defaultValue:!1,type:"boolean",friendlyName:"ChatPlugin",featureFlagClassification:"MajorFeature"},isDeeplinkingEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isDeeplinkingEnabled",featureFlagClassification:"MinorFeature"}},r,{isChapteringPluginEnabled:{defaultValue:!1,type:"boolean",friendlyName:"ChapteringECS",featureFlagClassification:"MajorFeature"},isPptLiveChapteringEnabled:{defaultValue:!1,type:"boolean",friendlyName:"PptLiveChapteringECS",featureFlagClassification:"MajorFeature"},isTranscriptAutoChapteringEnabled:{defaultValue:!1,type:"boolean",friendlyName:"TranscriptAutoChapteringECS",featureFlagClassification:"MajorFeature"},isChapteringSurveyEnabled:{defaultValue:!1,type:"boolean",friendlyName:"ChapteringSurveyECS",featureFlagClassification:"MinorFeature"},isChapteringBeforeMarkersUiEnabled:{defaultValue:!1,type:"boolean",friendlyName:"ChapteringBeforeMarkersUi",featureFlagClassification:"MinorFeature"},isChapteringInputWhitespacesEnabled:{defaultValue:!0,type:"boolean",friendlyName:"ChapteringInputWhitespaces",featureFlagClassification:"Fix"},isGetChapteringWarningMessageEnabled:{defaultValue:!0,type:"boolean",friendlyName:"GetChapteringWarningMessage",featureFlagClassification:"Fix"},isSingleChapterShareEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isSingleChapterShareEnabled",featureFlagClassification:"MinorFeature"},isFeedbackTelemetryEnabled:{defaultValue:!1,type:"boolean",friendlyName:"FeedbackTelemetryECS",featureFlagClassification:"MinorFeature"}},{isNoiseSuppressionPluginEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isNoiseSuppressionPluginEnabledECS",featureFlagClassification:"MajorFeature"},isNoiseSuppressionBufferingMessageEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isNoiseSuppressionBufferingMessageEnabled",featureFlagClassification:"MinorFeature"}},{isAboutVideoPluginEnabled:{defaultValue:!1,type:"boolean",friendlyName:"AboutVideoPlugin",featureFlagClassification:"MajorFeature"},isAboutVideoExpirationDateEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isAboutVideoExpirationDateEnabled",featureFlagClassification:"MinorFeature"},isAboutVideoDescriptionAriaLabelledByEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isAboutVideoDescriptionAriaLabelledByEnabled",featureFlagClassification:"Fix"},isAboutTitleSaveByEnterEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isAboutTitleSaveByEnterEnabled",featureFlagClassification:"Fix"},isAboutMessageForExpirationLabelEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isAboutMessageForExpirationLabelEnabled",featureFlagClassification:"Fix"},isAboutVideoResizeObserverEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isAboutVideoResizeObserverEnabled",featureFlagClassification:"Fix"},isAboutVideoDescriptionValidationEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isAboutVideoDescriptionValidationEnabled"},isAboutVideoNewAreaPathLayoutEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isAboutVideoNewAreaPathLayoutEnabled",featureFlagClassification:"Fix"},isAboutVideoResizableTitleWidthEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isAboutVideoResizableTitleWidthEnabled",featureFlagClassification:"MinorFeature"},isAboutVideoCheckObservableEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isAboutVideoCheckObservableEnabled",featureFlagClassification:"Fix"},isAboutVideoMediaMatchListenerEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isAboutVideoMediaMatchListenerEnabled",featureFlagClassification:"Fix"},isAboutVideoServiceRemoveVersionDraftEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isAboutVideoServiceRemoveVersionDraftEnabled",featureFlagClassification:"Fix"},isAboutVideoDescriptionRemoveHoverEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isAboutVideoDescriptionRemoveHoverEnabled",featureFlagClassification:"Fix"},isAboutVideoRemoveQueryParamsFromBaseURLEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isAboutVideoRemoveQueryParamsFromBaseURLEnabled",featureFlagClassification:"Fix"},isAboutVideoTitleStylingFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isAboutVideoTitleStylingFixEnabled",featureFlagClassification:"Fix"},isAboutVideoRemovingDescriptionViewTabFocusEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isAboutVideoRemovingDescriptionViewTabFocusEnabled",featureFlagClassification:"Fix"},isAboutVideoEditCheckmarkEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isAboutVideoEditCheckmarkEnabled",featureFlagClassification:"Fix"},isAboutVideoMoreOptionsLabelEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isAboutVideoMoreOptionsLabelEnabled"},isAboutVideoEndTMRDateQoSWithFailureEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isAboutVideoEndTMRDateQoSWithFailureEnabled",featureFlagClassification:"Fix"},isAboutVideoServiceURLEncodingFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isAboutVideoServiceURLEncodingFixEnabled",featureFlagClassification:"Fix"}},{isShareEnabled:{defaultValue:!1,type:"boolean",friendlyName:"ShareForOnePlayer",featureFlagClassification:"MajorFeature"},isGetSpoTokenForSharePluginEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isGetSpoTokenForSharePluginEnabled",featureFlagClassification:"MinorFeature"}},{isHelpingReportIssueEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isHelpingReportIssueEnabled",featureFlagClassification:"MajorFeature"},isReportIssueUnitMessageEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isReportIssueUnitMessageEnabled",featureFlagClassification:"MajorFeature"},isHelpPluginOCPSParallelEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isHelpPluginOCPSParallelEnabled",featureFlagClassification:"MajorFeature"},isThirdPartyNoticeEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isThirdPartyNoticeEnabled",featureFlagClassification:"MajorFeature"}},{isCustomOptionsPluginEnabled:{defaultValue:!1,type:"boolean",friendlyName:"CustomOptionsPlugin",featureFlagClassification:"MajorFeature"}},{isMeetingCatchupEnabled:{defaultValue:!1,type:"boolean",friendlyName:"MeetingCatchupECS",featureFlagClassification:"MajorFeature"},isMeetingCatchupInBeforeMarkersUiEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isMeetingCatchupInBeforeMarkersUiEnabled",featureFlagClassification:"MinorFeature"},isJoinLeaveEventsPOIEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isJoinLeaveEventsPOIEnabled",featureFlagClassification:"MajorFeature"},isAtMentionPOIEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isAtMentionPointOfInterestEnabled",featureFlagClassification:"MajorFeature"},isScreenSharePOIEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isScreenSharePointOfInterestEnabled",featureFlagClassification:"MajorFeature"},isSurveyPOIEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isSurveyPointOfInterestEnabled",featureFlagClassification:"MinorFeature"}},{isMeetingNotesPluginEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isMeetingNotesPluginEnabled",featureFlagClassification:"MajorFeature"},isMeetingNotesMIPEnabled:{defaultValue:!0,type:"boolean",friendlyName:"MeetingNotesMIPEnabled",featureFlagClassification:"MinorFeature"}},{isAnalyticsPluginEnabled:{defaultValue:!1,type:"boolean",friendlyName:"AnalyticsPlugin",featureFlagClassification:"MajorFeature"},isAllTimeStatsEnabled:{defaultValue:!0,type:"boolean",friendlyName:"AllTimeStats",featureFlagClassification:"MinorFeature"},isAnalyticsOverlayEnabled:{defaultValue:!0,type:"boolean",friendlyName:"AnalyticsOverlay",featureFlagClassification:"MinorFeature"},isViewershipChartsEnabled:{defaultValue:!0,type:"boolean",friendlyName:"ViewrshipCharts",featureFlagClassification:"MinorFeature"}},{isInteractivityPluginEnabled:{defaultValue:!1,type:"boolean",friendlyName:"InteractivityPlugin",featureFlagClassification:"MajorFeature"}},{isBareBonesPluginEnabled:{defaultValue:!1,type:"boolean",friendlyName:"BareBonesPlugin",featureFlagClassification:"MinorFeature"}},{OneDSEndpointOverride:{defaultValue:"",type:"string",friendlyName:"OneDSEndpointOverride"}}];function s(){for(var e={},t=0,n=o;t<n.length;t++){var a=n[t];for(var i in a)if(Object.prototype.hasOwnProperty.call(a,i)){var r=a[i];e[i]=r}}return e}},,function(e,t,n){"use strict";n.d(t,"t",function(){return E}),n.d(t,"e",function(){return A});var a=function(){function e(){}return e.prototype.trackEvent=function(e){window.console.log(e)},e.prototype.userSignedIn=function(e){},e.prototype.userSignedOut=function(){},e.prototype.unload=function(){},e}(),i=n(3549),r=n(1774),o=n(801),s=n(3615),c=n(264),d=function(){function e(){}return e.format=function(t){t.PassThroughTokens=e.stringArrayToLowerCase(t.PassThroughTokens),t.ScrubQueryParametersHostNames=e.stringArrayToLowerCase(t.ScrubQueryParametersHostNames),t.ScrubToPartialHostNames=e.stringArrayToLowerCase(t.ScrubToPartialHostNames),t.UriQueryParameters.PassThroughQueryParameters=e.stringArrayToLowerCase(t.UriQueryParameters.PassThroughQueryParameters);var n={};Object.keys(t.UriQueryParameters.ScrubQueryParameters).forEach(function(a){var i=t.UriQueryParameters.ScrubQueryParameters[a];i&&(i.type===c.t.string||i.type===c.t.stringOrAnyGuid)&&i.acceptedValues&&(i.acceptedValues=e.stringArrayToLowerCase(i.acceptedValues)),n[a.toLowerCase()]=i}),t.UriQueryParameters.ScrubQueryParameters=n},e.stringArrayToLowerCase=function(e){return e.map(function(e){return e.toLowerCase()})},e}(),l=function(){function e(){}return e.validate=function(e){var t=this,n="";if(e){if(e.PassThroughTokens||(n+="PassThroughTokens is undefined, define it explicitly as empty if you want to scrubb all tokens.\n"),e.ScrubQueryParametersHostNames||(n+="ScrubQueryParametersHostNames is undefined, define it explicitely as empty if            you do not want any host name's params to be scrubbed. \n"),e.ScrubToPartialHostNames||(n+="ScrubQueryParametersHostNames is undefined, define it explicitely as empty if            you do not want any partial host name's to be kept. \n"),e.UriQueryParameters)if(e.UriQueryParameters.PassThroughQueryParameters)if(e.UriQueryParameters.ScrubQueryParameters)for(var a in e.UriQueryParameters.ScrubQueryParameters){var i=e.UriQueryParameters.ScrubQueryParameters[a];i&&i.type===c.t.number&&i.acceptedValues&&(n+="param ".concat(a," in ScrubQueryParameters is of type number and has accepted values.                'number' type does not support accepted values"))}else n+="UriQueryParameters.ScrubQueryParameters is undefined, define it explicitely as empty if         you do not want any recognized uri query params names to be kept. \n";else n+="UriQueryParameters.PassThroughQueryParameters is undefined, define it explicitely as empty if         you do not want any UriQueryParameters value to be always kept. \n";else n+="UriQueryParameters is undefined, define it explicitely as empty if         you do not want any UriQueryParameters to be kept. \n";e.DropEventNames||(n+="DropEventNames is undefined, define it explicitely as empty if you do not want any event to be dropped. \n"),e.GlobalFieldsDictionary?n=this.validateFieldScrubbingDictionary(e.GlobalFieldsDictionary,"GlobalFieldsDictionary",n):n+="GlobalFieldsDictionary is undefined, define it explicitely as empty if you do not want any field to be scrubbed. \n",e.EventFieldsDictionary?Object.keys(e.EventFieldsDictionary).forEach(function(a){var i=e.EventFieldsDictionary[a];n=t.validateFieldScrubbingDictionary(i,"EventFieldsDictionary.".concat(a),n)}):n+="EventFieldsDictionary is undefined, define it explicitely as empty if         you do not want any field to be scrubbed. \n"}else n="PrivacyScrubbingConfig object is undefined and cannot be validated";if(""!==n)throw new Error(n)},e.validateFieldScrubbingDictionary=function(t,n,a){return Object.keys(t).forEach(function(i){var r=t[i];Object(c.i)(r)?r.forEach(function(t){a+=e.validateNestedField(t,n,a)}):Object(c.a)(r)||Object(c.r)(r)||(a+="Entry in FieldScrubbingDictionary was neither a Strategy or complete NestedField under ".concat(n,". \n"))}),a},e.validateNestedField=function(t,n,a){return a=e.validateFullPath(t.FullPath,n,a),e.validateEventFieldScrubbingStrategy(t.Strategy,n,a)},e.validateEventFieldScrubbingStrategy=function(e,t,n){return n+(Object(c.a)(e)?"":"Invalid scrubbing strategy: ".concat(e," was added as part of dictionary ").concat(t,". \n"))},e.validateFullPath=function(t,n,a){t||(a+="Empty or undefined FullPath provided as part of dictionary ".concat(n," \n"));var i=t.match(e.fullPathValidationRegex);return!i||i.length<=0?a+="No match found for the FullPath provided as part of dictionary ".concat(n," \n"):i[0].length!==t.length&&(a+="Incomplete match found for the FullPath provided as part of dictionary ".concat(n,".\n      Verify that your FullPath entry is valid using the following regex: ").concat(e.fullPathValidationRegex.toString()," \n")),a},e.fullPathValidationRegex=new RegExp(/[a-z][a-zA-Z]*(\.[a-z][a-zA-Z]*)*/),e}(),u=n(344),f=/^(([0-9a-fA-F]){8}-([0-9a-fA-F]){4}-([0-9a-fA-F]){4}-([0-9a-fA-F]){4}-([0-9a-fA-F]){12})$/;function p(e){return f.test(e)}var m=n(791),_=/((?:[a-f0-9]{4,}-){2,}[a-f0-9]{3,})\/[^\s@]*@((?:[a-f0-9]{4,}-){2,}[a-f0-9]{3,})/gi,h=/((?:[a-f0-9]{4,}-){2,}[a-f0-9]{3,})/gi,b=/[A-Za-z0-9-_]{32,}(\.[A-Za-z0-9-_]{32,}){1,2}/gi,g=/file:\/\//i,v=function(){function e(e,t){this.config=e,this.tokenScrubber=t}return e.prototype.scrub=function(e){return!(!e||!e.data||(this.scrubGlobalFields(e),this.scrubEventFields(e),0))},e.prototype.scrubWithStrategy=function(e,t){var n,a,i=this;try{switch(t){case c.e.drop:return;case c.e.scrubOrAnyGuid:return e&&!p(e)?this.tokenScrubber.scrub(e):e;case c.e.scrub:return e?this.tokenScrubber.scrub(e):e;case c.e.scrubUrls:var r=Object(m.e)(e||"");if((null===(n=this.config.Killswitches)||void 0===n?void 0:n.redactResponseData)&&-1!==r.toLowerCase().indexOf("responsedata"))return"[RedactedResponseData]";if((null===(a=this.config.Killswitches)||void 0===a?void 0:a.redactFilePaths)&&(r.match(g)||[]).length>0)return"[RedactedFilePath]";var o=(r.match(_)||[]).reduce(function(e,t){return e.concat(t.match(h)||[])},[]).reduce(function(e,t,n){return e.split(t).join("[GUID".concat(n+1,"]"))},r),s=Object(u.c)(c.n),d=function(e){return i.tokenScrubber.scrub(e)||u.a};return void 0===o?o:[{regex:u.d,scrub:d},{regex:s,scrub:d},{regex:b,scrub:function(){return u.n}}].reduce(function(e,t){var n=t.regex,a=t.scrub;return e&&n.test(e)?e.replace(n,a):e},o);default:return e}}catch(e){return null}},e.prototype.inDropEventList=function(e){return void 0!==e&&this.config.DropEventNames.indexOf(e.name)>-1},e.prototype.scrubEventFields=function(e){e.name in this.config.EventFieldsDictionary&&this.scrubFields(e,this.config.EventFieldsDictionary[e.name])},e.prototype.scrubGlobalFields=function(e){this.scrubFields(e,this.config.GlobalFieldsDictionary)},e.prototype.scrubFields=function(e,t){var n=this;if(t&&Object.keys(t).length>0){var a=void 0;for(var i in c.o in t&&Object(c.r)(t[c.o])&&(a=t[c.o]),e.data)if(i in t){var r=t[i];if(Object(c.i)(r))r.forEach(function(t){var a=n.getParentObjectByPath(e.data,t.FullPath);a&&n.applyStrategy(a,t.Strategy)});else if(Object(c.a)(r)){var o=r;this.applyStrategy({parent:e.data,fieldName:i},o)}}else a&&i.match(a.RegEx)&&this.applyStrategy({parent:e.data,fieldName:i},a.Strategy)}},e.prototype.applyStrategy=function(e,t){var n=e.parent,a=e.fieldName;try{if(t===c.e.drop)delete n[a];else{var i=n[a];i&&(n[a]=this.scrubWithStrategy(i,t))}}catch(e){n&&a&&(n[a]=null)}},e.prototype.getParentObjectByPath=function(e,t){if(e&&t){var n=e,a=t.split("."),i=a.pop();if(i){for(var r=0,o=a;r<o.length;r++)if(!(n=n[o[r]]))return;if(n[i])return{parent:n,fieldName:i}}}},e}(),y=n(646),S=function(){function e(e,t){this.fallbackScruber=t,this.config=e}return e.prototype.scrub=function(e){if(!this.config.UrlTypesForScrubbing)return u.a;var t=new y(e," ");if(!t||!t.hostname)return u.a;for(var n=0;n<this.config.UrlTypesForScrubbing.length;n++){var a=this.config.UrlTypesForScrubbing[n];if(t.pathname.match(a.urlPathRegex)){if(this.fallbackScruber&&a.fallbackScrubber)return this.fallbackScruber.scrub(e);if(a.replaceByUrlType)return"[".concat(a.replaceByUrlType,"]")}}return u.r},e}(),D=function(){function e(e,t){this.config=e,this.uriScrubber=t}return e.prototype.scrub=function(e){var t=this;return e?e instanceof Array?e.map(function(e){return t.scrubTokenInternal(e)}):this.scrubTokenInternal(e):""},e.prototype.scrubTokenInternal=function(e){return void 0===e||-1!==this.config.PassThroughTokens.indexOf(e.toLowerCase())?e:this.uriScrubber.scrub(e)},e}(),I=["admin","adminsettings","browse","channel","channels","create","embed","error","fallback","followingchannels","group","groups","meetings","recyclebin","studio","update","upload","user","usersettings","video","videos","videoupdate","watchlist","welcome",u.t],x=n(646),C=function(){function e(e){this.validHostNameRegex=new RegExp(/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$/gm),this.validGuidRegex=/(([0-9a-fA-F]){8}-([0-9a-fA-F]){4}-([0-9a-fA-F]){4}-([0-9a-fA-F]){4}-([0-9a-fA-F]){12})/g,this.config=e}return e.prototype.scrub=function(t){var n=this,a=new x(t," ",function(e){return n.parseAndCleanQueryString(e)});if(a&&(a.hostname||a.pathname)){var i=a.protocol?a.hostname:this.truncatePathToHostname(a.pathname);if(""===a.hostname&&a.pathname&&(a.hostname=i,a.pathname=this.truncatePathname(a.pathname,i),a.host=i),!i.match(this.validHostNameRegex))return u.o;if(this.isScrubQueryParametersHostName(i)){var r=this.scrubPathname(a.pathname,a.hostname);r&&r!==a.pathname&&a.set("pathname",r);var o=(a.protocol?"":e.defaultProtocol+"//")+a.toString();return this.removeTrailingForwardSlash(o)}return this.removeTrailingForwardSlash(this.tryKeepPartialHostName(i,a.protocol))}return u.o},e.prototype.removeTrailingForwardSlash=function(e){return e.length>1&&"/"===e[e.length-1]?e.slice(0,-1):e},e.prototype.truncatePathToHostname=function(e){var t=e.indexOf("/");return-1===t?e:e.substr(0,t)},e.prototype.truncatePathname=function(e,t){var n=e.indexOf(t);return-1===n?e:e.substr(n+t.length)},e.prototype.parseAndCleanQueryString=function(e){var t=[];if(e){"?"===e[0]&&(e=e.slice(1,e.length));for(var n=0,a=e.split("&");n<a.length;n++){var i=a[n].split("="),r=void 0,o=void 0;if(2===i.length?(r=i[0],o=i[1]):(r=i[0],o=void 0),-1===this.config.UriQueryParameters.PassThroughQueryParameters.indexOf(r.toLowerCase())){if(!(r.toLowerCase()in this.config.UriQueryParameters.ScrubQueryParameters))continue;o&&this.isRecognizedParamAcceptedValue(r,o)||(o=u.a)}o?t.push("".concat(r,"=").concat(o)):t.push("".concat(r,"="))}}return t.length>0?"?"+t.join("&"):""},e.prototype.isRecognizedParamAcceptedValue=function(e,t){var n=!1,a=this.config.UriQueryParameters.ScrubQueryParameters[e.toLowerCase()];return a&&(a.type===c.t.number?n=!0:a.type===c.t.stringOrAnyGuid?p(t)?n=!0:a.acceptedValues&&(n=-1!==a.acceptedValues.indexOf(t.toLowerCase())):a.type===c.t.string&&a.acceptedValues&&(n=-1!==a.acceptedValues.indexOf(t.toLowerCase()))),n},e.prototype.isScrubQueryParametersHostName=function(e){if(e){e=e.toLowerCase();for(var t=0,n=this.config.ScrubQueryParametersHostNames;t<n.length;t++){var a=n[t];if(-1!==e.indexOf(a,e.length-a.length))return!0}}return!1},e.prototype.scrubPathname=function(e,t){return e&&t&&(e=e.replace(this.validGuidRegex,u.t),t.match(/api.microsoftstream.com$/)||e.split("/").forEach(function(t){t&&I.indexOf(t)<0&&(e=e.replace(t,u.e))})),e},e.prototype.tryKeepPartialHostName=function(t,n){var a=""!==n?n:e.defaultProtocol;if(t){t=t.toLowerCase();for(var i=0,r=this.config.ScrubToPartialHostNames;i<r.length;i++){var o=r[i];if(-1!==t.indexOf(o,t.length-o.length))return"".concat(a,"//").concat(o)}}return"".concat(a,"//").concat(u.a)},e.defaultProtocol="https:",e}(),O=function(){function e(e){try{l.validate(e)}catch(e){this.initializationError=e.message,this.eventScrubber=void 0}if(!this.initializationError){d.format(e),this.uriScrubber="Stream"===e.UriScrubberType?new S(e,new C(e)):new C(e);var t=new D(e,this.uriScrubber);this.eventScrubber=new v(e,t)}}return Object.defineProperty(e.prototype,"InitializationError",{get:function(){return this.initializationError},enumerable:!1,configurable:!0}),e.prototype.scrubUri=function(e){return this.uriScrubber?this.uriScrubber.scrub(e):void 0},e.prototype.scrubEvent=function(e){return!!this.eventScrubber&&(!(!e||e.data)||this.eventScrubber.scrub(e))},e.prototype.inDropEventList=function(e){return!this.eventScrubber||this.eventScrubber.inDropEventList(e)},e.prototype.scrubAsMessage=function(e){return this.eventScrubber?this.eventScrubber.scrubWithStrategy(e,c.e.scrubUrls)||"":e},e}(),w=function(){function e(t){var n;this.logger=new i.e,this.unauthenticatedLocalUserId="a:unauthenticatedUser",this.erroringEventNamesLogged=[],t&&t.privacyScrubbingConfig&&(n=t.privacyScrubbingConfig),this.privacyScrubber=new O(n),this.cvPlugin=new s.e,t.localUserId||(t.localUserId=this.unauthenticatedLocalUserId);var a={channelConfiguration:{disableTelemetry:!t.ingestionKey},disableCookiesUsage:!0,extensions:[this.cvPlugin],extensionConfig:[],instrumentationKey:t.ingestionKey};if(t.overrideEndpointUrl&&(a.endpointUrl=t.overrideEndpointUrl),this.logger.initialize(a,[]),this.eventNamespace=Object(r.o)(Object(o.t)(e.identifier),this.logger.evtNamespace()),t.unloadListeners)for(var c=0,d=Object.entries(t.unloadListeners);c<d.length;c++){var l=d[c],u=l[0],f=l[1];Object(r.a)(f,[],this.eventNamespace)||this.logger.track({name:"UnloadListenerHookingError",data:{message:"Failed to hook unload listener",key:u}})}var p=t.isClassic?"UserAgent":"userAgent",m=this.logger.getPropertyManager();m.getPropertiesContext().user.localId=t.localUserId,m.getPropertiesContext().app.name=t.appName,m.getPropertiesContext().app.ver=t.version,m.getPropertiesContext().session.id=t.sessionId,m.setProperty(p,window.navigator.userAgent?window.navigator.userAgent.split(/=>(.+)/)[0]:""),this.signalIncompletePrivacyConfig()}return Object.defineProperty(e.prototype,"PrivacyScrubber",{get:function(){return this.privacyScrubber.InitializationError?void 0:this.privacyScrubber},enumerable:!1,configurable:!0}),e.prototype.trackEvent=function(e){try{!this.privacyScrubber.inDropEventList(e)&&this.privacyScrubber.scrubEvent(e)&&this.logger.track(e)}catch(a){var t=void 0!==e?e.name:"undefined";if(this.hasErroringEventBeenPreviouslyLogged(t)){var n=void 0===e;this.logger.track({name:"TrackingEventError",data:{eventName:t,isEventUndefined:n}}),this.markErroringEventAsLogged(t)}}},e.prototype.userSignedIn=function(e){var t=this.logger.getPropertyManager(),n="";e.length>2&&":"!==e[1]&&(n="a:"+e),t.getPropertiesContext().user.localId=n||e},e.prototype.userSignedOut=function(){this.logger.getPropertyManager().getPropertiesContext().user.localId=this.unauthenticatedLocalUserId},e.prototype.unload=function(){Object(r.d)(null,this.eventNamespace),this.logger.unload()},e.prototype.signalIncompletePrivacyConfig=function(){var e=this.privacyScrubber.InitializationError;e&&(console.log("The privacy event scrubber was not initialized properly.\n\n ERROR: "+e),this.logger.track({name:"IncompletePrivacyScrubberConfig",data:{errorMessage:e}}))},e.prototype.markErroringEventAsLogged=function(e){this.erroringEventNamesLogged.push(e)},e.prototype.hasErroringEventBeenPreviouslyLogged=function(e){return-1===this.erroringEventNamesLogged.indexOf(e)},e.identifier="OneDSLogger",e}();function E(e){return new w(e)}function A(){return new a}},,,,,,function(e,t,n){"use strict";n.d(t,"e",function(){return y});var a=n(0),i=n(1769),r=n(344),o=n(791),s=n(1046),c=n(308),d=function(){function e(e,t){this.loggingService=e,this.logger=t,this.eventType="ApplicationLogic"}return e.prototype.logApplicationLogic=function(e,t,n){this.logger.trackEvent({name:e,data:Object(a.e)(Object(a.e)({eventType:this.eventType},this.loggingService.getContextsFields(e)),t),sync:n})},e}(),l=n(420),u=n(419),f=/\/files\/.*\/@ms\/stream-bundle\/chunks\/.*\.js/,p=function(){function e(e,t,n){void 0===n&&(n=u.n.Always),this.loggingService=e,this.logger=t,this.stackScrubbing=n,this.eventType="ErrorAlert",this.allowableUrlPatterns=[{hostSuffix:"odspwebdevdeploy.blob.core.windows.net"},{hostSuffix:"odsp.cdn.office.net",pathRegExp:f},{hostSuffix:"akamaized.net",pathRegExp:f},{hostSuffix:"azureedge.net",pathRegExp:f},{hostSuffix:"vo.msecnd.net",pathRegExp:f},{hostSuffix:"spoppe-b.azureedge.net",pathRegExp:f},{hostSuffix:"spoprod-a.akamaihd.net",pathRegExp:f},{hostSuffix:"modernb.akamai.odsp.cdn.office.net",pathRegExp:f},{hostSuffix:"modernb.verizon.odsp.cdn.office.net",pathRegExp:f},{hostSuffix:"res-1-sdf.cdn.office.net",pathRegExp:f},{hostSuffix:"res-2-sdf.cdn.office.net",pathRegExp:f},{hostSuffix:"res-1.cdn.office.net",pathRegExp:f},{hostSuffix:"res-2.cdn.office.net",pathRegExp:f}]}return e.prototype.logUnhandled=function(e,t){var n=e&&e.message?e.message:u.t.Missing,i=e&&e.stack?e.stack:u.a.Missing,r={message:n,stack:i,staticMessage:t},o=u.i.UnhandledError,s="azuremediaplayer",c="pluginscript";return i.includes(s)||n.includes(s)||t&&t.includes(s)?o=u.i.AmpUnhandledError:(i.includes(c)||n.includes(c)||t&&t.includes(c))&&(o=u.i.SdnUnhandledError),this.log(o,Object(a.e)({errorAlertType:"Unhandled"},r))},e.prototype.logWarning=function(e,t,n){if(!t.stack){var i=new Error;t.stack=i.stack?i.stack:Object(o.n)(u.a.Missing)}return this.log(e,Object(a.e)({errorAlertType:"Warning"},t),n)},e.prototype.logFatal=function(e,t,n){if(this.loggingService.getIsDevelopmentMode(),!t.stack){var i=new Error;t.stack=i.stack?i.stack:Object(o.n)(u.a.Missing)}return this.log(e,Object(a.e)({errorAlertType:"Fatal"},t),n)},e.prototype.scrubMessageAndStack=function(e,t){var n=this.loggingService.scrubErrorMessage(t);return{message:n,stack:this.scrubStack(e,t,n)}},e.prototype.scrubStack=function(e,t,n){var a=this;if(e===u.a.Missing||void 0===e)return u.a.Missing;if(t!==n){if(e===t)return u.a.Missing;t&&(e=e.replace(t,n))}return this.stackScrubbing===u.n.OnlyOffendingFrames?e.split("\n").map(function(e){return a.anyDisallowedUrlsDetected(e)?r.i:e}).join("\n"):this.stackScrubbing!==u.n.IfAnyFramesOffend||this.anyDisallowedUrlsDetected(e)?this.stackScrubbing===u.n.Never?e:r.a:e},e.prototype.log=function(e,t,n){var i=Object(a.e)(Object(a.e)({},t),this.scrubMessageAndStack(t.stack,t.message)),r={name:e,data:Object(a.e)(Object(a.e)({eventType:this.eventType},this.loggingService.getContextsFields(e)),i),sync:n};this.logger.trackEvent(r)},e.prototype.anyDisallowedUrlsDetected=function(e){var t=this,n=e.match(r.d);return!!n&&!n.every(function(e){try{var n=new l.e(e);return t.isAllowableUrl(n)}catch(e){return t.loggingService.warnThin("ShouldNeverHappen",{message:Object(o.n)("Failed to parse url from error stack. Incorrect URL regex defined or browser does not support URL."),stack:Object(o.n)(u.a.Missing)}),!1}})},e.prototype.isAllowableUrl=function(e){for(var t=0,n=this.allowableUrlPatterns;t<n.length;t++){var a=n[t];if(e.authority.endsWith(a.hostSuffix)&&(!a.pathRegExp||e.path.match(a.pathRegExp)))return!0}return!1},e}(),m=function(){function e(){}return e.isErrorMessageInAllowList=function(t){return[[2629270414,[]],[2088617118,[10]],[1737525859,[]],[2130502895,[9]],[1178833987,[]],[488448070,[9]],[596620353,[]],[3040621134,[36]],[2956233883,[]],[4115292574,[]],[2421334986,[39,53]],[1352199116,[]],[3846767544,[]],[3524375090,[]],[2682725065,[6,8,23]],[3119720747,[]],[1589266474,[]],[2216039769,[]],[3414433393,[11]],[3081950226,[15]],[3725376558,[]],[644885296,[]],[4141866811,[]],[1836600086,[]],[982396575,[0]],[3709693032,[0]],[1689284051,[0]],[1594098372,[75,78]],[3827832281,[16]],[2696823574,[]],[892546873,[]],[3066642868,[]],[4101390830,[]],[4068451482,[]],[187895691,[37]],[88021013,[15]],[764953272,[]],[859262350,[]],[519653657,[18]],[398223363,[12]],[2677102987,[]],[756726495,[]],[2414464484,[37,44]],[4089060913,[]],[2463176289,[]],[2968189423,[]],[2660161444,[23]],[3398381453,[23]],[3002739228,[15]],[3708611746,[40]],[492595211,[20]],[506785599,[18]],[2202427838,[]],[1716570162,[]],[906258278,[]],[2099833465,[28]],[2162010359,[]],[100726268,[]],[2632137031,[]],[755882173,[7,41]],[3290780583,[35]],[3477922139,[]],[440745912,[40,46]],[118413033,[]],[688355048,[26,31]],[4152071589,[16]],[1622609496,[]],[2810507193,[15]],[1137743060,[]],[797198601,[]],[3565558018,[]],[670147047,[]],[1952977301,[]],[921983148,[7]],[4218174057,[]],[300358129,[40]],[3528056995,[]],[1675686863,[]],[1555524069,[]],[4054001502,[29]],[3975281635,[0]],[571110085,[]],[3783953361,[22,28]],[161036957,[21,27]],[3535467428,[20,25]],[3499181191,[0]],[2296041036,[0]],[409228237,[0]],[801179427,[]],[2027200165,[0,28]],[468036106,[0]],[1293185262,[0]],[26715498,[35]],[685607770,[0]],[2577005664,[0,40]],[1077206334,[0]],[4250069493,[0]],[2604868405,[]],[2070458710,[18,23]],[3038979830,[18]],[53933209,[0]],[3494837289,[0]],[4064036886,[]],[1363827539,[27]],[182711559,[20]],[141307274,[]],[1363827551,[27]],[3320749051,[]],[451351940,[36]],[3314826626,[]],[3059788816,[]],[2534669442,[40]],[2849160186,[1,27,41]],[3408752716,[48]],[2661488898,[59]],[1924276959,[49]],[4247843539,[88]],[3910046394,[69]],[755808102,[69]],[3797000770,[62]],[110075538,[26,155,167]],[938041440,[26,171]],[2877460103,[76]],[3908648733,[94]],[3349751980,[85]],[982140457,[75]],[2221742147,[75]],[3942981546,[]],[2248815699,[]],[1899984834,[]],[2571496619,[52]],[2328152123,[52]],[4289120779,[94]],[1540291473,[]],[4211176916,[49]],[3421356754,[]],[2249069470,[]],[1228437868,[]],[2674132907,[]],[1353324682,[16]],[2076932346,[51]],[1602670360,[51]],[2997419583,[]],[2995390004,[1]],[3459191935,[1,50]],[1438511221,[26]],[2013327399,[]],[4031621281,[21]],[2610268359,[]],[2722000526,[]],[3489255996,[0,30]],[2511061698,[0]],[2688359333,[]],[3172689334,[17]],[1313919083,[]],[1156700115,[]],[1541731341,[]],[1495713417,[]],[2679445286,[24,30]],[2768943804,[]],[2291894996,[37,43,46]],[3132751208,[24,30,33]],[1533476413,[]],[2607640553,[]],[211006175,[0]],[864181151,[]],[3487961767,[]],[3564671846,[]],[3838467890,[]],[4264262823,[94]],[797946190,[12]],[2607033280,[0]],[4116725183,[0]],[543393013,[]],[1324619371,[15]],[3780556690,[]],[1210475778,[]],[1836096720,[]],[3376681631,[]],[771702814,[]],[3492066984,[86]],[4096901110,[]],[3440302684,[]],[2006088650,[]],[3366739874,[]],[3678705621,[19]],[832168919,[]],[2180428084,[23]],[4084516625,[]],[967753811,[24]],[3722230749,[13]],[2251336207,[14]],[3558673884,[]],[4145983524,[22]],[1691904394,[]],[2623415382,[]],[4283741004,[]],[3161635609,[]],[2734756679,[29]],[4163586508,[0,5,31]],[4290849548,[]],[123659539,[28]],[3207813817,[]],[1074892084,[]],[1591703187,[32]],[3037223682,[40]],[1633195017,[11,25,32]],[1503465331,[]],[42140878,[0]],[77653455,[]],[2019360442,[]],[3019449444,[0]],[448572136,[]],[1441796620,[]],[123169748,[]],[161721987,[]],[161938494,[]],[4206136126,[6,25,44]],[3116864378,[]],[208930023,[]],[830583625,[]],[2909896284,[]],[660096836,[]],[862724538,[]],[410854660,[]],[2742009233,[]],[3258730161,[]],[1118491287,[]],[990013918,[]],[1812793629,[21,83]],[3551847697,[]],[3177749203,[17,39]],[4145571670,[24]],[677026068,[]],[1036779033,[]],[2175712098,[]],[3953699874,[]],[235540629,[]],[3641641705,[]],[63111050,[]],[1219739094,[]],[1505412608,[]],[2081054773,[]],[2093006030,[]],[2440618814,[]],[673283607,[]],[628728096,[]],[293729682,[]],[19725543,[]],[199892795,[]]].some(function(n){return e.getHashWithWildcard(t,n[1])===n[0]})},e.getHashWithWildcard=function(e,t){for(var n=0,a=0,i=[" ",",",".","'",'"',")","(","[","]","<",">","`",":"],r=!1,o=4294967296,s=1,c=0;c<e.length;c++)-1!==t.indexOf(n)?(r=!0,n++):r?-1!==i.indexOf(e.charAt(c))&&(r=!1,a=(a+"%".charCodeAt(0)*s)%o,s=31*s%o,a=(a+e.charCodeAt(c)*s)%o,s=31*s%o,n++):(a=(a+e.charCodeAt(c)*s)%o,s=31*s%o,n++);return r&&(a=(a+"%".charCodeAt(0)*s)%o),a},e}(),_=function(){function e(){}return e.addPerformanceMark=function(e){this.isPerformanceAPIUnavailable()||performance.mark(e)},e.removePerformanceMark=function(e){this.isPerformanceAPIUnavailable()||performance.clearMarks(e)},e.addPerformanceMeasure=function(e,t){this.isPerformanceAPIUnavailable()||performance.measure(e,t)},e.removePerformanceMeasure=function(e){this.isPerformanceAPIUnavailable()||performance.clearMeasures(e)},e.getPerformanceMeasure=function(e){if(!this.isPerformanceAPIUnavailable()){for(var t,n=0,a=performance.getEntriesByName(e,"measure");n<a.length;n++){var i=a[n];if(i.name===e){t=i;break}}return t||void 0}},e.isPerformanceAPIUnavailable=function(){return!(performance.getEntriesByType&&performance.getEntriesByName&&performance.mark&&performance.measure&&performance.clearMarks&&performance.clearMeasures)},e}(),h=window._pageTimings||(window._pageTimings={}),b=function(){function e(e,t,n){this.loggingService=e,this.logger=t,this.errorAlertLogging=n,this.tagNameToStartedPerformanceEvent=new Map,this.eventType="Performance"}return e.prototype.registerEarlyStart=function(e,t,n){return this.tagNameToStartedPerformanceEvent.set(t.name,{eventName:e,performancePayload:n}),t.name},e.prototype.start=function(e,t){_.removePerformanceMark(e),_.addPerformanceMark(e),this.tagNameToStartedPerformanceEvent.set(e,{eventName:e,performancePayload:t})},e.prototype.startUnique=function(e,t){var n=this.getUniqueTagName(e,t);return _.addPerformanceMark(n),this.tagNameToStartedPerformanceEvent.set(n,{eventName:e,performancePayload:t}),n},e.prototype.end=function(e,t,n,i){var r=this.tagNameToStartedPerformanceEvent.get(e);if(void 0!==r){var o;_.addPerformanceMeasure(e,e);var s=_.getPerformanceMeasure(e);if(s){void 0===t&&(t=r.performancePayload);var c={startTimeMs:Math.round(s.startTime),endTimeMs:Math.round(s.startTime+s.duration),durationMs:Math.round(s.duration)};o=Object(a.e)(Object(a.e)({},t),i?i(c):c),this.logPerformance(r.eventName,o,n),_.removePerformanceMark(e),_.removePerformanceMeasure(e)}return this.tagNameToStartedPerformanceEvent.delete(e),o}},e.prototype.registerCompletedPerformance=function(e,t,n){var i=Object(a.e)(Object(a.e)({},n),{startTimeMs:Math.round(t.startTime),endTimeMs:Math.round(t.startTime+t.duration),durationMs:Math.round(t.duration)});return this.logPerformance(e,i),i},e.prototype.getUniqueTagName=function(e,t){var n=t&&t.name?t.name:e;return"".concat(n,"-").concat(Object(c.e)())},e.prototype.logPerformance=function(e,t,n){var i=t.name?"".concat(e,":").concat(t.name):e;if(this.errorAlertLogging){var r=this.errorAlertLogging.scrubMessageAndStack(t.stack,t.message||""),o=r.message,s=r.stack;t.message&&(t.message=o),t.stack&&(t.stack=s)}var c=this.loggingService.getContextsFields(i);if(this.logger.trackEvent({name:e,data:Object(a.e)(Object(a.e)({eventType:this.eventType},c),t),sync:n}),h&&t.name&&t.durationMs&&c&&c.component){var d=t.pluginName,l=d?"".concat(d,"_"):"";h["".concat(c.component,"_").concat(l).concat(t.name)]=t.durationMs}},e}(),g=function(){function e(e,t){this.loggingService=e,this.logger=t,this.eventType="Trace"}return e.prototype.logTrace=function(e,t,n){var i=t.traceId?t.traceId:Object(c.e)(),r=Object(a.e)(Object(a.e)({},t),{traceId:i,partNumber:0}),o=1,s=0,d=this.loggingService.scrubErrorMessage(t.message);if(d)for(;s<=d.length;){var l=d.substr(s,32500);r.message=l,r.partNumber=o,this.logTracePart(e,r,n),s+=32500,o++}return i},e.prototype.logTracePart=function(e,t,n){this.logger.trackEvent({name:e,data:Object(a.e)(Object(a.e)({eventType:this.eventType},this.loggingService.getContextsFields(e)),t),sync:n})},e}(),v=function(){function e(e,t){this.loggingService=e,this.logger=t,this.eventType="UserAction"}return e.prototype.logUserAction=function(e,t,n){this.logger.trackEvent({name:e,data:Object(a.e)(Object(a.e)({eventType:this.eventType},this.loggingService.getContextsFields(e)),t),sync:n})},e}(),y=function(){function e(){this.messageScrubbing=u.e.Always,this.isDevelopmentMode=!1,this.includeTimingFields=!0,this.loggedAppExitEvent=!1,this.onTrack=function(){}}return e.prototype.setupLogger=function(e,t,n,a,i,r,o,s){this.logger=e,n&&n.classic&&this.setClassicStreamContexts(n.classic),n&&n.stream&&this.setStreamContexts(n.stream),void 0!==r&&(this.messageScrubbing=r),this.errorAlertLogging=new p(this,e,i),this.setupUnhandledExceptionLogging(s),this.performanceLogging=new b(this,e,this.errorAlertLogging),this.applicationLogicLogging=new d(this,e),this.userActionLogging=new v(this,e),this.traceLogging=new g(this,e),this.loadStartTime=o,a&&(this.onTrack=a),this.legacyLogging=t,this.loggedAppExitEvent=!1},e.prototype.appLogicThin=function(e,t,n){this.applicationLogicLogging?(this.applicationLogicLogging.logApplicationLogic(e,t,n),this.onTrack(e)):this.assert("applicationLogicLogging not initialized")},e.prototype.userActionThin=function(e,t,n){this.userActionLogging?(this.userActionLogging.logUserAction(e,t,n),this.onTrack(e)):this.assert("userActionLogging not initialized")},e.prototype.warnThin=function(e,t,n){this.errorAlertLogging?(this.errorAlertLogging.logWarning(e,t,n),this.onTrack(e)):this.assert("errorAlertLogging not initialized")},e.prototype.fatalThin=function(e,t,n){this.errorAlertLogging?(this.errorAlertLogging.logFatal(e,t,n),this.onTrack(e)):this.assert("errorAlertLogging not initialized")},e.prototype.traceThin=function(e,t,n){if(!this.traceLogging)return this.assert("traceLogging not initialized"),"";var a=t||"DefaultTrace";return this.traceLogging.logTrace(a,e,n)},e.prototype.scrubErrorMessage=function(e){return e===u.t.Missing||void 0===e||""===e?u.t.Missing:S(this.messageScrubbing,u.e.Always)?r.a:this.messageScrubbing===u.e.Never||S(this.messageScrubbing,u.e.WhenNotMarkedAsSafe)&&Object(o.t)(e)||S(this.messageScrubbing,u.e.WhenNotInErrorHashAllowlist)&&m.isErrorMessageInAllowList(e)?Object(o.e)(e):this.PrivacyScrubber?this.PrivacyScrubber.scrubAsMessage(e):r.a},e.prototype.userSignedIn=function(e,t){var n=this.getClassicStreamContextsDeepCopy();n&&(n.userContext=e,n.expContext=t||n.expContext,this.setClassicStreamContexts(n)),this.logger&&this.logger.userSignedIn(e.userId)},e.prototype.userSignedOut=function(e){var t=this.getClassicStreamContextsDeepCopy();t&&t.userContext&&(t.userContext.userId="",t.userContext.userType=e,this.setClassicStreamContexts(t)),this.logger&&this.logger.userSignedOut()},Object.defineProperty(e.prototype,"PrivacyScrubber",{get:function(){return this.privacyScrubber},enumerable:!1,configurable:!0}),e.prototype.setIncludeTimingFields=function(e){this.includeTimingFields=e},e.prototype.getIsDevelopmentMode=function(){var e=null;try{e=window.localStorage.getItem("disableDevelopmentMode")}catch(e){}return this.isDevelopmentMode&&!e},e.prototype.setupPrivacyScrubber=function(e){this.privacyScrubber=e},e.prototype.getClassicStreamContextsDeepCopy=function(){return this.classicStreamContexts?JSON.parse(JSON.stringify(this.classicStreamContexts)):void 0},e.prototype.setClassicStreamContexts=function(e){this.classicStreamContexts=e,e&&void 0!==e.isDevelopmentMode&&(this.isDevelopmentMode=e.isDevelopmentMode),this.updateClassicStreamContextsFields()},e.prototype.getStreamContextsDeepCopy=function(){return this.streamContexts?JSON.parse(JSON.stringify(this.streamContexts)):void 0},e.prototype.setStreamContexts=function(e){this.streamContexts=e,this.updateStreamContextsFields()},e.prototype.setFlightsUsed=function(e){this.streamContexts&&this.streamContexts.expContext&&(this.streamContexts.expContext.flightsUsed=e,this.streamContextsFields&&(this.streamContextsFields.flightsUsed=e))},e.prototype.setFlightsUnused=function(e){this.streamContexts&&this.streamContexts.expContext&&(this.streamContexts.expContext.flightsUnused=e,this.streamContextsFields&&(this.streamContextsFields.flightsUnused=e))},e.prototype.setFlightsOverridden=function(){this.streamContexts&&this.streamContexts.expContext&&(this.streamContexts.expContext.flightsOverridden=!0,this.streamContextsFields&&(this.streamContextsFields.flightsOverridden=!0))},e.prototype.getContextsFields=function(e){var t=Object(a.e)(Object(a.e)({},this.classicStreamContextsFields||{}),this.streamContextsFields||{});return this.includeTimingFields&&(t=Object(a.e)(Object(a.e)({},this.calculateTimingFields(this.loadStartTime,e)),t)),t},e.prototype.legacy=function(e){this.legacyLogging&&this.legacyLogging.logEvent(e),this.onTrack(e.name)},e.prototype.registerEarlyStartPerformance=function(e,t,n){return this.performanceLogging?this.performanceLogging.registerEarlyStart(e,t,n):(this.assert("performanceLogging not initialized"),"")},e.prototype.startPerformance=function(e,t){this.performanceLogging?this.performanceLogging.start(e,t):this.assert("performanceLogging not initialized")},e.prototype.startUniquePerformance=function(e,t){return this.performanceLogging?this.performanceLogging.startUnique(e,t):(this.assert("performanceLogging not initialized"),"")},e.prototype.endPerformance=function(e,t,n,a){if(this.performanceLogging)return this.onTrack(e),this.performanceLogging.end(e,t,n,a);this.assert("performanceLogging not initialized")},e.prototype.registerCompletedPerformance=function(e,t,n){if(this.performanceLogging)return this.performanceLogging.registerCompletedPerformance(e,t,n);this.assert("performanceLogging not initialized")},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.classicStreamContexts&&this.classicStreamContexts.streamContext&&this.classicStreamContexts.streamContext.isDebugLoggingEnabled&&console.log.apply(console,Object(a.c)(["[".concat((new Date).toISOString(),"]")],e,!1))},e.prototype.assert=function(e){this.isDevelopmentMode&&console.debug(e)},e.prototype.logAppExited=function(e,t){var n;this.loggedAppExitEvent||(this.appLogicThin("AppExited",{isSynchronous:e,viewContext:t},e),null===(n=this.logger)||void 0===n||n.unload(),this.loggedAppExitEvent=!0)},e.prototype.updateClassicStreamContextsFields=function(){if(this.classicStreamContextsFields={},this.classicStreamContexts){this.classicStreamContexts.expContext&&!0!==this.classicStreamContexts.expContext.isExpSessionOverridden&&delete this.classicStreamContexts.expContext.isExpSessionOverridden;var e=JSON.parse(JSON.stringify(this.classicStreamContexts));delete e.expContext;var t=this.classicStreamContexts.expContext?this.classicStreamContexts.expContext:{};this.classicStreamContextsFields=Object(a.e)(Object(a.e)({classicStreamContextsVersion:"2.3"},Object(c.t)(e)),{expContext:t})}},e.prototype.updateStreamContextsFields=function(){if(this.streamContextsFields={},this.streamContexts){var e=JSON.parse(JSON.stringify(this.streamContexts));this.streamContextsFields=Object(a.e)({streamContextsVersion:i.schemaVersion},Object(c.t)(e))}},e.prototype.calculateTimingFields=function(e,t){var n=Object(s.e)(e,t);return void 0===n?{}:{browserTimingMethod:n.Method,msSinceAppStart:n.MsSinceNavigationStart}},e.prototype.setupUnhandledExceptionLogging=function(e){var t=this;!0!==e&&(window.onerror=function(e,n,a,i,r){t.errorAlertLogging&&t.errorAlertLogging.logUnhandled(r||new Error(e.toString()))})},e}();function S(e,t){return(e&t)===t}}],Array(21),[function(e,t,n){"use strict";n.d(t,"e",function(){return f});var a=n(0),i=n(51),r=n(1764),o=n(3582),s=n(19),c=n(55),d=n(791),l=n(3353),u=l.e.object({pointsOfInterests:l.e.array(l.e.object({meetingIdentifiers:l.e.object({organizerId:l.e.string,threadId:l.e.string,callId:l.e.string}),userJoinLeftItem:l.e.optional(l.e.object({attendanceStatus:l.e.string,userLeftEarlierTime:l.e.union(l.e.undefined,l.e.string),userJoinedLateTime:l.e.union(l.e.undefined,l.e.string),id:l.e.string,organizerId:l.e.string,threadId:l.e.string,callId:l.e.string})),atMentionEvents:l.e.optional(l.e.array(l.e.object({entryId:l.e.string,dateTimeUtc:l.e.union(l.e.undefined,l.e.string),nameDistanceFromTheBeginningOfTheUtterance:l.e.number,nameLength:l.e.number,mentionedByUserId:l.e.string,mentionedByUserDisplayName:l.e.string,utteranceContainingTheMention:l.e.string})))}))}),f=function(){function e(e,t,n,a,i){this.getAccessToken=e,this.telemetryApi=t,this.telemetryContext=n,this.isTMRRecordingEndTimeEnabled=a,this.isAtMentionPOIEnabled=i}return e.getShouldFetchPOIs=function(e,t,n,a){var i=!!t&&!!t.meetingOrganizerId&&!!t.meetingOrganizerTenantId&&t.meetingOrganizerId!==c.e&&t.meetingOrganizerTenantId!==c.e,r=!n||(!n.userId||n.userId===c.e)&&["BusinessAnonymous","ConsumerAnonymous","Unknown"].includes(n.accountType),o=i&&!r&&e;return a&&a.appLogic("PlayerAppLogic",{name:"POIProviderShouldFetchPOIs",message:JSON.stringify({result:o,isNotAdHoc:i,isUserUnauthenticated:r,arePOISettingsEnabled:e,meetingOrganizerId:null==t?void 0:t.meetingOrganizerId,meetingOrganizerTenantId:null==t?void 0:t.meetingOrganizerTenantId,userAccountType:null==n?void 0:n.accountType})}),o},e.prototype.getMCURequestPromise=function(e,t,n,i,s,c,l){var f,p;return Object(a.t)(this,void 0,void 0,function(){var m,_,h,b,g,v,y,S,D,I,x,C,O,w;return Object(a.i)(this,function(a){switch(a.label){case 0:try{m=this.tryGenerateMCURequestBody(e,t,n,i,s,c,l)}catch(e){return[2,Promise.reject(e)]}_="GetPointsOfInterest",h={components:"PointsOfInterest"},b=m,g=this.telemetryApi.startQos("PlayerInitEndQos",{name:"FetchAuthTokenForMcuCall"}),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.generateMCURequestHeaders()];case 2:return v=a.sent(),g.end(),[3,4];case 3:return y=a.sent(),(w=Object(r.t)(y)).isExpected?g.endExpectedError("Fatal",w):g.endUnexpectedError("Fatal",w),w.name="McuFetchAuthTokenCallFailed",[2,Promise.reject(w)];case 4:switch(S=null===(p=null===(f=this.telemetryContext.mediaContext)||void 0===f?void 0:f.environment)||void 0===p?void 0:p.toLowerCase(),D="",I=this.isAtMentionPOIEnabled?"/PointsOfInterest?pointsOfInterestTypes=JoinAndLeftEvents,AtMentionEvents":"/PointsOfInterest?pointsOfInterestTypes=JoinAndLeftEvents",x=this.telemetryApi.startQos("PlayerInitEndQos",{name:"GetPointsOfInterestFromMcu"}),S){case"isdebug":case"o365test":case"onebox":case"edog":case"spdf":D="https://sdf.cortana.ai/msai-meetingcatchup.meetingcatchup/api/v1";break;case"prodbubble":case"prod":case"dprod":D="https://api.cortana.ai/msai-meetingcatchup.meetingcatchup/api/v1";break;default:return g.endUnexpectedError("Fatal",Object(d.n)("Environment not found")),(w=new Error("Environment not found")).name="MCUEnvironmentNotFound",[2,Promise.reject(w)]}a.label=5;case 5:return a.trys.push([5,7,,8]),[4,o.e.post(_,h,D,I,{},b,v,u)];case 6:return C=a.sent(),x.end(),[2,C];case 7:return O=a.sent(),(w=Object(r.t)(O)).isExpected?x.endExpectedError("Fatal",w):x.endUnexpectedError("Fatal",w),w.name="MCUResponseFail",[2,Promise.reject(w)];case 8:return[2]}})})},e.prototype.tryGenerateMCURequestBody=function(e,t,n,a,i,r,o){var s,d="";if(e&&e!==c.e||(d+="callId "),t&&t!==c.e||(d+="threadId "),n&&n!==c.e||(d+="organizerId "),a&&a!==c.e||(d+="tenantId "),i&&i!==c.e||(d+="recordingStartTimeUtc "),this.isTMRRecordingEndTimeEnabled?(r&&r!==c.e||(d+="recordingEndTimeUtc "),r&&i&&(s=Date.parse(r)-Date.parse(i))):((!o||o<=0)&&(d+="recordingDurationInMs "),s=o),d){var l=new Error("MCU request body undefined, "+d+" is missing");throw l.name="MCURequestBodyUndefined",l}if(e&&t&&n&&a&&i&&s&&[e,t,n,a,i].every(function(e){return e!==c.e})&&s>=0)return this.generateMCURequestBody(e,t,n,a,i,s);var u=new Error("MCU request body undefined, unknown error");throw u.name="MCURequestBodyUndefined",u},e.prototype.generateMCURequestBody=function(e,t,n,a,i,r){return{recordedMeetingsIdentifiers:[{meetingIdentifiers:{callId:e,threadId:t,organizerId:this.getOrganizerId(n)+"@"+a},recordingAdditionalMetadata:{recordingDurationInSec:r/1e3,recordingStartTimeUtc:i}}]}},e.prototype.generateMCURequestHeaders=function(){return Object(a.t)(this,void 0,void 0,function(){var e,t;return Object(a.i)(this,function(n){switch(n.label){case 0:return[4,this.getAccessToken("MeetingCatchup")];case 1:return e=n.sent(),t=Object(s.e)(),[2,{Authorization:"Bearer "+e,"Content-Type":"application/json","X-Ms-Correlation-id":t,"X-Ms-Scenario-Name":"PointsOfInterestFromOnePlayer"}]}})})},e.prototype.getOrganizerId=function(e){var t="8:orgid:",n=e.startsWith(t)?e.substring(t.length):e,a=n.includes("_")?n.split("_")[1]:n;return i.a(a)},e}()},function(e,t,n){"use strict";n.d(t,"e",function(){return m});var a=n(0),i=n(3582),r=n(3353),o=n(3356),s=n(1764),c=n(1113),d=function(e,t){return Object(a.t)(void 0,void 0,void 0,function(){var n,i;return Object(a.i)(this,function(a){switch(a.label){case 0:a.label=1;case 1:return a.trys.push([1,3,,8]),[4,e.getAccessTokenVroom2_1()];case 2:return[2,[a.sent(),!1]];case 3:n=a.sent(),t(n,"Vroom2_1TokenNotAvailable"),a.label=4;case 4:return a.trys.push([4,6,,7]),[4,e.getAccessTokenVroom2_0()];case 5:return[2,[a.sent(),!0]];case 6:throw i=a.sent(),t(i,"Vroom2_1TokenNotAvailable"),l(i);case 7:return[3,8];case 8:return[2]}})})},l=function(e){var t,n=Object(s.t)(e);if(n.isExpected=!(!n.statusCode||-1===c.e.indexOf(n.statusCode)),void 0===n.statusCode||n.statusCode<400){var a=n.name.toLowerCase(),i=n.message.toLowerCase(),r=null===(t=n.staticMessage)||void 0===t?void 0:t.toLowerCase();(a.includes("abort")||a.includes("network")||i.includes("abort")||i.includes("network")||n.staticMessage&&(null==r?void 0:r.includes("abort"))||n.staticMessage&&(null==r?void 0:r.includes("network")))&&(n.isExpected=!0)}return n},u=function(e){return"Bearer "+e},f=function(e,t){return t?e.replace("/_api/v2.1","/_api/v2.0").split("?")[0]:e.replace("/_api/v2.0","/_api/v2.1").split("?")[0]},p=n(1768),m=function(){function e(){}return e.prototype.getTimelineEventsData=function(t,n){return Object(a.t)(this,void 0,void 0,function(){var o,s,c,m,_,h,b,g,v=this;return Object(a.i)(this,function(y){switch(y.label){case 0:return[4,d(t,function(e,t){n.fatal("ConfigurationError",e,{name:t,isExpected:!1})})];case 1:return o=y.sent(),s=o[0],c=o[1],m=f(t.documentId.value,c),_={Authorization:u(s)},h={name:"TimelineEvents.Get"},b=n.startQos("PlayerInitEndQos",h),g=c?{prefer:"apiversion=2.1"}:{},[2,i.e.getWithResponse("TimelineEvents.Get",{},m,"/media/timelineeventstream/content",g,_).then(function(t){return Object(a.t)(v,void 0,void 0,function(){var n;return Object(a.i)(this,function(a){switch(a.label){case 0:return h.backendCorrelationId=t.correlationId,h.retryCount=t.retries&&t.retries.length,b.end(),e.cTag=t.headers.get("CTag")||"*",[4,t.json()];case 1:if(n=a.sent(),!Object(r.t)(n,p.e))throw new TypeError("Malformed. Response validation failed");return null==n&&(n={}),void 0!==n.chapters&&null!==n.chapters||(n.chapters={}),e.timelineEvents=n,[2,n]}})})}).catch(function(e){var t=l(e);return h.backendCorrelationId=t.correlationId,h.retryCount=t.retryCount,function(e,t){if(404!==e.statusCode)throw void 0!==e.statusCode&&200===e.statusCode||(e.isExpected?t.endExpectedError("Warning",e):t.endUnexpectedError("Fatal",e)),e;t.end()}(t,b),{}})]}})})},e.prototype.putChapters=function(t,n,i){return Object(a.t)(this,void 0,void 0,function(){return Object(a.i)(this,function(a){switch(a.label){case 0:return e.timelineEvents.chapters=n,[4,this.putTimelineEventsData(t,i)];case 1:return a.sent(),[2]}})})},e.prototype.putTimelineEventsData=function(t,n){return Object(a.t)(this,void 0,void 0,function(){var r,s,c,p,m,_,h,b,g,v,y,S,D;return Object(a.i)(this,function(a){switch(a.label){case 0:return[4,d(t,function(e,t){n.log.fatal(e,{name:t,isExpected:!1})})];case 1:r=a.sent(),s=r[0],c=r[1],p=f(t.documentId.value,c),m="/media/timelineeventstream/content",_="*"===e.cTag?{Authorization:u(s),"If-None-Match":"*"}:{Authorization:u(s),"If-Match":e.cTag},h={name:"TimelineEvents.Put"},b=n.log.startQos(h),g=e.timelineEvents;try{(I=g).chapters&&I.chapters.forEach(function(e){if(""===e.id||isNaN(Object(o.n)(e.startOffset)))throw new Error("Timeline event schema corrupted.")})}catch(e){throw b.endUnexpectedError("Fatal",e),e}a.label=2;case 2:return a.trys.push([2,4,,5]),v=c?{prefer:"apiversion=2.1"}:{},[4,i.e.putWithResponse("TimelineEvents.Put",{},p,m,v,g,_)];case 3:return y=a.sent(),h.backendCorrelationId=y.correlationId,h.retryCount=y.retries&&y.retries.length,b.end(),e.cTag=y.headers.get("CTag")||"*",[3,5];case 4:throw S=a.sent(),D=l(S),h.backendCorrelationId=D.correlationId,h.retryCount=D.retryCount,D.isExpected?b.endExpectedError("Warning",D):b.endUnexpectedError("Fatal",D),D;case 5:return[2]}var I})})},e.cTag="*",e.timelineEvents={chapters:[],screenShare:[]},e}()}],Array(140),[function(e,t,n){"use strict";n.d(t,"e",function(){return r});var a=n(0),i=n(1760),r=function(){function e(e){this.directionKey="direction",this.currentDirection="ltr",this.comment=".comment",this.missingKeys=[],this.options=Object(a.e)(Object(a.e)({},{pseudo:!1}),e);var t=e.langResourceMap||Object(a.e)({},i.e);this.allStrings=t,this.availableLanguages=Object.keys(t),this.availableLanguages&&this.availableLanguages.length>0&&(this.currentLang=this.options.defaultLang&&-1!==this.availableLanguages.indexOf(this.options.defaultLang)?this.options.defaultLang:this.availableLanguages[0])}return e.prototype.waitDefaultResourcesLoad=function(){return Object(a.t)(this,void 0,void 0,function(){var e;return Object(a.i)(this,function(t){switch(t.label){case 0:return void 0===(this.currentLang?this.allStrings[this.currentLang]:void 0)&&this.options.loadDefaultStringsAsync&&this.currentLang?[4,this.options.loadDefaultStringsAsync()]:[3,2];case 1:e=t.sent(),this.allStrings[this.currentLang]=e,t.label=2;case 2:return this.defaultLangStrings=this.currentLang?this.allStrings[this.currentLang]:void 0,this.defaultLangStrings&&this.defaultLangStrings[this.directionKey]&&this.options.rootElement&&(this.currentDirection=this.defaultLangStrings[this.directionKey],this.options.rootElement.dir=this.currentDirection),[2]}})})},e.prototype.setLanguage=function(e){return Object(a.t)(this,void 0,void 0,function(){var t,n;return Object(a.i)(this,function(a){switch(a.label){case 0:if(-1===this.availableLanguages.indexOf(e)||e===this.options.defaultLang)return[3,5];if(this.currentLang=e,void 0!==this.allStrings[this.currentLang])return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.options.loadNonDefaultLangAsync(this.currentLang)];case 2:return t=a.sent(),this.allStrings[this.currentLang]=t,[3,4];case 3:return n=a.sent(),this.onMissingLanguage&&this.onMissingLanguage(n),[3,4];case 4:this.currentLangStrings=this.allStrings[this.currentLang],this.currentLangStrings&&this.currentLangStrings[this.directionKey]&&this.options.rootElement&&(this.currentDirection=this.currentLangStrings[this.directionKey],this.options.rootElement.dir=this.currentDirection),a.label=5;case 5:return[2]}})})},e.prototype.getString=function(e){if("_"===e.substring(0,1)&&e.substring(e.length-this.comment.length))return"";if(this.currentLangStrings&&e in this.currentLangStrings){var t=this.currentLangStrings[e];return this.options.pseudo?this.randomString(t.length):t}return this.defaultLangStrings&&e in this.defaultLangStrings?(this.onMissingTranslation&&!this.missingKeys.includes(e)&&this.currentLangStrings&&this.currentLang&&(this.missingKeys.push(e),this.onMissingTranslation(e,this.currentLang)),t=this.defaultLangStrings[e],this.options.pseudo?this.randomString(t.length):t):""},e.prototype.getStringOr=function(e,t){if("_"===e.substring(0,1)&&e.substring(e.length-this.comment.length))return"";if(this.currentLangStrings&&e in this.currentLangStrings){var n=this.currentLangStrings[e];return this.options.pseudo?this.randomString(n.length):n}return t},e.prototype.setLoggers=function(e,t){this.onMissingLanguage=e,this.onMissingTranslation=t},Object.defineProperty(e.prototype,"direction",{get:function(){return this.currentDirection},enumerable:!1,configurable:!0}),e.prototype.randomString=function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a+=1)t+=n.charAt(Math.floor(Math.random()*n.length));return t},e}()},,,function(e,t,n){"use strict";n.d(t,"t",function(){return o}),n.d(t,"e",function(){return s});var a=n(0),i=n(1110),r=n(263),o=Object(a.e)({1995:{defaultValue:!1,type:"boolean",friendlyName:"OnePlayer",featureFlagClassification:"MajorFeature"},isPlaybackSpeedNonTMRFilesEnabled:{defaultValue:!1,type:"boolean",friendlyName:"OnePlayerPlaybackSpeedNonTMRFilesEnabled",featureFlagClassification:"MajorFeature"},isPlaybackSpeedTMRFilesEnabled:{defaultValue:!1,type:"boolean",friendlyName:"OnePlayerPlaybackSpeedTMRFilesEnabled",featureFlagClassification:"MajorFeature"},isPlaybackSpeedAudioFilesEnabled:{defaultValue:!1,type:"boolean",friendlyName:"OnePlayerPlaybackSpeedAudioFilesEnabled",featureFlagClassification:"MajorFeature"},60381:{defaultValue:!1,type:"boolean",friendlyName:"OnePlayerEnableHybridPlayback",featureFlagClassification:"Fix"},isHybridPlaybackEnabled:{defaultValue:!1,type:"boolean",friendlyName:"OnePlayerEnableHybridPlaybackECS",featureFlagClassification:"Fix"},isRefactorTelemetryEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isRefactorTelemetryEnabled",featureFlagClassification:"Fix"},IsPopOutButtonEnabled:{defaultValue:!1,type:"boolean",friendlyName:"IsPopOutButtonEnabled",featureFlagClassification:"MinorFeature"},IsStreamPopOutIconEnabled:{defaultValue:!1,type:"boolean",friendlyName:"IsStreamPopOutIconEnabled",featureFlagClassification:"MinorFeature"},isForbiddenErrorFallbackEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isForbiddenErrorFallbackEnabledECS",featureFlagClassification:"Fix"},60450:{defaultValue:!1,type:"boolean",friendlyName:"isForbiddenErrorFallbackEnabled",featureFlagClassification:"Fix"},isMediaSettingsLayerEnabled:{defaultValue:!1,type:"boolean",friendlyName:"MediaSettings",featureFlagClassification:"MajorFeature"},isW3CTelemetryEnabled:{defaultValue:!1,type:"boolean",friendlyName:"EnableW3CTelemetry",featureFlagClassification:"Fix"},60102:{defaultValue:!1,type:"boolean",friendlyName:"isAggregatedW3CTelemetryEnabled",featureFlagClassification:"Fix"},isAggregatedW3CTelemetryEnabledEcs:{defaultValue:!1,type:"boolean",friendlyName:"isAggregatedW3CTelemetryEnabledEcs",featureFlagClassification:"Fix"},areM2MediaSettingsEnabled:{defaultValue:!1,type:"boolean",friendlyName:"MediaSettings-M2PluginsEnabled",featureFlagClassification:"MinorFeature"},60556:{defaultValue:!1,type:"boolean",friendlyName:"isWaitForFirstSegmentEnabled",featureFlagClassification:"Fix"},isWaitForFirstSegmentEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isWaitForFirstSegmentEnabledECS",featureFlagClassification:"Fix"},enableHidingButtonOnReflow:{defaultValue:!1,type:"boolean",friendlyName:"enableHidingButtonOnReflow",featureFlagClassification:"Fix"},isGetUserCanEditEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isGetUserCanEditEnabledECS",featureFlagClassification:"MinorFeature"},60486:{defaultValue:!1,type:"boolean",friendlyName:"isTranscriptAndCaptionsVroomCallEnabled",featureFlagClassification:"MinorFeature"},90028:{defaultValue:0,type:"number",friendlyName:"isTranscriptAndCaptionsVroomCallEnabledExp",featureFlagClassification:"MinorFeature"},60565:{defaultValue:!1,type:"boolean",friendlyName:"isTranscriptAndCaptionsVroomCallEnabledGovCloud",featureFlagClassification:"MinorFeature"},isFastSourceSetEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isFastSourceSetEnabled",featureFlagClassification:"Fix"},isBigPlayButtonHiddenOnAutoplay:{defaultValue:!1,type:"boolean",friendlyName:"isBigPlayButtonHiddenOnAutoplay",featureFlagClassification:"Fix"},isResetNSFieldsOnFallbackEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isResetNSFieldsOnFallbackEnabledECS",featureFlagClassification:"Fix"},firstPartyHostAppAuthNotAllowedList:{defaultValue:["Teams","Yammer"],type:"string[]",friendlyName:"FirstPartyHostAppAuthNotAllowedList",featureFlagClassification:"Fix"},isNotificationBadgeEnabled:{defaultValue:!1,type:"boolean",friendlyName:"EnableNotificationBadgeECS",featureFlagClassification:"MinorFeature"},isPlaybackStartTimeConsumptionEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isPlaybackStartTimeConsumptionEnabled",featureFlagClassification:"MinorFeature"},isUnmuteEventFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isUnmuteEventFiringFixEnabled",featureFlagClassification:"Fix"},isDivSliderIsFocusableEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isDivSliderIsFocusableEnabled",featureFlagClassification:"Fix"},isSetDynamicSizeInDialogEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isSetDynamicSizeInDialogEnabled",featureFlagClassification:"Fix"},isAddVideoOverlayEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isAddVideoOverlayEnabled",featureFlagClassification:"MinorFeature"},isUpdateVideoElementViaSubscriptionEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isUpdateVideoElementViaSubscriptionEnabled",featureFlagClassification:"Fix"},isRefactoredAMPThumbnailExtractionEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isRefactoredAMPThumbnailExtractionEnabled",featureFlagClassification:"Fix"},isIncreasedDefaultBandwidth:{defaultValue:!1,type:"boolean",friendlyName:"isIncreasedDefaultBandwidth",featureFlagClassification:"Fix"},isNavigationPanelLoaderTextColorWhite:{defaultValue:!0,type:"boolean",friendlyName:"isNavigationPanelLoaderTextColorWhite",featureFlagClassification:"Fix"},isOneTranscriptGenerateEnabled:{defaultValue:!1,type:"boolean",friendlyName:"OneTranscriptGenerateFeature",featureFlagClassification:"MajorFeature"},isIncreasedDefaultBandwidthV2:{defaultValue:!1,type:"boolean",friendlyName:"isIncreasedDefaultBandwidthV2",featureFlagClassification:"Fix"},isAMPFixForMediaSettingsToggleCCButtonBugEnabled:{defaultValue:!0,type:"boolean",friendlyName:"AMPFixForMediaSettingsCCButtonBug",featureFlagClassification:"Fix"},isUserCanEditTelemetryEnabled:{defaultValue:!0,type:"boolean",friendlyName:"UserCanEditTelemetryEnabled",featureFlagClassification:"Fix"},isTTLHeartbeatEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isTTLHeartbeatEnabled",featureFlagClassification:"Fix"},isCloseNavPanelOnErrorBoxEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isCloseNavPanelOnErrorBoxEnabled",featureFlagClassification:"Fix"},isMediaDimensionReportingEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isMediaDimensionReportingEnabled",featureFlagClassification:"MinorFeature"},isPrefetchManifestHelperV2Enabled:{defaultValue:!0,type:"boolean",friendlyName:"isPrefetchManifestHelperV2Enabled",featureFlagClassification:"MinorFeature"},isPOIPromiseEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isPointOfInterestPromiseEnabled",featureFlagClassification:"MinorFeature"},isFinegrainedBandwidthTelemetryEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFinegrainedBandwidthTelemetryEnabled",featureFlagClassification:"Fix"},disableNoiseSuppressionNoAudio:{defaultValue:!1,type:"boolean",friendlyName:"disableNoiseSuppressionNoAudio",featureFlagClassification:"Fix"},isNewPluginPanelCloseApproachEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isNewPluginPanelCloseApproachEnabled",featureFlagClassification:"Fix"},addAriaAttributesToToggleButton:{defaultValue:!0,type:"boolean",friendlyName:"addAriaAttributesToToggleButton"},isNativeDownloadSizelogEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isNativeDownloadSizelogEnabled",featureFlagClassification:"MinorFeature"},isMarkerHidingOnSmallScreensEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isMarkerHidingOnSmallScreensEnabled",featureFlagClassification:"Fix"},isCacheGetRendererInUiManagerEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isCacheGetRendererInUiManagerEnabled",featureFlagClassification:"Fix"},isNavPanelOrderingFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isNavPanelOrderingFixEnabled",featureFlagClassification:"Fix"},isTeachingMomentsEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isTeachingMomentsEnabled",featureFlagClassification:"MinorFeature"},isMessageBarContainerEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isMessageBarContainerEnabled",featureFlagClassification:"MajorFeature"},isEditInEmbedEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isEditInEmbedEnabled",featureFlagClassification:"Fix"},isProgressiveCorrelationIdEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isProgressiveCorrelationIdEnabled",featureFlagClassification:"Fix"},60658:{defaultValue:!1,type:"boolean",friendlyName:"isStreamWebAppEnabled",featureFlagClassification:"MajorFeature"},isVolumeShortcutHandlingEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isVolumeShortcutHandlingEnabled",featureFlagClassification:"Fix"},isLateInitializeCCOnTranscriptToggleEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isLateInitializeCCOnTranscriptToggleEnabled",featureFlagClassification:"Fix"},60634:{defaultValue:!1,type:"boolean",friendlyName:"OnePlayerHostPrefetchManifest",featureFlagClassification:"Fix"},60702:{defaultValue:!1,type:"boolean",friendlyName:"OnePlayerHostPrefetchProgressive",featureFlagClassification:"Fix"},isPlayerPluginsCleanUpEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isPlayerPluginsCleanUpEnabled",featureFlagClassification:"Fix"},isNavigationPanelOpenByDefaultEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isNavigationPanelOpenByDefaultEnabled",featureFlagClassification:"MinorFeature"},isNavigationPanelAnimationEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isNavigationPanelAnimationEnabled",featureFlagClassification:"MinorFeature"},isPrefInitSegmentV2Enabled:{defaultValue:!1,type:"boolean",friendlyName:"isPrefInitSegmentV2Enabled",featureFlagClassification:"MinorFeature"},isCloseButtonTooltipAutoDismissalEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isCloseButtonTooltipAutoDismissalEnabled",featureFlagClassification:"Fix"},isRemoveBigPlayButtonFocusEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isRemoveBigPlayButtonFocusEnabled",featureFlagClassification:"Fix"},isShareNavPanelAndCurrentTimeEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isShareNavPanelAndCurrentTimeEnabled",featureFlagClassification:"MinorFeature"},isMouseTooltipPositionEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isMouseTooltipPositionEnabled",featureFlagClassification:"Fix"},isVolumeBarAriaLabelLocalizationEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isVolumeBarAriaLabelLocalizationEnabled",featureFlagClassification:"Fix"},isControlBarButtonsLocalizationEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isControlBarButtonsLocalizationEnabled",featureFlagClassification:"Fix"},areAriaLabeAndRoleWhenButtonCollectionHasOneChildDisabled:{defaultValue:!0,type:"boolean",friendlyName:"areAriaLabeAndRoleWhenButtonCollectionHasOneChildDisabled",featureFlagClassification:"Fix"},isTimelineMarkerGradientRenderingEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isTimelineMarkerGradientRenderingEnabled",featureFlagClassification:"Fix"},isMarkerTooltipBeakHidden:{defaultValue:!1,type:"boolean",friendlyName:"isMarkerTooltipBeakHidden",featureFlagClassification:"MinorFeature"},isOnePlayerListenToLatestFatalErrorEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isOnePlayerListenToLatestFatalErrorEnabled",featureFlagClassification:"Fix"},isNavigationEditInStreamActionEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isNavigationEditInStreamActionEnabled",featureFlagClassification:"MinorFeature"},prefSegTimeout:{defaultValue:2e3,type:"number",friendlyName:"prefetchInitSegmentTimeout",featureFlagClassification:"MinorFeature"},isMarkerCollisionLogicEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isMarkerCollisionLogicEnabled"},isThreeStepRenderingEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isThreeStepRenderingEnabled",featureFlagClassification:"MinorFeature"},areWireAmpBitratePropertiesEnabled:{defaultValue:!0,type:"boolean",friendlyName:"areWireAmpBitratePropertiesEnabled",featureFlagClassification:"MinorFeature"},isMarkerClickLoggingInsidePlatformEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isMarkerClickLoggingInsidePlatformEnabled",featureFlagClassification:"MinorFeature"},isMarkerListItemReadoutFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isMarkerListItemReadoutFixEnabled",featureFlagClassification:"Fix"},isOnResizeCancelThrottledFunctionEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isOnResizeCancelThrottledFunctionEnabled",featureFlagClassification:"MinorFeature"},isEmptyStateOnMediaSettingsEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isEmptyStateOnMediaSettingsEnabled",featureFlagClassification:"MinorFeature"},isFluentPipEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isFluentPipEnabled",featureFlagClassification:"MinorFeature"},isLargeButtonLabelOverflowEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isLargeButtonLabelOverflowEnabled",featureFlagClassification:"Fix"},isTeachingMomentsAdaptToSWAEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isTeachingMomentsAdaptToSWAEnabled",featureFlagClassification:"Fix"},isItemDimensionsLoggingEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isItemDimensionsLoggingEnabled",featureFlagClassification:"Fix"},isTMRRecordingEndTimeEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isTMRRecordingEndTimeEnabled",featureFlagClassification:"MinorFeature"},isKeyboardShortcutUpdateEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isKeyboardShortcutUpdateEnabled",featureFlagClassification:"Fix"},isContainerScrollbarRedesignEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isContainerScrollbarRedesignEnabled",featureFlagClassification:"Fix"},60834:{defaultValue:!1,type:"boolean",friendlyName:"isOnePlayerTranscriptPrefetchEnabled",featureFlagClassification:"MinorFeature"},90132:{defaultValue:!1,type:"number",friendlyName:"isOnePlayerTranscriptPrefetchEnabledExp",featureFlagClassification:"MinorFeature"},isModalTabIndexDisabled:{defaultValue:!0,type:"boolean",friendlyName:"ModalTabIndexKillSwitch",featureFlagClassification:"Fix"},isNavigationPanelMinWidthEnabled:{defaultValue:!0,type:"boolean",friendlyName:"NavigationPanelMinWidthEnabled",featureFlagClassification:"Fix"},isDisallowFavorProgressiveForOldEdgeEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isDisallowFavorProgressiveForOldEdgeEnabled",featureFlagClassification:"Fix"},isRetryOnDecodeErrorDisabled:{defaultValue:!0,type:"boolean",friendlyName:"isRetryOnDecodeErrorDisabled",featureFlagClassification:"Fix"},isImprovedSourceBufferLogEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isImprovedSourceBufferLogEnabled",featureFlagClassification:"Fix"},60912:{defaultValue:!1,type:"boolean",friendlyName:"isOnePlayerFluentMtcOptimizationEnabled",featureFlagClassification:"MinorFeature"},isMarkerAddLoggingInPlatformEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isMarkerLoggingInPlatformEnabled",featureFlagClassification:"MinorFeature"},isPlaybackSpeedInPopoutChatEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isPlaybackSpeedInPopoutChatEnabled",featureFlagClassification:"Fix"},isSWANavPanelShimmerEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isSWANavPanelShimmerEnabled",featureFlagClassification:"MinorFeature"},isSmallHorizontalLayoutTabOrderFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isSmallHorizontalLayoutTabOrderFixEnabled",featureFlagClassification:"Fix"},isAmpAutoplayFailedObservableEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isAmpAutoplayFailedObservableEnabled",featureFlagClassification:"MinorFeature"},isNavPanelItemEmptyLabelFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isNavPanelItemEmptyLabelFixEnabled",featureFlagClassification:"Fix"},isFixForPlaylistReflowEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFixForPlaylistReflowEnabled",featureFlagClassification:"MinorFeature"},isNewLandMarks:{defaultValue:!0,type:"boolean",friendlyName:"isNewLandMarks",featureFlagClassification:"Fix"},isClosedCaptionsInMtcOnlyEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isClosedCaptionsInMtcOnlyEnabled",featureFlagClassification:"MinorFeature"},isMitigationOfShowingOnlyOverflowEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isMitigationOfShowingOnlyOverflowEnabled",featureFlagClassification:"Fix"},isGetValueForUiApiEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isGetValueForUiApiEnabled",featureFlagClassification:"Fix"},isDiagnosticToolEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isDiagnosticToolEnabled",featureFlagClassification:"MajorFeature"},isNavPanelLayoutLabelForHorizontalEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isNavPanelLayoutLabelForHorizontalEnabled",featureFlagClassification:"Fix"},isOverflowButtonSelectedStatusEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isOverflowButtonSelectedStatusEnabled",featureFlagClassification:"Fix"},isAlwaysFocusOnCloseButtonEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isAlwaysFocusOnCloseButtonEnabled",featureFlagClassification:"Fix"},isShowMaxPluginsSWAEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isShowMaxPluginsSWAEnabled",featureFlagClassification:"Fix"},performHealthCheckIdentifyNetworkFailuresKS:{defaultValue:!0,type:"boolean",friendlyName:"performHealthCheckIdentifyNetworkFailuresKS",featureFlagClassification:"Fix"},isHelpPluginInSWAEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isHelpPluginInSWAEnabled",featureFlagClassification:"Fix"},isNavPanelOnResizeOverflowFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isNavPanelOnResizeOverflowFixEnabled",featureFlagClassification:"Fix"},isNavigationPanelEffectSplitEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isNavigationPanelEffectSplitEnabled",featureFlagClassification:"Fix"},isShowNavPanelOverflowOnlyEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isShowNavPanelOverflowOnlyEnabled",featureFlagClassification:"MinorFeature"},isRemoveChevronWithSingleMediaSettingEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isRemoveChevronWithSingleMediaSettingEnabled",featureFlagClassification:"MinorFeature"},isLongSessionWarningMessageBarEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isLongSessionWarningMessageBarEnabled",featureFlagClassification:"MinorFeature"},isBorderRemovedForSmall:{defaultValue:!0,type:"boolean",friendlyName:"isBorderRemovedForSmall",featureFlagClassification:"Fix"},isVisiblePluginsLoggingEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isVisiblePluginsLoggingEnabled",featureFlagClassification:"Fix"},isNewPluginsInitializedSchemaEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isNewPluginsInitializedSchemaEnabled",featureFlagClassification:"Fix"},isOverflowUnderMTCFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isOverflowUnderMTCFixEnabled",featureFlagClassification:"Fix"},isFluentMtcContainersUnloadEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFluentMtcContainersUnloadEnabled",featureFlagClassification:"Fix"},isTimelineEventsProviderEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isTimelineEventsProviderEnabled",featureFlagClassification:"MinorFeature"},isOverflowSubmenuChevronsEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isOverflowSubmenuChevronsEnabled",featureFlagClassification:"Fix"},isClosingFluentMenusOnResizeEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isClosingFluentMenusOnResizeEnabled",featureFlagClassification:"Fix"},isFluentMtcCaptionsRenderFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFluentMtcCaptionsRenderFixEnabled",featureFlagClassification:"Fix"},isFluentMtcManagerUnloadEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFluentMtcManagerUnloadEnabled",featureFlagClassification:"Fix"},isGradientShadowForNextGenEngineFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isGradientShadowForNextGenEngineFixEnabled",featureFlagClassification:"Fix"},isFullscreenIsAllowedEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFullscreenIsAllowedEnabled",featureFlagClassification:"MinorFeature"},isFluentMtcTimeStampAnnouncementEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFluentMtcTimeStampAnnouncementEnabled",featureFlagClassification:"Fix"},isFluentMtcFixForTranscriptToggleCCButtonBugEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFluentMtcFixForTranscriptToggleCCButtonBugEnabled",featureFlagClassification:"Fix"},isFluentMtcNavPanelFadeEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFluentMtcNavPanelFadeEnabled",featureFlagClassification:"Fix"},isFluentMtcThumbnailFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFluentMtcThumbnailFixEnabled",featureFlagClassification:"Fix"},isFluentMtcModalThemeFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFluentMtcModalThemeFixEnabled",featureFlagClassification:"Fix"},isUpdateSWAMessageBarEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isUpdateSWAMessageBarEnabled",featureFlagClassification:"Fix"},isBigPlayButtonWrappedInButtonTagEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isBigPlayButtonWrappedInButtonTagEnabled",featureFlagClassification:"Fix"},isKeyboardShortcutModalInsidePlaybackDivEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isKeyboardShortcutModalInsidePlaybackDivEnabled",featureFlagClassification:"Fix"},isFluentMtcDoubleClickFullscreenFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFluentMtcDoubleClickFullscreenFixEnabled",featureFlagClassification:"Fix"},isFluentMtcSkipLoadedDataStateEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFluentMtcSkipLoadedDataStateEnabled",featureFlagClassification:"Fix"},isFluentMtcFullscreenChangeHandlerTelemetryEventsEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFluentMtcFullscreenChangeHandlerTelemetryEventsEnabled",featureFlagClassification:"Fix"},isFluentMtcTouchSliderDragFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFluentMtcTouchSliderDragFixEnabled",featureFlagClassification:"Fix"},isFluentMtcShowMtcOnTapEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFluentMtcShowMtcOnTapEnabled",featureFlagClassification:"Fix"},isFluentMtcFixFullscreenDblClickContainerEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFluentMtcFixFullscreenDblClickContainerEnabled",featureFlagClassification:"Fix"},isFluentMtcOverflowSettingsPositioningFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFluentMtcOverflowSettingsPositioningFixEnabled",featureFlagClassification:"Fix"},isFluentMtcCheckedStateFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFluentMtcCheckedStateFixEnabled",featureFlagClassification:"Fix"},isTokenRefactoringEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isTokenRefactoringEnabled",featureFlagClassification:"MinorFeature"},isTokenRefactoringUserInteractionSignOnEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isTokenRefactoringUserInteractionSignOnEnabled",featureFlagClassification:"MinorFeature"},tokenRefactoringAadClientId:{defaultValue:null,type:"string",friendlyName:"tokenRefactoringAadClientId",featureFlagClassification:"MinorFeature"},isFluentMtcCaptionStylesFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFluentMtcCaptionStylesFixEnabled",featureFlagClassification:"Fix"},isOnePlayerFluentMtcSubmenuCloseOnClickEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isOnePlayerFluentMtcSubmenuCloseOnClickEnabled",featureFlagClassification:"Fix"},isFluentMtcAriaHasPopupFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFluentMtcAriaHasPopupFixEnabled",featureFlagClassification:"Fix"},isNewRenderEmptyMediaEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isNewRenderEmptyMediaEnabled",featureFlagClassification:"Fix"},isFluentMtcRerenderFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFluentMtcRerenderFixEnabled",featureFlagClassification:"Fix"},isFluentMtcPlaybackExperienceRtlFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFluentMtcPlaybackExperienceRtlFixEnabled",featureFlagClassification:"Fix"},isFluentMtcGradientShadowFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFluentMtcGradientShadowFixEnabled",featureFlagClassification:"Fix"},isFluentKeyboardShortcutsModalShortcutFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFluentKeyboardShortcutsModalShortcutFixEnabled",featureFlagClassification:"Fix"},isFluentKeyboardShortcutsModalShortcutUpdatedFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFluentKeyboardShortcutsModalShortcutUpdatedFixEnabled",featureFlagClassification:"Fix"},isFluentPlaybackSpeedAriaLabelFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFluentPlaybackSpeedAriaLabelFixEnabled",featureFlagClassification:"Fix"},isCaptionsForNextEngineEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isCaptionsForNextEngineEnabled",featureFlagClassification:"MinorFeature"},isFluentSeekbarResizeBugFixed:{defaultValue:!0,type:"boolean",friendlyName:"isFluentSeekbarResizeBugFixed",featureFlagClassification:"Fix"},isChapteringTelemetryImprovementEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isChapteringTelemetryImprovementEnabled",featureFlagClassification:"MinorFeature"},isFluentShowMtcOnBigPlayButtonSelectedFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFluentShowMtcOnBigPlayButtonSelectedFixEnabled",featureFlagClassification:"Fix"},isFluentCaptionTooltipFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFluentCaptionTooltipFixEnabled",featureFlagClassification:"Fix"},isFluentDisabledButtonFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFluentDisabledButtonFixEnabled",featureFlagClassification:"Fix"},isOptimizedWebVideoLocalizationEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isOptimizedWebVideoLocalizationEnabled",featureFlagClassification:"MinorFeature"},isNextGenEngineScreenAlertEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isNextGenEngineScreenAlertEnabled",featureFlagClassification:"MinorFeature"},isScreenAlertOnNativeTimeEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isScreenAlertOnNativeTimeEnabled",featureFlagClassification:"Fix"},isFluentMtcInitSplitV2Enabled:{defaultValue:!1,type:"boolean",friendlyName:"FluentMtcInitSplitV2Enabled",featureFlagClassification:"MinorFeature"},isPopOutReferralTelemetryEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isPopOutReferralTelemetryEnabled",featureFlagClassification:"Fix"},isPerformanceVisualizerToolEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isPerformanceVisualizerToolEnabled",featureFlagClassification:"MinorFeature"},isNextGenEngineDeferLoadEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isNextGenEngineDeferLoadEnabled",featureFlagClassification:"Fix"},isStreamPopOutTooltipTextEnabled:{defaultValue:!1,type:"boolean",friendlyName:"isStreamPopOutTooltipTextEnabled",featureFlagClassification:"MinorFeature"},PopOutIcon:{defaultValue:"Generic",type:"string",friendlyName:"PopOutIcon",featureFlagClassification:"MinorFeature"},isFullscreenVoiceAccessFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFullscreenVoiceAccessFixEnabled",featureFlagClassification:"Fix"},isStreamPopOutTooltipTelemetryEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isStreamPopOutTooltipTelemetryEnabled",featureFlagClassification:"Fix"},isPopOutNavQosFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isPopOutNavQosFixEnabled",featureFlagClassification:"Fix"},isTABTestSessionCheckEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isTABTestSessionCheckEnabled",featureFlagClassification:"MinorFeature"},isNextGenEngineCContextEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isNextGenEngineCContextEnabled",featureFlagClassification:"MinorFeature"},volumeExponent:{defaultValue:1,type:"number",friendlyName:"volumeExponent",featureFlagClassification:"MinorFeature"},isFluentVideoThumbnailFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFluentVideoThumbnailFixEnabled",featureFlagClassification:"Fix"},isAutoQualityLabelLocalizedEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isAutoQualityLabelLocalizedEnabled",featureFlagClassification:"Fix"},isFluentMtcControlsWrapFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isFluentMtcControlsWrapFixEnabled",featureFlagClassification:"Fix"},isNavigationFocusFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isNavigationFocusFixEnabled",featureFlagClassification:"Fix"},isAboutVideoToolTipFixEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isAboutVideoToolTipFixEnabled",featureFlagClassification:"Fix"},isBasicPOICollisionHandlingEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isBasicPointOfInterestCollisionHandlingEnabled",featureFlagClassification:"MinorFeature"},isPopOutPauseVideoEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isPopOutPauseVideoEnabled",featureFlagClassification:"Fix"},isRemoveQualitySettingFromLocalStorageEnabled:{defaultValue:!0,type:"boolean",friendlyName:"isRemoveQualitySettingFromLocalStorageEnabled",featureFlagClassification:"Fix"}},i.e);function s(e,t){if(t)return Object(r.e)(e.getSettingObject("60565","boolean"));var n=Object(r.e)(e.getSettingObject("60486","boolean")),a=e.getSettingObject("90028","number");return!!(n||a&&a.value&&a.value>0)}},,,,,,,function(e,t,n){"use strict";n.d(t,"t",function(){return i}),n.d(t,"e",function(){return r}),n.d(t,"n",function(){return o});var a=function(e){var t=e/1e3,n=Math.floor(t%60),a=(t=Math.floor(t/60))%60;return[Math.floor(t/60),a,n]},i=function(e){var t=Math.floor(e%1e3),n=a(e),i=n[0],r=n[1],o=n[2];return i.toString().padStart(2,"0")+":"+r.toString().padStart(2,"0")+":"+o.toString().padStart(2,"0")+"."+t.toString().padStart(3,"0")},r=function(e){var t=a(e),n=t[0],i=t[1],r=t[2];return(n>0?n.toString()+":"+i.toString().padStart(2,"0"):i.toString())+":"+r.toString().padStart(2,"0")},o=function(e){return void 0===e?NaN:e.match(/^((\d{1,}:)?[0-5]?\d:[0-5]\d)(\.\d+)?$/)?function(e){var t=e.split(":").reverse(),n=0;return t[0]&&(n+=parseFloat(t[0])),t[1]&&(n+=60*parseInt(t[1],10)),t[2]&&(n+=60*parseInt(t[2],10)*60),Math.round(1e3*n)}(e):NaN}},,,function(e,t,n){"use strict";n.d(t,"e",function(){return i});var a=n(0),i=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(a.a)(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){this._externalSetFunc?this._externalSetFunc(e):this._earlyValue=e},enumerable:!1,configurable:!0}),t.prototype.attach=function(e,t){this.externalValueUpdated(t),this._externalSetFunc=e,void 0!==this._earlyValue&&(this._externalSetFunc(this._earlyValue),this._earlyValue=void 0)},t.prototype.externalValueUpdated=function(e){this._value=e,this._observable.notify(e)},t}(n(53).e)},function(e,t,n){"use strict";var a;n.d(t,"e",function(){return a}),function(e){e.Horizontal="Horizontal",e.Vertical="Vertical",e.Longer="Longer"}(a||(a={}))},function(e,t,n){"use strict";n.d(t,"e",function(){return a});var a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Array.prototype.slice.call(e,1);return e[0].replace(/{(\d+)}/g,function(e,t){return void 0!==n[t]?n[t]:e})}},function(e,t,n){"use strict";n.d(t,"t",function(){return r}),n.d(t,"n",function(){return o}),n.d(t,"a",function(){return s}),n.d(t,"e",function(){return c});var a=n(0),i=n(1529);function r(e,t){var n=Object(i.e)(t).timeSeperator,a=/^P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?))$/.exec(e);if(null===a)return"";var r=new function(){this.alreadyHaveValue=!1,this.retVal=""};function o(e,t,a){if(void 0===t)(!0===e.alreadyHaveValue||a)&&(e.retVal+="00"+n);else{e.alreadyHaveValue=!0;var i=parseInt(t);e.retVal+=i<10?"0"+i+n:t.substr(0,2)+n}}for(var s=1;s<5;s++)o(r,a[s],!1);for(s=5;s<7;s++)o(r,a[s],!0);return r.retVal.slice(0,r.retVal.length-1)}function o(e){var t=r(e);if(!t)return 0;var n=t.split(":").reverse(),a=0;return n[0]&&(a+=parseInt(n[0])),n[1]&&(a+=60*parseInt(n[1])),n[2]&&(a+=60*parseInt(n[2])*60),a}function s(e){var t=Math.floor(e/3600),n=Math.floor((e-60*t*60)/60),a=e-60*t*60-60*n;return t?"PT".concat(t,"H").concat(n,"M").concat(a,"S"):"PT".concat(n,"M").concat(a,"S")}function c(e,t,n){return new Date(e).toLocaleString(t,Object(a.e)({hour:"2-digit",minute:"2-digit"},n))}},function(e,t,n){"use strict";n.d(t,"e",function(){return i});var a=n(0),i=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(a.a)(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){this._externalProperty?this._externalProperty.value=e:this._earlyValue=e},enumerable:!1,configurable:!0}),t.prototype.attach=function(e,t){var n=this;void 0===t&&(t=!0),this._externalProperty=e,t&&this.externalPropertryValueChanged(e.value),t||this._earlyValue||(this._earlyValue=this._value),void 0!==this._earlyValue?(this._externalProperty.value=this._earlyValue,t||this.externalPropertryValueChanged(this._earlyValue),this._earlyValue=void 0):void 0===this._value||t||(this._externalProperty.value=this._value),this._externalProperty.subscribe(function(e){return n.externalPropertryValueChanged(e)},{ignoreCurrentValue:!0})},t.prototype.externalPropertryValueChanged=function(e){this._value=e,this._observable.notify(e)},t}(n(53).e)},function(e,t,n){"use strict";n.d(t,"t",function(){return a}),n.d(t,"n",function(){return i}),n.d(t,"e",function(){return r});var a=function(e,t,n){void 0===n&&(n={});var a=0,i=0;function r(t){i=Date.now(),e.apply(null,t)}function o(){var e=Date.now()-i;return n.maxWait&&e>=n.maxWait||!i&&!!n.invokeOnFirstCall}return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];o()&&r(e),window.clearTimeout(a),a=window.setTimeout(function(){return r(e)},t)}},i=function(e,t){return a(e,t,{invokeOnFirstCall:!0,maxWait:t})},r=function(e,t){return function(e,t,n){void 0===n&&(n={});var a=0,i=0;function r(t){i=Date.now(),e.apply(null,t)}function o(){var e=Date.now()-i;return n.maxWait&&e>=n.maxWait||!i&&!!n.invokeOnFirstCall}var s=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];o()&&r(e),window.clearTimeout(a),a=window.setTimeout(function(){return r(e)},t)};return s.cancel=function(){window.clearTimeout(a)},s}(e,t,{invokeOnFirstCall:!0,maxWait:t})}}],Array(170),[function(e,t,n){"use strict";n.d(t,"e",function(){return An});var a=n(0),i=n(3613),r=n(344),o=n(55),s=n(263),c={rebufferingGoalInMs:4500,bufferingGoalInMs:12e4},d=n(51),l=n(1770),u=n(1764),f=n(3351),p=n(1769),m=n(308),_=n(791),h=n(419),b=n(1519),g=n(797),v=n(53),y=n(3364),S=n(3582),D=n(1046),I="canplay",x="canplaythrough",C="error",O="loadstart",w="loadedmetadata",E="loadeddata",A="pause",L="play",k="playing",M="seeking",P="timeupdate",T="waiting",U="sourceset",F="mute",H="unmute",R="fullscreen",N="exitfullscreen",B="onDownloadRequestEnded",j="analyticsheartbeat",V="receivedUserPrincipalSettings",z="captionOn",G="captionOff",K="mute",W="unmute",q="sourceSetTimeout",Q="rebufferRatioReached",Y="openPlaybackSpeedMenu",J="changePlaybackSpeed",X="openPlayerSettingsMenu",Z="attemptingSrcFallback",$="skipForward",ee="skipBackward",te="closedCaptionsUrlLoaded";function ne(e){var t=e.videoElement?e.videoElement:document.createElement("video");t.className="azuremediaplayer amp-big-play-centered one-player-skin",t.style.width="100%",t.style.height="100%",e.backgroundColor&&(t.style.backgroundColor=e.backgroundColor),t.setAttribute("playsInline","");var n=document.createElement("style");return e.isRemoveMouseEventFocusStateEnabled?n.innerHTML=".azuremediaplayer .vjs-player .vjs-tech:focus-visible { outline: 2px solid white; outline-offset: -2px; }":n.innerHTML=".azuremediaplayer .vjs-player .vjs-tech:focus { outline: 2px solid white; outline-offset: -2px; }",document.head.appendChild(n),e.isFluentMTCEnabled||(e.container.innerHTML=""),e.container.appendChild(t),t.setAttribute("preload","auto"),e.isAddCrossOriginAnonymousEnabled&&(t.crossOrigin="anonymous"),t}var ae=function(){function e(e,t){this.errorState=e,this.logStateChanged=t,this._stateMap=new Map,this.nextStateChangeCallbacks=[],this.currState=void 0}return e.prototype.getState=function(e){return!!this._stateMap.has(e)&&this._stateMap.get(e)},e.prototype.waitForStates=function(e){var t=this;if(this.errorHasOccurred())return Promise.resolve(!1);var n=function(a){if(t.errorHasOccurred())a(!1);else{for(var i=!0,r=0,o=e;r<o.length;r++){var s=o[r];if(!t.getState(s)){i=!1;break}}i?a(!0):t.nextStateChangeCallbacks.push(function(){n(a)})}};return new Promise(function(e){n(e)})},e.prototype.setState=function(e,t){void 0===t&&(t=!0),this.getState(e)!==t&&(this._stateMap.set(e,t),this.logStateChanged(e,this.currState),this.currState=e,this.triggerStateChanges())},e.prototype.triggerStateChanges=function(){for(var e=0,t=this.nextStateChangeCallbacks.splice(0,this.nextStateChangeCallbacks.length);e<t.length;e++)(0,t[e])()},e.prototype.errorHasOccurred=function(){return this.getState(this.errorState)},e}(),ie=n(45),re=n(1124),oe=n(3360),se=n(3359),ce=n(18),de=n(1122),le=n(3362),ue=n(3361),fe=n(1767),pe=function(e,t){if("ty"===e||"fj"===e||"as"===e||"iu"===e)return t.getString("Transcript.language.".concat(e));var n=e,a="";if("zh-Hans"===e||"zh-CN"===e?(n="zh-Hans-CN",a=t.getString("ChineseSimplifiedLabel")):"zh-Hant"!==e&&"zh-HK"!==e||(n="zh-Hant-HK",a=t.getString("ChineseTraditionalHkLabel")),a)return a;var i=t.locale.value?t.locale.value:"en",r=n.split("-"),o=r[0],s=new Intl.DisplayNames([i],{type:"language"}).of(o);if(r.length>1){var c=r[1];try{if(3===r.length)return new Intl.DisplayNames([i],{type:"language"}).of(n);var d=new Intl.DisplayNames([i],{type:"region"}).of(c);return Object(ue.e)(t.getString("TranscriptLanguage"),s,d)}catch(e){var l=new Intl.DisplayNames([i],{type:"script"}).of(c);return Object(ue.e)(t.getString("TranscriptLanguage"),s,l)}}return s},me={"op-xxs":{from:0,to:274},"op-xs":{from:275,to:319},"op-s":{from:320,to:479},"op-m":{from:480,to:639},"op-l":{from:640,to:1023},"op-xl":{from:1024,to:1365},"op-xxl":{from:1366,to:1919},"op-xxxl":{from:1920,to:Number.MAX_VALUE}},_e=n(763),he=n(804),be=function(){function e(e,t,n,a,i,r){var o=this;this.context=e,this.retryPlayer=t,this.sendErrorPlaybackTelemetry=n,this.reloadUpdatedVideo=a,this.shouldRetryOnDecodeError=i,this.shouldDisableRetryOnError=r,this.isCompletedLiveEvent=!1,this.isUpdated=!1,this.isDeleted=!1,this.currentRetryCount=0,this.maxRetryCount=he.a.maxRetryCount,this.reloadOrRetryPlayer=function(e,t){var n,a;void 0===t&&(t={}),o.shouldRetryOnDecodeError?!0!==t.skipErrorBox&&o.context.streamSession.showErrorBox({}):t.skipErrorBox&&o.context.streamSession.hideErrorBox(),t.forceTech&&(e.options().techOrder=[t.forceTech],null===(a=(n=e).reset)||void 0===a||a.call(n)),o.isUpdated&&o.reloadUpdatedVideo?o.reloadUpdatedVideo():o.retryPlayer(!0,o.currentRetryCount)}}return e.prototype.handleError=function(e,t){var n=e.code.toString(16),a=!!e.message&&e.message.indexOf("manifest")>1,i=e.serviceErrorCode,r=e.correlationId,o=e.isErrorExpected;this.currentRetryCount<this.maxRetryCount&&this.attemptRetry(e,t)?this.currentRetryCount++:this.updateErrorAndSendErrorHeartbeat(n,a,t,i,r,o)},e.prototype.dispose=function(){this.cancelCallback()},e.prototype.updateErrorBox=function(e,t,n,a){var r,o,c,d,l=this,u=this.getEmbedPlaybackErrorHandlerResources(),f={titleStr:u.ErrorCodeDefault,message:"",resources:u.errorbox,customPrimaryButton:{label:u.errorbox.retry,clicked:function(){l.reloadOrRetryPlayer(e,{skipErrorBox:!0})}},isResponsiveToHostEnabled:Object(s.e)(this.context.settingsStore.getSettingObject("isResponsiveCSSToHostEnabled","boolean"))&&!Object(s.e)(this.context.settingsStore.getSettingObject("60588","boolean")),reload:this.reloadUpdatedVideo};switch(f.errorCode="0x"+t,d=Object(_.n)("Playback error occured. error code "+f.errorCode),t.substring(1)){case he.i.networkErrUnknown:f.titleStr=u.ErrorCode200000,f.message=u.ErrorCode200000Subtext;break;case he.i.networkErrHttpUserAuthRequired:f.titleStr=u.VideoPlayerErrorCode200191,f.message=u.VideoPlayerErrorCode200191Subtext;break;case he.i.networkErrHttpUrlNotFound:this.isDeleted?(f.titleStr=u.VideoPlayerErrorCode200194Manifest,f.message=u.VideoPlayerErrorCode200194ManifestSubtext,f.noActions=!0):this.isUpdated?(f.titleStr=u.VideoUpdatedDescription,f.message=u.VideoUpdatedSubtext,f.noActions=!1,f.customPrimaryButton.label=u.VideoUpdatedButtonLabel):n?(f.titleStr=u.VideoPlayerErrorCode200194Manifest,f.message=u.VideoPlayerErrorCode200194ManifestSubtext):(f.titleStr=u.VideoPlayerErrorCode200194FragmentPlayback,f.message=u.VideoPlayerErrorCode200194FragmentPlaybackSubtext,f.messageLink=he.o.PlaybackErrors);break;case he.i.networkErrTimeout:case he.i.networkErrError:case he.i.networkErrNoInternet:f.titleStr=u.VideoPlayerErrorCode200258,f.message=u.VideoPlayerErrorCode200258Subtext,f.messageLink=he.o.PlaybackErrors;break;case he.i.networkErrNoAuth:f.titleStr=u.ErrorCode200000,f.message=u.ErrorCode200000Subtext;break;case he.i.decodeErrUnknown:f.titleStr=u.ErrorCode300000,f.message=u.ErrorCode300000Subtext;break;case he.i.srcErrParseSegment:f.titleStr=u.VideoPlayerErrorCode400000,f.message=u.ErrorCode300000Subtext;break;case he.i.srcErrUnsupportedPresentation:f.titleStr=u.ErrorCode300000,f.message=u.ErrorCode600000Subtext;break;case he.i.srcErrInvalidSegment:f.titleStr=u.VideoPlayerErrorCode400000,f.message=u.ErrorCode300000Subtext;break;case he.i.srcErrLiveNoSegments:case he.i.networkErrNotAcceptable:"UnsupportedH264Level"===a?(f.titleStr=u.ErrorCodeUnsupportedH264Level,f.message=u.ErrorCodeUnsupportedH264LevelSubtext):(f.titleStr=u.VideoPlayerErrorCode400000,f.message=u.VideoPlayerErrorCode400000Subtext);break;case he.i.encryptErrKeyAcquire:case he.i.encryptErrDecryption:f.titleStr=u.VideoPlayerErrorLoadingVideo,f.message=u.ErrorCode300000Subtext;break;case he.i.srcPlayerMismatchUnknown:f.noActions=!0,f.titleStr=u.ErrorCode600000,f.message=u.ErrorCode600000Subtext;break;case he.i.srcPlayerMismatchFlashNotInstalled:Object(i.o)((null===(c=null===(o=null===(r=window.navigator)||void 0===r?void 0:r.plugins)||void 0===o?void 0:o[he.s])||void 0===c?void 0:c.version)||null)?(f.titleStr=u.ErrorCode600001UnsupportedFlashInstalled,f.message=u.ErrorCode600001UnsupportedFlashInstalledSubtext):(f.titleStr=u.ErrorCode600001,f.message=u.ErrorCode600001Subtext),f.noActions=!0,f.messageLink=he.o.PlaybackErrors;break;case he.i.srcPlayerMismatchFlashAndSilverlight:f.noActions=!0,f.titleStr=u.ErrorCode600001,f.message=u.ErrorCode600001Subtext;break;case he.i.noCodecAvailableiOs:f.noActions=!0,f.titleStr=u.ErrorCode50400000,f.message=u.ErrorCode50400000Subtext;break;default:f.titleStr=u.ErrorCodeDefault,f.message="",d=Object(_.n)("Unknown playback error")}this.context.streamSession.showErrorBox(f,d,"PlayerError")},e.prototype.attemptRetry=function(t,n){var a=this;if(this.shouldDisableRetryOnError)return!1;if(this.isFlash401Error(t.message)||this.is401ErrorCode(t.code))return this.reloadOrRetryPlayer(n,{skipErrorBox:!0}),!0;var i=this.getTechIndependentErrorCode(t);if(this.shouldAttemptFlashSSFallback(i,n))return this.postDelayed(e.retryDelayForAbortErrorFlashSSTechFallbackMS,function(){a.reloadOrRetryPlayer(n,{forceTech:he.e.Flash})}),!0;if(this.shouldRetryOnDecodeError&&this.isGenericOrMediaError(i)){if(this.isActiveTechDash(n))return this.postDelayed(e.retryDelayForDashDecodeErrorsMS,function(){a.reloadOrRetryPlayer(n)}),!0;if(this.isActiveTechHtml5(n))return this.postDelayed(e.retryDelayForHLSMS,function(){a.reloadOrRetryPlayer(n)}),!0}return!!this.isFlashKeyTimeoutError(t.message)&&(this.postDelayed(e.retryDelayForFlashKeyAcquireTimeout,function(){a.reloadOrRetryPlayer(n)}),!0)},e.prototype.updateErrorAndSendErrorHeartbeat=function(e,t,n,a,i,r){this.updateErrorBox(n,e,t,a),n.isFullscreen()&&n.exitFullscreen();var o={errorCode:e,downloadFailed:n&&n.telemetryData?n.telemetryData.downloadFailed:void 0,message:n&&n.getData&&n.getData.errorMessage?n.getData.errorMessage():void 0,serviceErrorCode:a,meTACorrelationId:i,isExpected:r};this.sendErrorPlaybackTelemetry(C,o)},e.prototype.getTechIndependentErrorCode=function(e){var t=e.code.toString(16);return t&&t.substring(1)},e.prototype.postDelayed=function(e,t){this.cancelCallback(),this.callbackTimerPromise=window.setTimeout(function(){t()},e)},e.prototype.cancelCallback=function(){this.callbackTimerPromise&&(window.clearTimeout(this.callbackTimerPromise),this.callbackTimerPromise=null)},e.prototype.shouldAttemptFlashSSFallback=function(e,t){var n,a,r;return e===he.i.abortedErrUnknown&&Object(i.e)()&&this.isActiveTechDash(t)&&this.isFlashSSTechSupported()&&!t.hasStarted()&&!Object(i.o)((null===(r=null===(a=null===(n=window.navigator)||void 0===n?void 0:n.plugins)||void 0===a?void 0:a[he.s])||void 0===r?void 0:r.version)||null)},e.prototype.isActiveTechHtml5=function(e){return e.currentTechName()===he.e.Html5},e.prototype.isActiveTechDash=function(e){return e.currentTechName()===he.e.AzureHtml5JS},e.prototype.isFlashSSTechSupported=function(){var e,t=null===(e=null===amp||void 0===amp?void 0:amp.getTech)||void 0===e?void 0:e.call(amp,he.e.Flash);return null==t?void 0:t.isSupported()},e.prototype.isFlash401Error=function(e){return!!e&&e===he.r.ErrorMessageKeyAcquireAuthFailFlash},e.prototype.is401ErrorCode=function(e){var t=e.toString(16),n=t.length-7;return t.substring(n)===he.i.networkErrHttpUserAuthRequired},e.prototype.isFlashKeyTimeoutError=function(e){return!!e&&e===he.r.ErrorMessageKeyAcquireTimeoutFlash},e.prototype.isGenericOrMediaError=function(e){return e===he.i.decodeErrUnknown||e===he.i.unknownError},e.prototype.getString=function(e){return this.context.localization.getString(e)},e.prototype.getEmbedPlaybackErrorHandlerResources=function(){return{errorbox:{sessionIdLabel:this.getString("SessionIDText"),playbackSessionIdLabel:this.getString("PlaybackSessionIdText"),errorCodeMessage:this.getString("VideoPlayerErrorCode"),retry:this.getString("TryAgain"),learnMore:this.getString("LearnMore")},reportAnIssue:this.getString("ReportAnIssueBtnTxt"),ErrorCode200000:this.getString("Err200000"),ErrorCode200000Subtext:this.getString("Err200000Subtxt"),VideoPlayerErrorCode200191:this.getString("Err200191"),VideoPlayerErrorCode200191Subtext:this.getString("Err200191Subtxt"),VideoPlayerErrorLoadingVideo:this.getString("ErrLoadingVideo"),VideoPlayerErrorCode200194Manifest:this.getString("Err200194Manifest"),VideoPlayerErrorCode200194ManifestSubtext:this.getString("Err200194ManifestSubtxt"),VideoUpdatedDescription:this.getString("VideoUpdatedDesc"),VideoUpdatedSubtext:this.getString("VideoUpdatedSubtxt"),VideoUpdatedButtonLabel:this.getString("VideoUpdatedBtnLabel"),EncoderErrorLink:this.getString("EncoderErrorLink"),VideoPlayerErrorCode200194FragmentPlayback:this.getString("Err200194FragmentPlayback"),VideoPlayerErrorCode200194FragmentPlaybackSubtext:this.getString("Err200194FragmentPlaybackSubtxt"),VideoPlayerErrorCode200258:this.getString("Err200258"),VideoPlayerErrorCode200258Subtext:this.getString("Err200258Subtxt"),VideoPlayerErrorCode20025c:this.getString("Err200000"),VideoPlayerErrorCode20025cSubtext:this.getString("Err200000Subtxt"),ErrorCode300000:this.getString("Err300000"),ErrorCode300000Subtext:this.getString("Err300000Subtxt"),VideoPlayerErrorCode400000:this.getString("Err400000"),ErrorCode600000Subtext:this.getString("Err600000Subtext"),ErrorCode600000:this.getString("Err600000"),VideoPlayerErrorCode400000Subtext:this.getString("Err400000Subtext"),ErrorCode600001UnsupportedFlashInstalled:this.getString("Err600001UnsupportedFlash"),ErrorCode600001UnsupportedFlashInstalledSubtext:this.getString("Err600001UnsupportedFlashSubtxt"),ErrorCode600001:this.getString("Err600001"),ErrorCode600001Subtext:this.getString("Err600001Subtxt"),ErrorCode50400000:this.getString("Err50400000"),ErrorCode50400000Subtext:this.getString("Err50400000Subtxt"),ErrorCodeUnsupportedH264Level:this.getString("ErrUnsupportedH264Level"),ErrorCodeUnsupportedH264LevelSubtext:this.getString("ErrUnsupportedH264LevelSubtxt"),ErrorCodeDefault:this.getString("ErrCodeDefault")}},e.retryDelayForHLSMS=500,e.retryDelayForDashDecodeErrorsMS=1e3,e.retryDelayForAbortErrorFlashSSTechFallbackMS=50,e.retryDelayForFlashKeyAcquireTimeout=100,e}(),ge=n(805),ve=[L,A,R,N,F,H,G,z,Y,J,X,"audioEnhancementTurnedOn","audioEnhancementTurnedOff"],ye=[C],Se=Object(a.c)(Object(a.c)([],ye,!0),[Q],!1),De="EnhancedAudio",Ie="OriginalAudio",xe=Ie;function Ce(e){var t,n=[Ie,De,"",void 0];if(e){var a=e.currentAudioStreamList();if(a&&a.streams&&a.streams.length>1&&a.enabledIndices&&a.enabledIndices.length>0){var i=a.enabledIndices[0];t=a.streams[i].label,n.includes(t)||(t="CustomAudio")}}return t}function Oe(){var e={};return void 0!==document.hidden?e.hiddenPropertyName="hidden":void 0!==document.msHidden?e.hiddenPropertyName="msHidden":void 0!==document.webkitHidden&&(e.hiddenPropertyName="webkitHidden"),!!(document&&e&&e.hiddenPropertyName)&&!document[e.hiddenPropertyName]}var we=function(e){if(e&&e.videoBufferData){var t=e.videoBufferData();if(t&&t.downloadRequested&&t.downloadRequested.mediaTime&&t.downloadRequested.durationInSec)return Math.floor(t.downloadRequested.durationInSec)}},Ee=function(e){return e&&e.data&&e.data.telemetryProperties?e.data.telemetryProperties:{}};function Ae(e){return e?e.replace(/--[a-zA-Z]+ scrubbed--/gi,"--tokenscrubbed--"):e}var Le,ke=function(){function e(){this.map={}}return e.prototype.add=function(e,t){this.map[e]?this.map[e].push(t):this.map[e]=[t]},e.prototype.sortKeys=function(){var e=this;Object.keys(this.map).forEach(function(t){e.map[t]&&e.map[t].sort(function(e,t){return(t.start||0)-(e.start||0)})})},e.prototype.pop=function(e){var t=this.map[e];if(t&&0!==t.length)return t.splice(t.length-1)[0]},e}(),Me=function(){function e(e){this.sizeSoftLimit=e,this.segmentMap=new Map}return e.prototype.add=function(e){var t,n=this.getKey(e);if(n)return this.segmentMap.has(n)?void(null===(t=this.segmentMap.get(n))||void 0===t||t.push(e)):(this.segmentMap.set(n,[e]),void this.pruneTrackedSegments())},e.prototype.has=function(e){var t=this.getKey(e);return!!t&&this.segmentMap.has(t)},e.prototype.update=function(e){var t=this.getKey(e);if(t){var n=this.segmentMap.get(t);if(n&&!(n.length<=0)){var i=n[n.length-1];n[n.length-1]=Object(a.e)(Object(a.e)({},i),e)}}},e.prototype.delete=function(e){var t=this.getKey(e);return!!t&&this.segmentMap.delete(t)},e.prototype.clear=function(){this.segmentMap.clear()},e.prototype.size=function(){return this.segmentMap.size},Object.defineProperty(e.prototype,"segments",{get:function(){return Array.from(this.segmentMap.values()).reduce(function(e,t){return e.concat(t)},[])},enumerable:!1,configurable:!0}),e.prototype.pruneTrackedSegments=function(){if(!(this.segmentMap.size<=this.sizeSoftLimit))for(var e=0,t=Array.from(this.segmentMap.entries());e<t.length;e++){var n=t[e],a=n[0],i=n[1];if(this.segmentMap.size<=this.sizeSoftLimit)return;"Completed"===i[i.length-1].state&&this.segmentMap.delete(a)}},e.prototype.getKey=function(e){if(e.telemetryItems){var t=e.telemetryItems,n=t.segmentTime,a=t.track,i=t.quality;if(void 0!==n&&this.isValidString(a)&&this.isValidString(i))return"".concat(a,"-").concat(i,"-").concat(n)}},e.prototype.isValidString=function(e){return null!=e&&""!==e.trim()},e}(),Pe=function(){function e(e,t,n){void 0===n&&(n=5);var a=this;this.loggingService=t,this.trackedSegments=new Me(n),e.addEventListener("onDownloadRequestStarted",function(e,t){return a.onDownloadStartedHandler(t)}),e.addEventListener("onDownloadRequestEnded",function(e,t){return a.onDownloadEndedHandler(t)}),e.addEventListener("ended",function(){a.clear()})}return Object.defineProperty(e.prototype,"segments",{get:function(){return this.trackedSegments.segments},enumerable:!1,configurable:!0}),e.prototype.clear=function(){this.trackedSegments.clear()},e.prototype.onDownloadStartedHandler=function(e){var t;try{if("mediaSegment"!==e.segmentType)return;var n=this.convertToSegment(e);if(!(null===(t=n.telemetryItems)||void 0===t?void 0:t.correlationId))return void this.loggingService.warnThin("VideoPlayerError",this.getWarning("Missing correlationid in DownloadRequestStartedEvent payload"));n.state="Pending",n.requestStartTime=performance.now(),this.trackedSegments.add(n)}catch(e){this.loggingService.warnThin("VideoPlayerError",this.getWarning(e))}},e.prototype.onDownloadEndedHandler=function(e){var t;try{if("mediaSegment"!==e.segmentType)return;var n=this.convertToSegment(e);if(!(null===(t=n.telemetryItems)||void 0===t?void 0:t.correlationId))return void this.loggingService.warnThin("VideoPlayerError",this.getWarning("Missing correlationid in DownloadRequestEndedEvent payload"));if(!this.trackedSegments.has(n))return void this.loggingService.warnThin("VideoPlayerError",this.getWarning("Unable to find a tracked segment with correlationid ".concat(n.telemetryItems.correlationId)));n.state="onLoaded"===e.msg?"Completed":"Failed",n.requestEndTime=performance.now(),this.trackedSegments.update(n)}catch(e){this.loggingService.warnThin("VideoPlayerError",this.getWarning(e))}},e.prototype.convertToSegment=function(e){var t=new URL(e.url);return{url:e.url,telemetryItems:Object(a.e)(Object(a.e)({},this.getTelemetryItemsFromQsp(t)),{afdReferenceId:this.getAfdHeader(e.headers)}),retryCount:e.retryCount}},e.prototype.getTelemetryItemsFromQsp=function(e){function t(t){var n;return null!==(n=e.searchParams.get(t))&&void 0!==n?n:void 0}return{correlationId:t("correlationid"),part:t("part"),quality:t("quality"),segmentTime:function(e){var n=t("segmentTime");if(n){var a=parseInt(n,10);if(!isNaN(a))return a}}(),track:t("track")}},e.prototype.getAfdHeader=function(e){return e["x-msedge-ref"]},e.prototype.getWarning=function(e){return{message:"SegmentRequestTracker: ".concat(e),stack:"",result:"Warning"}},e}();function Te(e,t){var n=Ue(e),a=e.fetchStart>0?e.responseEnd-e.fetchStart:0,i={redirectDur:e.redirectEnd-e.redirectStart,dnsDur:e.domainLookupEnd-e.domainLookupStart,tcpHandshakeDur:e.connectEnd-e.connectStart,secureConnDur:e.secureConnectionStart>0?e.connectEnd-e.secureConnectionStart:0,responseDur:e.responseEnd-e.responseStart,fetchStToRespEndDur:a,reqStToRespEndDur:e.requestStart>0?e.responseEnd-e.requestStart:0,networkDur:n>0?e.responseEnd-n:0,startTimeMs:e.startTime,endTimeMs:e.startTime+e.duration,durationMs:e.duration,connectStart:e.connectStart,connectEnd:e.connectEnd,requestStart:e.requestStart,responseStart:e.responseStart,responseEnd:e.responseEnd,transferSize:e.transferSize,isCdnCacheHit:t.isCdnCacheHit||!1,encodedBodySize:e.encodedBodySize,decodedBodySize:e.decodedBodySize,workerStart:e.workerStart,resourceName:t.resourceAlias||"mis",correlationId:t.correlationId,responseStatus:t.responseStatus,additionalInfo:JSON.stringify(t.additionalInfo),afdRefId:t.afdRefId};if(t.totalClientWaitTimeMs&&(i.clientEventLoopTimeMs=t.totalClientWaitTimeMs-a),!t.isCdnCacheHit&&!Fe(e)&&(e.serverTiming||t.customServerTiming)){var r={},o=0,s=e.serverTiming||[];t.customServerTiming&&(s=s.concat(t.customServerTiming)),s.forEach(function(e){r[e.name]=e.duration,"TotalRequest"!==e.name&&"spclientservicerequestduration"!==e.name||(o=e.duration)}),i.networkDur-=o,i.serverTiming=JSON.stringify(r)}return i}function Ue(e){return e.redirectStart>0?e.redirectStart:e.fetchStart}function Fe(e){return 0===e.transferSize}var He="stream-bundle",Re="DashManifestFetch",Ne="ManifestFetch",Be="ItemMetadata",je="EcsSetting",Ve="ProgressiveDownload",ze="InitSegment",Ge="MediaSegment",Ke=((Le={}).EcsSetting={isCore:!0},Le);function We(e,t,n){var a=t&&t.pop(e);if(void 0!==a)return a;var i=void 0;if(e.includes(He)){var r=e.split("?");if(r&&r.length>=1){var o=r[0].match("([^/]*)$");i=o&&o[0]||void 0}}else e.match("_api/v2.*/drives/.*/items/.*select=media.+source")?i=Be:e.match("https://config.edge.skype.com/config/.*agents=OnePlayer")?i=je:!n&&e.includes("download.aspx")?i=Ve:e.match("videomanifest(?=.*format=dash)")?i=Re:e.match("videomanifest(?=.*format=hls-vnext)(?=.*part=mediaplaylist)")?i="HlsPlaylistManifestFetch":e.match("videomanifest(?=.*format=hls-vnext)")?i="HlsManifestFetch":e.includes("videomanifest")&&(i=Ne);if(i&&t&&void 0!==(a=t.pop(i)))return a;if(!i){var s=e.match("transform/videotranscode.*part=(initsegment|mediasegment)");s&&s.length>=2&&(i="initsegment"===s[1]?ze:Ge)}return i?{resourceAlias:i}:void 0}function qe(e,t){if(void 0===t&&(t=!0),!e.length)return{clientTime:0};e.sort(function(e,t){return e.start!==t.start?e.start-t.start:e.end-t.end});for(var n,a=e[0],i=a.end-a.start,r={spoTimeMs:0,metaTimeMs:0,clientMetaNetworkTimeMs:0,metaSpoNetworkTimeMs:0,remainingNetworkTimeMs:0},o={spoTimeMs:0,metaTimeMs:0,clientMetaNetworkTimeMs:0,metaSpoNetworkTimeMs:0,remainingNetworkTimeMs:0},s=0,c=e;s<c.length;s++){var d=c[s];d.start<a.end?(d.end>a.end&&(i+=d.end-a.end),a.backendTiming&&((n=a.backendTiming).clientMetaNetworkTimeMs>0||n.metaSpoNetworkTimeMs>0||n.metaTimeMs>0)&&!(d.end-d.start>a.end-a.start)||d.backendTiming&&(a.backendTiming=d.backendTiming),a.end=Math.max(a.end,d.end)):(i+=d.end-d.start,a&&Ye(a.backendTiming?a.backendTiming:Je(a),r),a=d),t&&d&&d.backendTiming&&Ye(d.backendTiming,o)}return a.backendTiming&&Ye(a.backendTiming,r),{clientTime:i,backendTime:r,backendTimeWithOverlap:o}}function Qe(e,t){if(e){var n=t&&t.actualBlockTimeMS,a=Ue(e),i=void 0!==n?e.responseEnd-n:a;if(i!==e.responseEnd){var r={start:i,end:e.responseEnd};if(Fe(e))return r;if(t&&t.isCdnCacheHit||(!e.serverTiming||0===e.serverTiming.length)&&(!t||!t.customServerTiming))return r.backendTiming=Je(r),r;var o=e.serverTiming;t&&t.customServerTiming&&(o=(o||[]).concat(t.customServerTiming));var s,c=void 0!==n?n/(e.responseEnd-a):void 0,d=0,l=0,u=0,f=0;return o.forEach(function(e){switch(e.name){case"TotalRequest":s=e.duration;break;case"Provider":d=e.duration;break;case"StreamRead":l=e.duration;break;case"SharePoint":u=e.duration;break;case"spclientservicerequestduration":f=e.duration}}),f?r.backendTiming={spoTimeMs:f,metaTimeMs:0,metaSpoNetworkTimeMs:0,clientMetaNetworkTimeMs:0,remainingNetworkTimeMs:r.end-r.start-f}:void 0!==s&&(r.backendTiming={spoTimeMs:u,metaTimeMs:s-(d+l),metaSpoNetworkTimeMs:d+l-u,clientMetaNetworkTimeMs:e.responseEnd-a-s,remainingNetworkTimeMs:0}),void 0!==c&&r.backendTiming&&(r.backendTiming.spoTimeMs=Math.round(r.backendTiming.spoTimeMs*c),r.backendTiming.metaTimeMs=Math.round(r.backendTiming.metaTimeMs*c),r.backendTiming.metaSpoNetworkTimeMs=Math.round(r.backendTiming.metaSpoNetworkTimeMs*c),r.backendTiming.clientMetaNetworkTimeMs=Math.round(r.backendTiming.clientMetaNetworkTimeMs*c)),r}}}function Ye(e,t){t.spoTimeMs+=e.spoTimeMs,t.clientMetaNetworkTimeMs+=e.clientMetaNetworkTimeMs,t.metaSpoNetworkTimeMs+=e.metaSpoNetworkTimeMs,t.metaTimeMs+=e.metaTimeMs,t.remainingNetworkTimeMs+=e.remainingNetworkTimeMs}function Je(e){return{spoTimeMs:0,metaTimeMs:0,clientMetaNetworkTimeMs:0,metaSpoNetworkTimeMs:0,remainingNetworkTimeMs:e.end-e.start}}var Xe=performance||Date,Ze=function(){function e(e,t,n,r,o,c,d,l,u,f){var p=this;this.onePlayerLogging=r,this.enableW3CTelemetry=c,this.isResetNSFieldsOnFallbackEnabled=d,this.fileSizeInBytes=l,this.isNativeDownloadSizelogEnabled=u,this.isProgressiveCorrelationIdEnabled=f,this.lastTraceId="",this.loadTimeSinceStartSeconds=0,this.currentPlaybackRateTime=0,this.playbackRates=["0.5","1","1.2","1.5","1.8","2"],this.playbackRatesTimes={},this.fallbackCount=0,this.videoSegmentCacheHitCount=0,this.videoSegmentCacheMissCount=0,this.nonCdnVideoSegmentCount=0,this.initSegmentsTimeSpentMs=0,this.firstSegmentsTimeSpentMs=0,this.manifestFetchTimeSpentMs=0,this.aesKeyFetchTimeSpentMs=0,this.timeSinceSourceSetMs=0,this.videoMetadataInfo={},this.isFirstTimeCanPlayThrough=!0,this.isHybridPlaybackEnabled=!1,this.totalBlockedBySpoMs=0,this.totalBlockedByMetaMs=0,this.totalNetworkClientToMetaMs=0,this.totalNetworkMetaToSpoMs=0,this.totalBlockedBySpoWithOverlapMs=0,this.totalBlockedByMetaWithOverlapMs=0,this.totalNetworkClientToMetaWithOverlapMs=0,this.totalNetworkMetaToSpoWithOverlapMs=0,this.totalRemainingNetworkWithOverlapMs=0,this.initialSourceSet=!0,this.isRefactorTelemetryEnabled=!1,this.isFinegrainedBandwidthTelemetryEnabled=!1,this.augmentedNetworkRequests=new ke,this.totalRetryCountOnSegmentDownload=0,this.isPrefetchProgressiveEnabled=!1,this.isFastSourceSetEnabled=!1,this.isLoaded=!1,this.isVideoPlaybackTypeEnabled=!1,this.isTimeSinceSourceSetEnabled=!1,this.seekTracker={seeking:!1,seekTimeStart:Xe.now(),enterSeek:function(){p.bufferingTracker.state&&p.bufferingTracker.send(),p.seekTracker.seeking=!0,p.seekTracker.seekTimeStart=Xe.now()}},this.noiseSuppressionTracker={currentTrack:xe,totalPlayTime:0,totalOriginalTrackPlayedOnStartup:0,rebufferingCount:0,totalRebufferingTime:0,maxRebufferTime:0,enhancedPlaybackReadyFired:!1,isCurrentlyRebuffering:!1,toggledAudioEnhancement:function(e){this.currentTrack=e?De:Ie,this.enhancedPlaybackReadyFired=!1},setFormatToProgressive:function(){this.currentTrack=xe,this.enhancedPlaybackReadyFired=!1},isEnabled:function(){return this.currentTrack===De},reset:function(){this.setFormatToProgressive(),this.totalPlayTime=0,this.totalOriginalTrackPlayedOnStartup=0,this.rebufferingCount=0,this.totalRebufferingTime=0,this.maxRebufferTime=0}},this.playingTracker={startTime:0,endTime:0,added:!1,lastCheckedTime:0,arrayOfTimes:[],arrayOfTimesFullscreen:[],uniqueArrayOfTimesFullscreen:[],totalSecondsWatched:0,update:function(e){if(e===p.playingTracker.lastCheckedTime+1&&(p.playingTracker.added=!1,p.videoPlayer&&p.videoPlayer.playbackRate()>0)){var t=1/p.videoPlayer.playbackRate();p.playingTracker.totalSecondsWatched+=t,p.noiseSuppressionTracker.isEnabled()&&(p.noiseSuppressionTracker.enhancedPlaybackReadyFired?p.noiseSuppressionTracker.totalPlayTime+=t:p.noiseSuppressionTracker.totalOriginalTrackPlayedOnStartup+=t)}e!==p.playingTracker.lastCheckedTime&&e!==p.playingTracker.lastCheckedTime+1&&(p.playingTracker.pushOn(),p.playingTracker.startTime=e),p.playingTracker.lastCheckedTime=e},pushOn:function(){p.playingTracker.endTime=p.playingTracker.lastCheckedTime,p.playingTracker.startTime!==p.playingTracker.endTime&&(p.playingTracker.arrayOfTimes.push([p.playingTracker.startTime,p.playingTracker.endTime]),p.playingTracker.added=!0)},getArrayOfTimes:function(){var e=[];e=p.playingTracker.arrayOfTimes.slice();var t=p.videoPlayer?Math.round(p.videoPlayer.currentTime()):0;return p.playingTracker.added||p.playingTracker.startTime===t||e.push([p.playingTracker.startTime,t]),e},getUniqueArrayOfTimes:function(){var e=p.playingTracker.getArrayOfTimes().slice();e.sort(function(e,t){return e[0]-t[0]});var t=[];if(e.length>1){t.push(e[0]);for(var n=1;n<e.length;n++)if(e[n][0]<=t[t.length-1][1]){if(e[n][1]>t[t.length-1][1]){var a=t[t.length-1][0],i=e[n][1];t.pop(),t.push([a,i])}}else t.push(e[n])}else t=e;return t},getPlayTime:function(){for(var e=p.playingTracker.getArrayOfTimes(),t=0,n=0;n<e.length;n++)t+=e[n][1]-e[n][0];return Math.round(t)},getUniquePlayTime:function(){for(var e=p.playingTracker.getUniqueArrayOfTimes(),t=0,n=0;n<e.length;n++)t+=e[n][1]-e[n][0];return Math.round(t)},reset:function(){p.playingTracker.startTime=0,p.playingTracker.endTime=0,p.playingTracker.lastCheckedTime=0,p.playingTracker.totalSecondsWatched=0,p.playingTracker.added=!1,p.playingTracker.arrayOfTimes=[],p.playingTracker.arrayOfTimesFullscreen=[],p.playingTracker.uniqueArrayOfTimesFullscreen=[]}},this.bufferingTracker={aboveRebufferThreshold:!1,state:!1,bufferingTime:0,bufferingTimeStart:0,bufferingTimeTotal:0,maxBufferingTime:0,count:0,enterBuffering:function(){p.loadingTracker.firstPlay&&(p.bufferingTracker.state&&p.bufferingTracker.send(),p.bufferingTracker.bufferingTimeStart=Xe.now(),p.bufferingTracker.state=!0,p.bufferingTracker.count++),p.noiseSuppressionTracker.isCurrentlyRebuffering=p.noiseSuppressionTracker.isEnabled()&&p.noiseSuppressionTracker.enhancedPlaybackReadyFired},send:function(){if(p.bufferingTracker.state){var e=Math.abs(Xe.now()-p.bufferingTracker.bufferingTimeStart);e>10&&(p.bufferingTracker.bufferingTime=e,p.bufferingTracker.maxBufferingTime=Math.max(p.bufferingTracker.maxBufferingTime,p.bufferingTracker.bufferingTime),p.bufferingTracker.bufferingTimeTotal+=p.bufferingTracker.bufferingTime,p.noiseSuppressionTracker.isEnabled()&&p.noiseSuppressionTracker.isCurrentlyRebuffering&&(p.noiseSuppressionTracker.totalRebufferingTime+=p.bufferingTracker.bufferingTime,p.noiseSuppressionTracker.maxRebufferTime=Math.max(p.noiseSuppressionTracker.maxRebufferTime,p.bufferingTracker.bufferingTime),p.noiseSuppressionTracker.rebufferingCount++)),p.bufferingTracker.state=!1}},reset:function(){p.bufferingTracker.bufferingTime=0,p.bufferingTracker.bufferingTimeStart=0,p.bufferingTracker.bufferingTimeTotal=0,p.bufferingTracker.count=0,p.bufferingTracker.state=!1,p.bufferingTracker.maxBufferingTime=0}},this.loadingTracker={loadTime:0,canplaythrough:!1,suspended:!1,loadTimeStart:Xe.now(),duration:null,firstPlay:!1,videoPlayerLoaded:!1,endedReached:!1,videoElementUsed:!1,_wasPageInBackgroundDuringLoad:!1,_nativeDownloadedBytes:void 0,updateLoadTime:function(){p.videoPlayer&&!p.videoPlayer.error()&&(p.loadingTracker.duration=p.videoPlayer.duration().toFixed(2)),p.loadingTracker.loadTime=Math.abs(Math.round(Xe.now()-p.loadingTracker.loadTimeStart))},wasPageInBackground:function(){return p.loadingTracker.canplaythrough||p.loadingTracker._wasPageInBackgroundDuringLoad||(p.loadingTracker._wasPageInBackgroundDuringLoad=p.loadingVideoTelemetry.getTimeInBackgroundMS()>0),p.loadingTracker._wasPageInBackgroundDuringLoad},nativelyDownloadedBytes:function(){var e=p.selectedSrcMimeType===de.t.hls||p.selectedSrcMimeType===de.t.progressive;return!p.loadingTracker.canplaythrough&&p.isNativeDownloadSizelogEnabled&&e&&(p.loadingTracker._nativeDownloadedBytes=function(e,t){if(!(!e||!t||t<=0||e.duration()<=0)){var n=e.buffered();if(n&&!(n.length<=0)){var a=n.end(0)/e.duration()*t;if(!isNaN(a))return Math.round(a)}}}(p.videoPlayer,p.fileSizeInBytes)),p.loadingTracker._nativeDownloadedBytes},reset:function(){p.loadingTracker.loadTime=0,p.loadingTracker.loadTimeStart=Xe.now(),p.loadingTracker.duration=null,p.loadingTracker.firstPlay=!1,p.loadingTracker.endedReached=!1,p.loadingTracker.canplaythrough=!1,p.loadingTracker.videoPlayerLoaded=!1,p.loadingTracker.suspended=!1,p.loadingTracker._wasPageInBackgroundDuringLoad=!1,p.loadingTracker._nativeDownloadedBytes=void 0}},this.initVideoPlayerReference=function(e){var t,n,a;p.videoPlayer=e,p.setEventListeners(),p.lastTraceId="",p.loadTimeSinceStartSeconds=0,p.previousVolume=void 0,p.previousPlaybackRate=void 0,p.originalPlaybackRate=void 0,p.playbackRateChanged=!1,p.sourceSetTimeoutId=void 0,p.GOPSize=void 0,p.meTACorrelationId=void 0,p.progressiveCorrelationId=void 0,p.selectedSrcMimeType=void 0,p.videoSegmentCacheHitCount=0,p.videoSegmentCacheMissCount=0,p.nonCdnVideoSegmentCount=0,p.initSegmentsTimeSpentMs=0,p.firstSegmentsTimeSpentMs=0,p.manifestFetchTimeSpentMs=0,p.aesKeyFetchTimeSpentMs=0,p.totalEngineBlockedByResponseMs=0,p.totalCoreBlockedByResponseMs=0,p.totalProgressiveDownloadTimeMs=0,p.totalBlockedBySpoMs=0,p.totalBlockedByMetaMs=0,p.totalNetworkClientToMetaMs=0,p.totalNetworkMetaToSpoMs=0,p.totalBlockedBySpoWithOverlapMs=0,p.totalBlockedByMetaWithOverlapMs=0,p.totalNetworkClientToMetaWithOverlapMs=0,p.totalNetworkMetaToSpoWithOverlapMs=0,p.totalRemainingNetworkWithOverlapMs=0,p.augmentedNetworkRequests=new ke,p.progressiveLoadStartTime=void 0,p.resetFallbackStates(),p.totalRetryCountOnSegmentDownload=0;var i=p.videoPlayer&&p.videoPlayer.options()||void 0;p.isPrefetchProgressiveEnabled=i&&i.html5&&void 0!==i.html5.prefetchedSrc||!1,p.isFastSourceSetEnabled=i&&i.fastSourceSet||!1,p.defaultBandwidthKbps=i&&(null===(n=null===(t=i.customPlayerSettings)||void 0===t?void 0:t.customHeuristicSettings)||void 0===n?void 0:n.defaultBandwidthKbps)||void 0,p.isFinegrainedBandwidthTelemetryEnabled=i&&(null===(a=i.azureHtml5JS)||void 0===a?void 0:a.enableFinegrainedBandwidthTelemetry)||!1,p.isLoaded=!1,p.timeSinceSourceSetMs=0,p.playbackRates&&p.playbackRates.length>0&&p.playbackRates.forEach(function(e){p.playbackRatesTimes[e]=0}),p.videoPlayer&&Object(s.e)(p.settingsStore.getSettingObject("enableRebufferingTelemetry","boolean"))&&(p.segmentRequestTracker=new Pe(p.videoPlayer,p.loggingService))},this.resetFallbackStates=function(){p.fallbackCount=0,p.fallbackInfo={}},this.sendAdhocPlaybackTelemetry=function(e,t){p.sendPlaybackTelemetry(e,t,void 0)},this.getPlaybackData=function(){return p.mergeTelemetryValues()},this.setEventListeners=function(){p.videoPlayer&&(p.videoPlayer.addEventListener(j,function(e){var t=Ee(e);0===p.loadTimeSinceStartSeconds&&t.triggerType===x&&(p.loadTimeSinceStartSeconds=Xe.now()/1e3,p.originalPlaybackRate=p.videoPlayer&&p.videoPlayer.playbackRate?p.videoPlayer.playbackRate():void 0,p.previousPlaybackRate=p.originalPlaybackRate,p.currentPlaybackRateTime=Xe.now()/1e3),p.sendPlaybackTelemetry(j,void 0,e)}),ve.forEach(function(e){p.videoPlayer&&p.videoPlayer.addEventListener(e,function(t,n){var a=!1;e!==z||p.closedCaptionContext.captionsWereEnabled||(p.closedCaptionContext.captionsWereEnabled=!0,a=!0),p.sendPlaybackTelemetry(e,void 0,t,n,a)})}),p.videoPlayer.addEventListener(M,function(){p.isRefactorTelemetryEnabled&&p.seekTracker.enterSeek()}),p.videoPlayer.addEventListener(P,function(){if(p.isRefactorTelemetryEnabled){p.bufferingTracker.state&&p.bufferingTracker.send();var e=p.videoPlayer?Math.round(p.videoPlayer.currentTime()):0;p.playingTracker.update(e)}}),p.videoPlayer.addEventListener(T,function(e,t){(!t||void 0===t.context||"bufferUnderrun"===t.context)&&p.isRefactorTelemetryEnabled&&(p.bufferingTracker.enterBuffering(),Object(s.e)(p.settingsStore.getSettingObject("enableRebufferingTelemetry","boolean"))&&function(e,t){var n=e.segments;e.clear(),n.forEach(function(e){t.appLogicThin("SegmentRequestTiming",function(e){return Object(a.e)(Object(a.e)({},e.telemetryItems),{state:e.state,requestStartTime:e.requestStartTime,requestEndTime:e.requestEndTime,retryCount:e.retryCount})}(e))})}(p.segmentRequestTracker,p.loggingService))}),p.videoPlayer.addEventListener(k,function(){p.isRefactorTelemetryEnabled&&(!p.loadingTracker.canplaythrough&&p.videoPlayer&&p.videoPlayer.trigger(x),p.loadingTracker.firstPlay||(p.loadingTracker.firstPlay=!0),p.bufferingTracker.send())}),p.videoPlayer.addEventListener(C,function(){0===p.loadingTracker.loadTime&&p.isRefactorTelemetryEnabled&&p.loadingTracker.updateLoadTime()}),p.videoPlayer.addEventListener("ended",function(e){p.sendPlaybackSummary()}),p.videoPlayer.addEventListener(U,function(){p.initialSourceSet&&p.isRefactorTelemetryEnabled&&(p.loadingTracker.videoElementUsed&&p.unloadData(),p.playingTracker.reset(),p.bufferingTracker.reset(),p.loadingTracker.reset(),p.noiseSuppressionTracker.reset(),p.initialSourceSet=!1,p.isTimeSinceSourceSetEnabled&&(p.timeSinceSourceSetMs=Xe.now())),p.isFirstTimeCanPlayThrough&&(p.timeAtmediaSourceSrcSetRequested=void 0,p.timeSpentWaitingForMediaSrcInitMS=void 0),Object(s.e)(p.settingsStore.getSettingObject("isDupSrcSetTimeoutPrevented","boolean"))&&p.sourceSetTimeoutId&&window.clearTimeout(p.sourceSetTimeoutId),p.sourceSetTimeoutId=window.setTimeout(function(){p.backgroundSourceSetTimeout=!Oe(),window.clearTimeout(p.sourceSetTimeoutId),p.sendPlaybackTelemetry(q,void 0,{data:{telemetryProperties:{triggerType:q}}})},2e4)}),p.videoPlayer.addEventListener(E,function(){window.clearTimeout(p.sourceSetTimeoutId),p.videoPlayer&&(p.isResetNSFieldsOnFallbackEnabled&&p.videoPlayer.currentType()&&p.videoPlayer.currentType().toLocaleLowerCase()===de.t.progressive&&p.noiseSuppressionTracker.setFormatToProgressive(),p.videoPlayer.currentAudioStreamList()&&p.videoPlayer.currentAudioStreamList().addEventListener("streamselected",function(){var e=p.videoPlayer&&p.videoPlayer.currentAudioStreamList().enabledIndices[0],t=p.videoPlayer&&null!=e&&p.videoPlayer.currentAudioStreamList().streams[e].label;if(t===Ie){if(p.noiseSuppressionTracker.toggledAudioEnhancement(!1),p.bufferingTracker.state&&p.noiseSuppressionTracker.isCurrentlyRebuffering){p.noiseSuppressionTracker.isCurrentlyRebuffering=!1;var n=Math.abs(Xe.now()-p.bufferingTracker.bufferingTimeStart);p.noiseSuppressionTracker.totalRebufferingTime+=n,p.noiseSuppressionTracker.maxRebufferTime=Math.max(p.noiseSuppressionTracker.maxRebufferTime,n),p.noiseSuppressionTracker.rebufferingCount++}}else t===De&&p.noiseSuppressionTracker.toggledAudioEnhancement(!0)}),p.videoPlayer.addEventListener("enhancedTrackReady",function(){p.noiseSuppressionTracker.enhancedPlaybackReadyFired=!0}))}),p.videoPlayer.addEventListener(Z,function(e,t){p.fallbackCount++;var n={},i=t.errorCode&&t.errorCode||t.error&&t.error.code,r=t.error&&t.error.message,o=Ae(r),s=p.loggingService.scrubErrorMessage(o||"");if(n["fallback".concat(p.fallbackCount,"_errorCode")]=i&&i.toString(16),n["fallback".concat(p.fallbackCount,"_mimeType")]=t.mimeType,n["fallback".concat(p.fallbackCount,"_message")]=s,void 0!==r){var c=r.match("track=(audio|video)");if(c){"video"===c[1]&&(n.fallbackSegmentType="video"),"audio"===c[1]&&(n.fallbackSegmentType="audio");var d=r.match("segmentTime=(\\d+)");d&&(n.fallbackSegmentStartTime=d[1]),n["fallback".concat(p.fallbackCount,"_meTACorrelationId")]=p.getMeTACorrelationId(r)}}p.fallbackInfo=Object(a.e)(Object(a.e)({},p.fallbackInfo),n),p.sendPlaybackTelemetry(Z,n,void 0)}),p.videoPlayer.addEventListener(w,function(){if(p.loadingTracker.videoElementUsed=!0,p.GOPSize=we(),!p.GOPSize&&p.videoPlayer&&p.videoPlayer.videoBufferData){var e=p.videoPlayer.videoBufferData();e&&e.addEventListener(amp.bufferDataEventName.downloadcompleted,p.getGOPSizeHandler)}}),p.videoPlayer.addEventListener("srcSelected",function(e,t){if(p.logAllProgressiveTimings&&p.progressiveCallObserver&&p.progressiveCallObserver.disconnect(),t&&t.src){var n=!1;if(t.src.type&&(p.selectedSrcMimeType=t.src.type,n="video/mp4"===t.src.type),t.src.src){var a=function(e){var n=Object(i.c)(t.src.src);if(n)return n.searchParams.get("correlationid");var a=/([&\?]+)correlationid=([^&#]*)/.exec(e);return a?a[2]:a}(t.src.src);a&&(p.isProgressiveCorrelationIdEnabled&&n?p.progressiveCorrelationId=a:p.meTACorrelationId=a),p.isVideoPlaybackTypeEnabled&&(p.videoPlaybackType=p._getVideoPlaybackPlayer(t.src.src)),p.logAllProgressiveTimings&&n&&p.enableW3CTelemetry&&p.observeProgressiveTiming(t.src.src,a)}}}),p.videoPlayer.addEventListener(B,function(e,t){var n=t.xhr,a=!(Object(s.e)(p.settingsStore.getSettingObject("isRemoveHeaderFetchForNonMetaHeuristicProfileEnabled","boolean"))&&!Object(s.e)(p.settingsStore.getSettingObject("60587","boolean")))||p.videoPlayer&&"MeTA"===p.videoPlayer.options().heuristicProfile,i=a?n.getResponseHeader("x-cache"):void 0,r=t.segmentType;if("onLoaded"===t.msg){var o=!(n.status>=200&&n.status<=299),c=t.bandwidthInfo.totalDownloadTimeMs,d=t.bandwidthInfo.requestStartTimeInMS;p.totalRetryCountOnSegmentDownload+=t.retryCount;var l=!o&&c>=20;if(p.isFirstTimeCanPlayThrough&&("mediaSegment"===r||"initSegment"===r)&&n.xmlHttpRequestDelegate){var u=a?n.getResponseHeader("x-msedge-ref"):"mis",f=void 0;if(p.enableW3CTelemetry){var m=n.xmlHttpRequestDelegate.responseURL.match("mediaSegment"===r?"track=([a-zA-Z]+).*quality=([a-zA-Z0-9]+).*segmentTime=([0-9]+).*[video|audio]Duration=([0-9]+)":"track=([a-zA-Z]+).*quality=([a-zA-Z0-9]+)");m&&(f={trackType:m.length>1&&m[1]||"mis",quality:m.length>2&&m[2]||"mis",segmentTime:m.length>3&&m[3]||"mis",segmentDuration:m.length>4&&m[4]||"mis"})}p.augmentedNetworkRequests.add(n.xmlHttpRequestDelegate.responseURL,{resourceAlias:"mediaSegment"===r?Ge:ze,isCdnCacheHit:"TCP_HIT"===i||"TCP_REMOTE_HIT"===i,correlationId:a?n.getResponseHeader("x-correlationid"):void 0,responseStatus:n.status,totalClientWaitTimeMs:c||0,start:d,additionalInfo:f,afdRefId:u})}switch(l?i:void 0){case"TCP_MISS":p.videoSegmentCacheMissCount++;break;case"TCP_HIT":case"TCP_REMOTE_HIT":p.videoSegmentCacheHitCount++;break;case"CONFIG_NOCACHE":p.nonCdnVideoSegmentCount++}}}),p.videoPlayer.addEventListener(B,p.sendMetricsOnDownloadRequestEnded),p.videoPlayer.addEventListener(x,function(){p.isRefactorTelemetryEnabled&&(p.loadingTracker.canplaythrough||(p.loadingTracker.updateLoadTime(),p.loadingTracker.canplaythrough=!0)),p.isFirstTimeCanPlayThrough&&(p.firstCanPlayThroughTimeMs=Xe.now(),p.isFirstTimeCanPlayThrough=!1,p.isLoaded=!0),p.loadingVideoTelemetry&&(p.timeSpentInBackgroundDuringLoadMS=p.loadingVideoTelemetry.getTimeInBackgroundMS()),p.videoPlayer&&p.videoPlayer.removeEventListener(B,p.sendMetricsOnDownloadRequestEnded)}),p.videoPlayer.addEventListener("mediaSourceSrcSetRequested",function(){p.timeAtmediaSourceSrcSetRequested=Xe.now()}),p.videoPlayer.addEventListener("mediaSourceSrcSetResolved",function(){p.timeAtmediaSourceSrcSetRequested&&(p.timeSpentWaitingForMediaSrcInitMS=Xe.now()-p.timeAtmediaSourceSrcSetRequested)}),p.videoPlayer.addEventListener(te,function(){p.closedCaptionContext.captionsAvailable=!0,p.sendPlaybackTelemetry(te)}),p.videoPlayer.addEventListener(V,function(e,t){p.closedCaptionContext.captionsWereEnabled=t.userPrincipalSettings&&t.userPrincipalSettings.web&&t.userPrincipalSettings.web.playbackSettings&&t.userPrincipalSettings.web.playbackSettings.textTrackSettings&&!0===t.userPrincipalSettings.web.playbackSettings.textTrackSettings.showTextTrack}),p.videoPlayer.addEventListener("hybridPlaybackEnabled",function(){p.isHybridPlaybackEnabled=!0}),p.videoPlayer.addEventListener("aesKeyFetchCompleted",function(e,t){isNaN(t&&t.totalDownloadTimeMs)||(p.aesKeyFetchTimeSpentMs=t.totalDownloadTimeMs)}),p.videoPlayer.addEventListener("prefetchedManifestPromiseResolved",function(e,t){p.timeSpentWaitingPrefetchedManifestMS=t.timeSpentWaitingPrefetchedManifestMS,p.augmentedNetworkRequests.add(Ne,{resourceAlias:"ManifestFetch",actualBlockTimeMS:p.timeSpentWaitingPrefetchedManifestMS}),p.augmentedNetworkRequests.add(Re,{resourceAlias:"DashManifestFetch",actualBlockTimeMS:p.timeSpentWaitingPrefetchedManifestMS})}),p.videoPlayer.addEventListener(O,function(e,t){var n=p.videoPlayer&&p.videoPlayer.currentType();p.isFirstTimeCanPlayThrough&&n&&n.toLowerCase()===de.t.progressive&&(p.progressiveLoadStartTime=Xe.now())}))},this.mergeTelemetryValues=function(e,t,n){var i,r,o,s,c,d=p.convertEngineTelemetryFields(),l=p.videoPlayer&&(null===(i=p.videoPlayer.options())||void 0===i?void 0:i.customPlayerSettings),u=Object(a.e)(Object(a.e)(Object(a.e)(Object(a.e)(Object(a.e)(Object(a.e)(Object(a.e)(Object(a.e)(Object(a.e)(Object(a.e)(Object(a.e)(Object(a.e)(Object(a.e)(Object(a.e)({loadTimeSinceStartSeconds:Xe.now()/1e3-p.loadTimeSinceStartSeconds,isLive:!1,currentVolume:p.videoPlayer&&p.videoPlayer.volume?p.videoPlayer.volume():void 0,previousVolume:p.previousVolume},p.getPayloadPlaybackRate(e,n)),{presentationTimeOffsetInSec:(s=p.videoPlayer,c=s,c&&c.presentationTimeOffsetInSec?c.presentationTimeOffsetInSec():-1),currentAudioTrackName:Ce(p.videoPlayer),ieAudioIsDisabled:(new Audio).muted,isPageVisible:Oe(),GOPSize:p.GOPSize,fallbackCount:p.fallbackCount,meTACorrelationId:p.meTACorrelationId,progressiveCorrelationId:p.progressiveCorrelationId,selectedSrcMimeType:p.selectedSrcMimeType,timeSpentInBackgroundDuringLoadMS:p.timeSpentInBackgroundDuringLoadMS,totalTimeSpentInBackgroundMS:p.loadingVideoTelemetry&&p.loadingVideoTelemetry.getTimeInBackgroundMS?p.loadingVideoTelemetry.getTimeInBackgroundMS():0,timeSpentWaitingForMediaSrcInitMS:p.timeSpentWaitingForMediaSrcInitMS,videoSegmentCacheHitCount:p.videoSegmentCacheHitCount,videoSegmentCacheMissCount:p.videoSegmentCacheMissCount,nonCdnVideoSegmentCount:p.nonCdnVideoSegmentCount,initSegmentsTimeSpentMs:p.initSegmentsTimeSpentMs,firstSegmentsTimeSpentMs:p.firstSegmentsTimeSpentMs,manifestFetchTimeSpentMs:p.manifestFetchTimeSpentMs,aesKeyFetchTimeSpentMs:p.aesKeyFetchTimeSpentMs,totalEngineBlockedByResponseMs:p.totalEngineBlockedByResponseMs||0,totalCoreBlockedByResponseMs:p.totalCoreBlockedByResponseMs||0,totalProgressiveDownloadTimeMs:p.totalProgressiveDownloadTimeMs||0,totalBlockedBySpoMs:p.totalBlockedBySpoMs||0,totalBlockedByMetaMs:p.totalBlockedByMetaMs||0,totalNetworkClientToMetaMs:p.totalNetworkClientToMetaMs||0,totalNetworkMetaToSpoMs:p.totalNetworkMetaToSpoMs||0,totalBlockedBySpoWithOverlapMs:p.totalBlockedBySpoWithOverlapMs||0,totalBlockedByMetaWithOverlapMs:p.totalBlockedByMetaWithOverlapMs||0,totalNetworkClientToMetaWithOverlapMs:p.totalNetworkClientToMetaWithOverlapMs||0,totalNetworkMetaToSpoWithOverlapMs:p.totalNetworkMetaToSpoWithOverlapMs||0,totalRemainingNetworkWithOverlapMs:p.totalRemainingNetworkWithOverlapMs||0,totalRetryCountOnSegmentDownload:p.totalRetryCountOnSegmentDownload,isHandleEarlyPrefetchErrorEnabled:p.isHandleEarlyPrefetchErrorEnabled&&p.isPrefetchProgressiveEnabled}),p.fallbackInfo),p.errorInfo),p.videoMetadataInfo),Ee(e)),t||{}),p.videoPlayer&&p.videoPlayer.getEventMetrics?p.videoPlayer.getEventMetrics(j):{}),d),p.videoPlayer&&p.videoPlayer.getChronometerData?p.videoPlayer.getChronometerData():{}),p.getPlaybackTechNameOverride()),p.streamTelemetryCallback?p.streamTelemetryCallback():{}),p.closedCaptionContext),{isHybridPlaybackEnabled:p.isHybridPlaybackEnabled,timeSpentWaitingPrefetchedManifestMS:p.timeSpentWaitingPrefetchedManifestMS,isPrefetchProgressiveEnabled:p.isPrefetchProgressiveEnabled,isFastSourceSetEnabled:p.isFastSourceSetEnabled,isLoaded:p.isLoaded,videoPlaybackType:p.videoPlaybackType,defaultBandwidthKbps:p.defaultBandwidthKbps,successfulTimeToLoadMs:p.successfulTimeToLoadMs?p.successfulTimeToLoadMs:null,customMaxBufferSec:(null===(r=null==l?void 0:l.customHeuristicSettings)||void 0===r?void 0:r.maxBufferInWallClockSec)||null});if(p.isFinegrainedBandwidthTelemetryEnabled&&(p.videoBufferData=null===(o=p.videoPlayer)||void 0===o?void 0:o.videoBufferData(),u.usedStoredBandwidth=p.videoBufferData?p.videoBufferData.usedStoredBandwidth:null,u.savedBandwidth=p.videoBufferData?p.videoBufferData.storedBandwidth:null,u.firstPerceivedBandwidth=p.videoBufferData?p.videoBufferData.firstPerceivedBandwidth:null),p.isTimeSinceSourceSetEnabled&&(u.timeSinceSourceSetMs=0!==p.timeSinceSourceSetMs?Xe.now()-p.timeSinceSourceSetMs:0),p.isRefactorTelemetryEnabled){u.playedSeconds=Math.round(p.playingTracker.totalSecondsWatched),u.rebufferingSeconds=(p.bufferingTracker.state?p.bufferingTracker.bufferingTimeTotal+Math.abs(Xe.now()-p.bufferingTracker.bufferingTimeStart):p.bufferingTracker.bufferingTimeTotal)/1e3,u.loadTimeMs=p.loadingTracker.loadTime,u.errorCode=p.videoPlayer&&p.videoPlayer.error()?p.videoPlayer.error().code.toString(16):null,u.message=p.videoPlayer&&p.videoPlayer.error()?p.loggingService.scrubErrorMessage(Ae(p.videoPlayer.error().message)||""):null,u.playSecondsAudioEnhancement=Math.round(p.noiseSuppressionTracker.totalPlayTime),u.totalOriginalTrackPlayedOnStartup=Math.round(p.noiseSuppressionTracker.totalOriginalTrackPlayedOnStartup);var f=p.bufferingTracker.state&&p.noiseSuppressionTracker.isEnabled()&&p.noiseSuppressionTracker.isCurrentlyRebuffering;u.rebufferingSecondsAudioEnhancement=(f?p.noiseSuppressionTracker.totalRebufferingTime+Math.abs(Xe.now()-p.bufferingTracker.bufferingTimeStart):p.noiseSuppressionTracker.totalRebufferingTime)/1e3,u.rebufferingMaxAudioEnhancement=(f?Math.max(p.noiseSuppressionTracker.maxRebufferTime,p.bufferingTracker.bufferingTime):p.noiseSuppressionTracker.maxRebufferTime)/1e3,u.rebufferingCountAudioEnhancement=f?p.noiseSuppressionTracker.rebufferingCount+1:p.noiseSuppressionTracker.rebufferingCount,u.wasPageInBackgroundDuringLoad=p.loadingTracker.wasPageInBackground(),p.isNativeDownloadSizelogEnabled&&p.loadingTracker&&void 0!==p.loadingTracker.nativelyDownloadedBytes()&&(u.nativelyDownloadedBytesDuringLoad=p.loadingTracker.nativelyDownloadedBytes(),u.fileSizeInBytes=p.fileSizeInBytes)}return p.previousVolume=u.currentVolume,u},this.getPlaybackTechNameOverride=function(){var e;switch(p.selectedSrcMimeType?p.selectedSrcMimeType.toLowerCase():""){case de.t.hls:e=he.t.Hls;break;case de.t.progressive:e=he.t.Progressive;break;default:e=null}return e?{playbackTech:e}:{}},this.getPayloadPlaybackRate=function(e,t){if(!p.originalPlaybackRate)return{};e&&e.type&&"changePlaybackSpeed"===e.type&&(p.playbackRateChanged=!0,p.previousPlaybackRate=t&&t.oldSetting?t.oldSetting:void 0,p.playbackRatesTimes[Number(p.previousPlaybackRate)]=p.playbackRatesTimes[Number(p.previousPlaybackRate)]+(Xe.now()/1e3-p.currentPlaybackRateTime),p.currentPlaybackRateTime=Xe.now()/1e3);var n={currentPlaybackRate:p.videoPlayer&&p.videoPlayer.playbackRate?p.videoPlayer.playbackRate():void 0,previousPlaybackRate:p.previousPlaybackRate,originalPlaybackRate:p.originalPlaybackRate,playbackRateChanged:p.playbackRateChanged};return e&&e.type&&"analyticsheartbeat"===e.type&&p.playbackRates&&p.playbackRates.length>0&&p.playbackRates.forEach(function(e){n.currentPlaybackRate===Number(e)?n["playbackRateTimeSeconds_".concat(e)]=p.playbackRatesTimes[e]+(Xe.now()/1e3-p.currentPlaybackRateTime):n["playbackRateTimeSeconds_".concat(e)]=p.playbackRatesTimes[e]}),n},this.sendMetricsOnDownloadRequestEnded=function(e,t){switch(t.segmentType){case"manifest":p.manifestFetchTimeSpentMs+=t.bandwidthInfo.totalDownloadTimeMs;break;case"initSegment":p.initSegmentsTimeSpentMs+=t.bandwidthInfo.totalDownloadTimeMs,p.sendPlaybackTelemetry("initSegmentDownloadCompleted",void 0,e);break;case"mediaSegment":p.firstSegmentsTimeSpentMs+=t.bandwidthInfo.totalDownloadTimeMs,p.sendPlaybackTelemetry("mediaSegmentDownloadCompleted",void 0,e)}},this.sendPlaybackTelemetry=function(e,t,n,i,r){t&&t.message&&(t.message=Ae(t.message));var o=t;o&&o.downloadFailed&&o.downloadFailed.message&&(o.downloadFailed.message=p.loggingService.scrubErrorMessage(o.downloadFailed.message));var s,c=p.mergeTelemetryValues(n,t,i);if(c.triggerType||(c.triggerType=e),s=e,Se.indexOf(s)>=0&&(c.traceId=p.sendPlayerLogsAndReturnTraceId(e,c),p.lastTraceId=c.traceId),function(e){return ye.indexOf(e)>-1}(e)){window.clearTimeout(p.sourceSetTimeoutId);var d=Object(a.e)(Object(a.e)({},c),{stack:h.a.NotApplicable,message:t&&t.message?t.message:h.t.Missing});p.errorInfo=t,p.isOnePlayerLoggingInAMPEnabled?p.onePlayerLogging.fatal("VideoPlayerError",e,Object(a.e)(Object(a.e)({},d),{name:e,isExpected:!1})):p.loggingService.fatalThin("VideoPlayerError",Object(a.e)(Object(a.e)({},d),{result:"Fatal"}))}if(!r&&function(e){return ve.indexOf(e)>-1}(e));else{var l=Object(a.e)({},c);p.loggingService.appLogicThin(function(e){switch(e){case"started":return"VideoPlayerStarted";case k:return"VideoPlayerPlaying";case E:return"VideoPlayerLoaded";case O:return"VideoPlayerLoadStart";case"analyticsstreamstarted":return"VideoPlayerAnalyticsStreamLoaded";default:return"PlayerHeartbeat"}}(e),l)}},this.unloadData=function(){p.bufferingTracker.state&&p.bufferingTracker.send()},this.sendPlaybackSummary=function(){var e=p.mergeTelemetryValues(),t={playIntervals:e.playIntervals,uniquePlayIntervals:e.uniquePlayIntervals,playbackTech:e.playbackTech,PlayerVersion:e.playerVersion,duration:e.duration,currentTime:e.currentTime,currentPlaybackRate:e.currentPlaybackRate,endReached:e.endReached,enteredFullscreen:e.enteredFullscreen,fullscreenTime:e.fullscreenTime,percentPlayed:e.percentPlayed,playTime:e.playedSeconds,uniquePlayTime:e.uniquePlayTime,viewContext:e.viewContext,groupings:e.groupings};p.loggingService.appLogicThin("VideoPlayerPlaybackSummary",t)},this.getGOPSizeHandler=function(){if(p.GOPSize=we(p.videoPlayer),p.GOPSize&&p.videoPlayer){var e=p.videoPlayer.videoBufferData();e&&e.removeEventListener(amp.bufferDataEventName.downloadcompleted,p.getGOPSizeHandler)}},this._getVideoPlaybackPlayer=function(e){var t;if((null===(t=p.selectedSrcMimeType)||void 0===t?void 0:t.toLowerCase())===de.t.progressive)return"htmlMp4";var n=-1!==e.indexOf("altTranscode"),a=function(e){var t=Object(i.c)(e);if(t)return t.searchParams.get("format");var n=/([&\?]+)format=([^&#]*)/.exec(e);return n?n[2]:n}(e);return"dash"===a?n?"dashFFMPEG":"dashMediaFoundation":(null==a?void 0:a.includes("hls"))?n?"htmlHlsV6FFMPEG":"htmlHlsV6MediaFoundation":void 0},this.loggingService=e,this.settingsStore=n,this.streamTelemetryCallback=t,this.closedCaptionContext={captionsAvailable:!1,captionsWereEnabled:!1},o&&(this.isRefactorTelemetryEnabled=o),this.isVideoPlaybackTypeEnabled=Object(s.e)(this.settingsStore.getSettingObject("isVideoPlaybackTypeEnabled","boolean")),this.loadingVideoTelemetry=new ge.e,this.isTimeSinceSourceSetEnabled=Object(s.e)(this.settingsStore.getSettingObject("isTimeSinceSourceSetEnabled","boolean")),this.logAllProgressiveTimings=Object(s.e)(this.settingsStore.getSettingObject("isAllProgressiveTimingLogEnabled","boolean")),this.isHandleEarlyPrefetchErrorEnabled=Object(s.e)(this.settingsStore.getSettingObject("isHandleEarlyPrefetchErrorEnabled","boolean")),this.isOnePlayerLoggingInAMPEnabled=Object(s.e)(this.settingsStore.getSettingObject("isOnePlayerLoggingInAMPEnabled","boolean"))}return e.prototype.getLastTraceId=function(){return this.lastTraceId},e.prototype.updatePBTelemetryServiceValues=function(e){e.videoMetadataInfo&&(this.videoMetadataInfo=e.videoMetadataInfo)},e.prototype.addTimeToLoadHeartbeat=function(e){this.successfulTimeToLoadMs=e},e.prototype.calculateW3CTelemetry=function(e){var t,n=this;if(void 0!==e){if(this.videoMetadataInfo){var a=this.videoMetadataInfo.spRequestDuration;a&&!isNaN(a)&&this.augmentedNetworkRequests.add(Be,{resourceAlias:Be,isCdnCacheHit:this.videoMetadataInfo.isCdnHit,responseStatus:this.videoMetadataInfo.metadataFetchErrorCode,customServerTiming:[{name:"spclientservicerequestduration",duration:a}]})}var i;if(void 0!==this.progressiveLoadStartTime&&void 0!==this.firstCanPlayThroughTimeMs&&this.selectedSrcMimeType&&this.selectedSrcMimeType.toLowerCase()===de.t.progressive){var r=this.videoPlayer&&this.videoPlayer.currentSrc(),o=r&&r.match("(correlationid=)(.{36})"),c=o&&3===o.length?o[2]:void 0;c&&this.augmentedNetworkRequests.add(Ve,{resourceAlias:Ve,correlationId:c}),(t={}).CalculatedProgressiveDownload={fetchStart:this.progressiveLoadStartTime,responseEnd:this.firstCanPlayThroughTimeMs},i=t}var d=function(e,t,n,a){if(t&&void 0!==t.start&&performance&&performance.getEntriesByType){var i=a&&Object(s.e)(a.getSettingObject("isAllProgressiveTimingLogEnabled","boolean"))||!1;e.sortKeys();var r=[],o=[],c=[],d=[];try{var l={};return performance.getEntriesByType("resource").forEach(function(a){var s,u,f=a,p=f.name.includes(He);if((Ue(f)>=t.start||p)&&!(void 0!==t.end&&f.responseEnd>t.end)){var m=We(f.name,e,i);if(m){p||(s=f,(u=m)&&u.resourceAlias&&Fe(s)&&(u.resourceAlias=u.resourceAlias+"FromLocal"));var _=p||m.resourceAlias===Be||m.resourceAlias===je,h=m.resourceAlias===Ve;if(f.responseEnd>t.start&&!Fe(f)){Ue(f)<t.start&&(m.actualBlockTimeMS=f.responseEnd-t.start);var b=Qe(f,m);b=function(e,t,n){if(!t||!Ke[e])return t;if(n[e]){var a=n[e],i=t.end-t.start;a.selected.end-a.selected.start>i&&(a.selected=t)}else n[e]={selected:t}}(m.resourceAlias,b,l),n&&!i&&delete n[m.resourceAlias],b&&(_?o.push(b):h?c.push(b):r.push(b))}d.push(Te(f,m))}}}),function(e,t,n){for(var a=0,i=Object.entries(n);a<i.length;a++){var r=i[a],o=r[0],s=r[1];s.selected&&(Ke[o].isCore?e.push(s.selected):t.push(s.selected))}}(o,r,l),n&&function(e,t,n,a,i){for(var r=0,o=Object.entries(e);r<o.length;r++){var s=o[r],c=s[0],d=s[1],l=We(c,a,i),u=Qe(d,l);u&&t.push(u),n.push((f=c,m=l,{fetchStToRespEndDur:(p=d).responseEnd-p.fetchStart,networkDur:p.responseEnd-p.fetchStart,startTimeMs:p.fetchStart,endTimeMs:p.responseEnd,durationMs:p.responseEnd-p.fetchStart,resourceName:f,correlationId:m?m.correlationId:void 0,serverTiming:m?m.customServerTiming:void 0,responseStatus:m?m.responseStatus:void 0,isCdnCacheHit:m?m.isCdnCacheHit:void 0}))}var f,p,m}(n,c,d,e,i),{engine:qe(r),core:qe(o),native:qe(c,!1),rawResourceTimingList:d}}catch(e){return}}}(this.augmentedNetworkRequests,{start:e,end:this.firstCanPlayThroughTimeMs},i,this.settingsStore);d&&(this.totalEngineBlockedByResponseMs=d.engine.clientTime,this.totalCoreBlockedByResponseMs=d.core.clientTime,this.totalProgressiveDownloadTimeMs=d.native.clientTime,[d.engine,d.core].forEach(function(e){e&&e.backendTime&&(n.totalBlockedBySpoMs+=e.backendTime.spoTimeMs||0,n.totalBlockedByMetaMs+=e.backendTime.metaTimeMs||0,n.totalNetworkClientToMetaMs+=e.backendTime.clientMetaNetworkTimeMs||0,n.totalNetworkMetaToSpoMs+=e.backendTime.metaSpoNetworkTimeMs||0),e&&e.backendTimeWithOverlap&&(n.totalBlockedBySpoWithOverlapMs+=e.backendTimeWithOverlap.spoTimeMs||0,n.totalBlockedByMetaWithOverlapMs+=e.backendTimeWithOverlap.metaTimeMs||0,n.totalNetworkClientToMetaWithOverlapMs+=e.backendTimeWithOverlap.clientMetaNetworkTimeMs||0,n.totalNetworkMetaToSpoWithOverlapMs+=e.backendTimeWithOverlap.metaSpoNetworkTimeMs||0,n.totalRemainingNetworkWithOverlapMs+=e.backendTimeWithOverlap.remainingNetworkTimeMs||0)}),this.sendPlaybackTelemetry("aggregatedW3CTelemetry"),this.enableW3CTelemetry&&d.rawResourceTimingList.forEach(function(e){n.loggingService.appLogicThin("ResourceTiming",e)}))}},e.prototype.dispose=function(){if(this.progressiveCallObserver){var e=this.progressiveCallObserver;setTimeout(function(){return e&&e.disconnect()},1e3)}this.loadingVideoTelemetry.dispose()},e.prototype.observeProgressiveTiming=function(e,t){var n=this;this.progressiveCallObserver=function(t,a,i){if(PerformanceObserver){var r=new PerformanceObserver(function(t){t.getEntries().forEach(function(t){var i,r;t&&1==((r=t).name===e&&(!n.firstCanPlayThroughTimeMs||n.firstCanPlayThroughTimeMs>r.startTime))&&(i=Te(t,a),n.loggingService.appLogicThin("ResourceTiming",i),n.progressiveCallObserver&&n.firstCanPlayThroughTimeMs&&i.endTimeMs>n.firstCanPlayThroughTimeMs&&n.progressiveCallObserver.disconnect())})});return r.observe({entryTypes:["resource"]}),r}}(0,{resourceAlias:Ve,correlationId:t||"mis"})},e.prototype.convertEngineTelemetryFields=function(){var e=this.videoPlayer&&this.videoPlayer.getTelemetryProperties?this.videoPlayer.getTelemetryProperties():{},t=this.videoPlayer&&this.videoPlayer.getDynamicTelemetryProperties?this.videoPlayer.getDynamicTelemetryProperties():{},n=t.MimeType;return t.MimeType=void 0,Object(a.e)(Object(a.e)({},t),{streamId:e.StreamId,pluginVersion:e.PlayerVersion,playerVersion:e.PlayerVersion,playbackTech:e.PlaybackTech,protectionType:e.ProtectionType,heuristicsProfile:e.heuristicsProfile,autoplay:e.autoPlay,mimeType:n})},e.prototype.sendPlayerLogsAndReturnTraceId=function(e,t,n){void 0===n&&(n=!1);var i=(this.videoPlayer&&this.videoPlayer.getMemoryLog?this.videoPlayer.getMemoryLog(n):void 0)||function(e){return"no verbose traces are generated for this playback event: "+e}(e),r=Object(a.e)(Object(a.e)({},t),{message:Ae(i)||h.t.Missing});return this.loggingService.traceThin(r,"VideoPlayerLogs")},e.prototype.getMeTACorrelationId=function(e){var t=e.match(this.correlationIdRegex);return t&&t.length>0?t[1]:o.e},Object.defineProperty(e.prototype,"correlationIdRegex",{get:function(){return"correlationid=([a-z0-9-\\.,]+)&"},enumerable:!1,configurable:!0}),e}(),$e="OnePlayer-TextTrack-Settings";function et(){var e={};if(Object(i.n)()){var t=localStorage.getItem($e);null!==t&&(e=JSON.parse(t))}return e}var tt=n(806),nt={maxLogLevel:1,TraceTargets:[{target:"memory"}]},at={autoplay:!1,reloadPlayer:function(){window.location.reload()}},it=[5242884,2097752,2097753,3145728,2097558,2097152],rt=function(){function e(t,r,o){void 0===o&&(o="FastEmbedLight");var c=this;this.context=t,this.onPlayerCreated=r,this.playerSkinMode=o,this.totalRetryCount=0,this.hasSetEventTextTrackUIListener=!1,this.groupings={components:[fe.a.ThinEmbedVideoPlayer]},this.screenReaderMessageContainerId="screenReaderMessageContainer",this.enableRaiseDownloadStartedEvent=!1,this.getStreamTelemetryContext=function(){return{viewContext:c.context.streamSession.telemetryViewContext,groupings:c.groupings,playerSourceResetCount:c.totalRetryCount,isUpdated:c.embedPlaybackErrorHandler?c.embedPlaybackErrorHandler.isUpdated:void 0,isDeleted:c.embedPlaybackErrorHandler?c.embedPlaybackErrorHandler.isDeleted:void 0,msToVideoStart:c.msToVideoStart,videoState:"VOD",isDownloadBlocked:c.context.isDownloadBlocked}},this.setPlayerSources=function(){var e=c.getAmpPlayerSources();try{c.context.enginePhaseHandlers&&c.context.enginePhaseHandlers.onStartedSetSource&&c.context.enginePhaseHandlers.onStartedSetSource();var t=Object(s.e)(c.context.settingsStore.getSettingObject("isDeepCloningSourcesArray","boolean")),n=c.cloneObject(e);c.ampPlayer.src(t?n:e)}catch(e){throw c.context.enginePhaseHandlers&&c.context.enginePhaseHandlers.onFailedSetSource&&c.context.enginePhaseHandlers.onFailedSetSource(e),e}},this.addAndSetRemoteTrack=function(e){c.player.options({tracks:[e]}),c.ampPlayer.addRemoteTextTrack(e),c.ampPlayer.setActiveTextTrack(e)},this.getProcessedTrack=function(e,t){return Object(s.e)(c.context.settingsStore.getSettingObject("isClosedCaptionsLanguageLabelEnabled","boolean"))&&Object(s.e)(c.context.settingsStore.getSettingObject("isMultipleTranscriptsEnabled","boolean"))?c.mapUrlToTrack(e,t):c.mapUrlToTrack(e)},this.formatLanguage=function(e,t){if(!e)return"microsoft transcript generation"===t||"microsoft teams"===t?c.localization.getString("SpokenLanguageText"):c.localization.getString("TranscriptLanguageUnknown");try{return pe(e,c.localization)}catch(e){return c.context.onePlayerLogging.warn("ConfigurationError",e,{name:"CaptionsLanguageFormattingFailed",isExpected:!1}),c.localization.getString("TranscriptLanguageUnknown")}},this.orderCaptionsList=function(e){var t=new Map,n=[];return e.forEach(function(e){var i,r=c.formatLanguage(null!==(i=e.languageTag)&&void 0!==i?i:"",e.source),o=t.get(r);t.set(r,o?o+1:1);var s=o?Object(ue.e)(c.localization.getString("TranscriptFormattedLanguage"),r,o.toString()):r;n.push(Object(a.e)(Object(a.e)({},e),{formattedLanguage:s}))}),n.sort(function(e,t){return e.formattedLanguage&&t.formattedLanguage?e.formattedLanguage.toLocaleLowerCase(c.localization.locale.value)<t.formattedLanguage.toLocaleLowerCase(c.localization.locale.value)?-1:1:0}),n},this.getAmpPlayerSourceValue=function(e){var t=c.ampPlayer.options().enableFallback||!1,n=e&&e.playbackUrl||[];n.length>1&&!t&&(n=[n[0]]);var a={src:n,type:e.mimeType,disableUrlRewriter:!0};return a.type===de.t.hls&&c.shouldGotoOriginForHLS()&&(a.src=n.map(function(e){return function(e){var t="playbackurl=";if(e.includes(t)){var n=e.indexOf(t)+t.length;return e.substr(n)}return e}(e)})),t||(a.src=a.src[0]),a},this.prepareMediaPlayerOptions=function(e){var t=c.context.localization.getLanguage(),n=Object(s.e)(c.context.settingsStore.getSettingObject("isAllowHostDisableFullScreenEnabled","boolean")),a=Object(s.e)(c.context.settingsStore.getSettingObject("isPrefetchInitSegmentsQualityPassToEngine","boolean"));c.enableRaiseDownloadStartedEvent=Object(s.e)(c.context.settingsStore.getSettingObject("enableRebufferingTelemetry","boolean"));var i={autoplay:e.autoplay,controls:!c.context.isFluentMtcEnabled,heuristicProfile:e.heuristicProfile?e.heuristicProfile:"Hybrid",techOrder:e.techOrder?e.techOrder:["azureHtml5JS","flashSS","html5"],logo:{enabled:!1},plugins:c.getPluginOptions(e),traceConfig:e.traceConfig,staleDataTimeLimitInSec:30,hotKeys:{enableVolumeScroll:!1,enableFullscreen:!n||"disabled"!==e.fullScreenToggleMode},manifestFetchAutoRetryForLive:!0,playerStartupTimeoutTimer:!0,playerStartupTimeoutInMSec:2e4,html5:{nativeTextTracks:!1,prefetchedSrc:e.prefetchedVideoElement&&e.prefetchedVideoElement.src||void 0,handleEarlyPrefetchError:Object(s.e)(c.context.settingsStore.getSettingObject("isHandleEarlyPrefetchErrorEnabled","boolean"))&&void 0!==e.prefetchedVideoElement},azureHtml5JS:{infiniteSegmentRetryForPreconditionFailed:!0,maxRetriesForKeyAcquireFailure:3,maxWaitTimeBetweenRetriesForKeyAcquireMS:500,allowMixedContent:!0,getDownloadRequestParametersAsync:e.getDownloadRequestParametersAsync,enableHybridMode:e.enableHybridMode,prefetchedManifestPromise:e.prefetchedManifestPromise,enableFinegrainedBandwidthTelemetry:e.enableFinegrainedBandwidthTelemetry,isImprovedSourceBufferLogEnabled:e.isImprovedSourceBufferLogEnabled,prefetchAudioInitSegmentQuality:a?e.prefetchAudioInitSegmentQuality:void 0,prefetchVideoInitSegmentQuality:a?e.prefetchVideoInitSegmentQuality:void 0,enableRaiseDownloadStartedEvent:c.enableRaiseDownloadStartedEvent,isClosedCaptions401FixEnabled:Object(s.e)(c.context.settingsStore.getSettingObject("isClosedCaptions401ErrorFixEnabled","boolean"))},IE11AudioDisabled:{message:c.context.playerResources&&c.context.playerResources.IE11_AUDIO_DISABLED||"Your browser or settings prevent changing the volume. [%]Learn more[%].",url:"https://go.microsoft.com/fwlink/?linkid=2093280"},language:t,disableSegmentQueryParamParsing:e.expectMeTAManifest,enableFallback:e.enableFallback,fastSourceSet:e.fastSourceSet,hideBigPlayButtonOnAutoplay:e.hideBigPlayButtonOnAutoplay,showPlaybackSpeedButton:e.showPlaybackSpeedButton,isVolumeShortcutHandlingEnabled:e.isVolumeShortcutHandlingEnabled,isRemoveBigPlayButtonFocusEnabled:e.isRemoveBigPlayButtonFocusEnabled,showPopOutButton:e.showPopOutButton,popOutButtonHasStreamIcon:e.popOutButtonHasStreamIcon,shouldPauseOnPopOutClick:Object(s.e)(c.context.settingsStore.getSettingObject("isPauseOnPopOutButtonClickEnabled","boolean")),customPlayerSettings:e.customPlayerSettings,poster:e.poster,getItemUrl:e.getItemUrl,showDivSliderIsFocusable:e.showDivSliderIsFocusable,showSetDynamicSizeInDialogEnabled:e.showSetDynamicSizeInDialogEnabled,fullScreenToggleMode:n&&e.fullScreenToggleMode||"default",isPlayerPluginsCleanUpEnabled:e.isPlayerPluginsCleanUpEnabled,isMouseTooltipPositionEnabled:e.isMouseTooltipPositionEnabled,handleEventDelayedError:Object(s.e)(c.context.settingsStore.getSettingObject("isHandleEventDelayedErrorEnabled","boolean")),isVolumeBarAriaLabelLocalizationEnabled:e.isVolumeBarAriaLabelLocalizationEnabled,isKeyboardShortcutUpdateEnabled:e.isKeyboardShortcutUpdateEnabled,isPlaybackSpeedInPopoutChatEnabled:e.isPlaybackSpeedInPopoutChatEnabled,isPlaybackSpeedA11ScreenReaderEnabled:Object(s.e)(c.context.settingsStore.getSettingObject("isPlaybackSpeedA11ScreenReaderEnabled","boolean")),isMultipleTranscriptsEnabled:Object(s.e)(c.context.settingsStore.getSettingObject("isMultipleTranscriptsEnabled","boolean")),isCaptionOptionsFormWrapEnabled:Object(s.e)(c.context.settingsStore.getSettingObject("isCaptionOptionsFormWrapEnabled","boolean")),isCaptionLargeFontSizeEnabled:Object(s.e)(c.context.settingsStore.getSettingObject("isCaptionLargeFontSizeEnabled","boolean")),isAMPCaptionMenuResponsiveEnabled:Object(s.e)(c.context.settingsStore.getSettingObject("isAMPCaptionMenuResponsiveEnabled","boolean"))};return e.enableFallback&&(i.customFallbackErrors=e.customFallbackErrors||it,i.customFallbackServiceErrorCodes=e.customFallbackServiceErrorCodes||[],i.isFallbackErrorCodePartialMatchingEnabled=Object(s.e)(c.context.settingsStore.getSettingObject("isFallbackErrorCodePartialMatchingEnabled","boolean"))),c.context.playerResources&&(i.languages={},i.languages[t]=c.context.playerResources),i},this.updateScreenReaderSpeech=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(e&&""!==e){var a,i=document.getElementById(c.screenReaderMessageContainerId);i&&(e===k&&(a=c.localization.getString("VideoPlayingMessage")),e===A&&(a=c.localization.getString("VideoPausedMessage")),e===N&&(a=c.localization.getString("ExitedFullscreenAria")),e===R&&(a=c.localization.getString("EnteredFullscreenAria")),e===$&&(a=Object(ue.e)(c.localization.getString("VideoSkippedForwardMessage"),t[0])),e===ee&&(a=Object(ue.e)(c.localization.getString("VideoSkippedBackwardMessage"),t[0])),e===K&&(a=c.localization.getString("VideoMutedMessage")),e===W&&(a=c.localization.getString("VideoUnmutedMessage")),e===z&&(a=c.localization.getString("CaptionsTurnedOnMessage")),e===G&&(a=c.localization.getString("CaptionsTurnedOffMessage")),e===J&&(a=Object(ue.e)(c.localization.getString("PlaybackSpeedChangedMessage"),t[0])),e===M&&(a=Object(ue.e)(c.localization.getString("VideoSeekingMessage"),t[0])),a&&(i.innerHTML=a),c.ampPlayer.addEventListener("keydown",function(e){""!==i.innerHTML&&("ArrowUp"!==e.key&&"ArrowDown"!==e.key&&"Tab"!==e.key||(i.innerHTML=""))}))}},this.onTextTrackSettingsChanged=function(e){try{t=e,n=(r=et())?Object(a.e)(Object(a.e)({},r),t):t,Object(i.n)()&&localStorage.setItem($e,JSON.stringify(n)),e.preferredLanguage&&c.context.onePlayerLogging.userAction("PlayerChangeSettingAction",{name:"AmpCCLanguageSelected",actionType:"LeftClick",oldSetting:"",newSetting:e.preferredLanguage,playbackTimeSec:-1})}catch(e){c.context.onePlayerLogging.warn("ConfigurationError",e,{name:"Failed to save text track settings",isExpected:!1})}var t,n,r},this.retryPlayer=function(e,t){c.totalRetryCount=c.totalRetryCount+1;var n,a,i={};c.lastAMPError&&(n=c.lastAMPError.code.toString(16),a=c.lastAMPError.message),i.manualRetry=e,i.errorCode=n,i.message=a,i.retrycount=t,c.playbackTelemetryService.sendAdhocPlaybackTelemetry("VideoPlayerRetryOnError",i),c.ampPlayer.options({sourceSetByRetry:!0}),c.ampPlayer.resetPlayer(),c.playbackTelemetryService.resetFallbackStates(),c.setPlayerSources(),(c.isRetryOnDecodeErrorDisabled||c.isEngineRetryDisabled)&&c.recoverFromError()},this.recoverFromError=function(){if(c.lastAMPError){var e=!!c.ampPlayer.error();c.context.onePlayerLogging.warn("PlayerError",c.lastAMPError,{name:"recoveredFromErrorState",isExpected:!0,codeLocation:e?"amp recovery":"oneplayer recovery"}),c.isRetryOnDecodeErrorDisabled||c.isEngineRetryDisabled||e&&c.retryPlayer(!1,1),c.context.streamSession.hideErrorBox(),c.lastAMPError=void 0}},this.localization=t.localization,this.playbackTelemetryService=new Ze(this.context.streamSession.loggingService,this.getStreamTelemetryContext,this.context.settingsStore,this.context.onePlayerLogging,this.context.enableRefactoredTelemetry,this.context.enableW3CTelemetry,this.context.isResetNSFieldsOnFallbackEnabled,this.context.fileSizeInBytes,this.context.isNativeDownloadSizelogEnabled,this.context.isProgressiveCorrelationIdEnabled),e.playerLoadingPromise||(e.playerLoadingPromise=function(e,t){return Object(a.t)(this,void 0,void 0,function(){var i,r;return Object(a.i)(this,function(a){switch(a.label){case 0:return window.portalConfiguration=e.streamSession.portalConfiguration,i=e.resourceLoaders.renderPhase("loadAzureMediaPlayer",function(){return Object(_e.a)()}),!e.isFluentMtcEnabled||Object(s.e)(e.settingsStore.getSettingObject("isPskinLoadedForFluentMtcWithPlaybackTelemetryEnabled","boolean"))?[3,2]:[4,i];case 1:return a.sent(),n(807),[3,6];case 2:return e.isFluentMtcEnabled&&Object(s.e)(e.settingsStore.getSettingObject("isPskinLoadedForFluentMtcWithPlaybackTelemetryEnabled","boolean"))?(r=[i,e.resourceLoaders.renderPhase("loadPlayerSkinPromise",function(){return Object(_e.e)()})],[4,Promise.all(r)]):[3,4];case 3:return a.sent(),n(807),[3,6];case 4:return r=[i,e.resourceLoaders.renderPhase("loadPlayerSkinPromise",function(){return Object(_e.e)()})],[4,Promise.all(r)];case 5:a.sent()[1].init(t),a.label=6;case 6:return[2]}})})}(this.context,{skinMode:o})),this.isEngineRetryDisabled=Object(s.e)(this.context.settingsStore.getSettingObject("isEngineRetryDisabled","boolean"))}return Object.defineProperty(e.prototype,"player",{get:function(){return this.ampPlayer},enumerable:!1,configurable:!0}),e.prototype.renderPlayer=function(t){return Object(a.t)(this,void 0,void 0,function(){var n,i,r;return Object(a.i)(this,function(o){switch(o.label){case 0:if(this.isRetryOnDecodeErrorDisabled=!!t.isRetryOnDecodeErrorDisabled,!this.context.playbackUrls)throw new Error(Object(_.n)("playbackUrls not defined before streamVideoPlayer.renderPlayer()"));if(0===this.context.playbackUrls.filter(function(e){return null!=e}).length)throw n=this.context.playbackUrls.length,new Error(Object(_.n)("playbackUrls are empty: prefiltered size "+n));return[4,this.context.onePlayerLogging.measureQos("PlayerRenderEndQos",{name:"playerLoadingPromiseAwait"},function(){return e.playerLoadingPromise})];case 1:return o.sent(),[4,this.initEmbedPlaybackErrorHandler(t)];case 2:o.sent(),i=Object(a.e)(Object(a.e)(Object(a.e)({},at),t),{traceConfig:Object(a.e)(Object(a.e)({},nt),t.traceConfig)}),r=this.context.onePlayerLogging.startQos("PlayerRenderEndQos",{name:"createPlayerEngine"});try{this.createPlayer(i),r.end()}catch(e){throw r.endUnexpectedError("Fatal",e),e}return this.onPlayerCreated&&this.onPlayerCreated(),this.listenToPlayerEvents(t),this.setPlayerSources(),[2]}})})},e.prototype.initializeTextTracks=function(e){return Object(a.t)(this,void 0,void 0,function(){var t=this;return Object(a.i)(this,function(n){return[2,this.loadTextTracks(e).then(function(){return t.initializeTextTrackUI()})]})})},e.prototype.dispose=function(){window.clearInterval(this.sourceSetTimeoutId),this.ampPlayer&&this.ampPlayer.dispose(),window.removeEventListener("resize",this.addResponsiveCSSClass),this.playbackTelemetryService&&this.playbackTelemetryService.dispose()},e.prototype.toggleCCButtons=function(e){if(!(this.player.textTracks().length<1)){var t=this.ampPlayer.playerElement().querySelector("button.amp-caption-toggle"),n=this.ampPlayer.playerElement().querySelector(".vjs-moreoptions-dialog"),a=this.ampPlayer.playerElement().querySelector(".vjs-captions-subtitles-button.vjs-menu-button"),i=this.ampPlayer.playerElement().querySelector(".amp-captions-settings-button.vjs-menu-button"),r=this.ampPlayer.playerElement().querySelector(".vjs-text-track-display"),o=this.ampPlayer.playerElement().querySelector(".amp-more-options-icon.vjs-control.vjs-button.vjs-settings");e?this.showButtons(t,a,i,n,r,o):this.hideButtons(t,a,i,n,r,o)}},e.prototype.showButtons=function(e,t,n,a,i,r){null==e||e.classList.remove("vjs-hidden"),null==a||a.classList.add("vjs-hidden"),null==t||t.classList.remove("vjs-hidden"),null==n||n.classList.remove("vjs-hidden"),null==i||i.classList.remove("vjs-hidden"),null==r||r.classList.remove("vjs-hidden"),this.player.trigger("mediaSettingsToggleOn")},e.prototype.hideButtons=function(e,t,n,a,i,r){null==e||e.classList.add("vjs-hidden"),null==a||a.classList.add("vjs-hidden"),null==t||t.classList.add("vjs-hidden"),null==n||n.classList.add("vjs-hidden"),null==i||i.classList.add("vjs-hidden"),this.hideMoreOptionsMenuButton(r),this.player.trigger("mediaSettingsToggleOff")},e.prototype.hideMoreOptionsMenuButton=function(e){var t=this.ampPlayer.playerElement().querySelector(".vjs-menu.vjs-main-menu > .vjs-menu-content");(null==t?void 0:t.querySelectorAll(".vjs-hidden").length)===(null==t?void 0:t.children.length)&&(null==e||e.classList.add("vjs-hidden"),null==e||e.setAttribute("aria-expanded","false"))},e.prototype.cloneObject=function(e){return JSON.parse(JSON.stringify(e))},e.prototype.initializeTextTrackUI=function(){return Object(a.t)(this,void 0,void 0,function(){var e,t=this;return Object(a.i)(this,function(n){return e=et(),this.ampPlayer.trigger(V,{userPrincipalSettings:{web:{playbackSettings:{textTrackSettings:e}}}}),this.ampPlayer.trigger("closedCaptionsUrlLoaded"),this.toggleCCButtons(!0),this.hasSetEventTextTrackUIListener||(this.ampPlayer.addEventListener("captionChange",function(e,n){t.onTextTrackSettingsChanged(n)}),this.hasSetEventTextTrackUIListener=!0),[2]})})},e.prototype.loadTextTracks=function(e){var t;return Object(a.t)(this,void 0,void 0,function(){var n,i,r,o,c;return Object(a.i)(this,function(a){if(n=Object(s.e)(this.context.settingsStore.getSettingObject("isMultipleTranscriptsEnabled","boolean")),Array.isArray(e))if(n){for(this.player.options({tracks:[]}),r=this.orderCaptionsList(e),o=0;o<r.length;o++)(c=r[o]).isVisible&&(i=this.getProcessedTrack(c,c.formattedLanguage),null===(t=this.player.options().tracks)||void 0===t||t.push(i));this.player.refreshTextTracks()}else i=this.getProcessedTrack(e[0]),this.addAndSetRemoteTrack(i);else i=this.getProcessedTrack(e),this.addAndSetRemoteTrack(i);return[2]})})},e.prototype.createPlayer=function(e){var t=e.prefetchedVideoElement,n=Object(s.e)(this.context.settingsStore.getSettingObject("isRemoveMouseEventFocusStateEnabled","boolean")),a=Object(s.e)(this.context.settingsStore.getSettingObject("isAddCrossOriginAnonymousEnabled","boolean")),i=Object(s.e)(this.context.settingsStore.getSettingObject("isPlayerFocusableInTeamsDirectIntegrationEnabled","boolean"));t||(t=ne({container:this.context.container,backgroundColor:e.playerBackgroundColor,isRemoveMouseEventFocusStateEnabled:n,isAddCrossOriginAnonymousEnabled:a,isFluentMTCEnabled:this.context.isFluentMtcEnabled})),this.ampPlayer=amp(t,this.prepareMediaPlayerOptions(e)),t&&this.context.container&&this.context.isFluentMtcEnabled&&this.hideVideoJsElements(this.context.container),e.thumbnailBase64Options&&function(e){if(e.thumbnailBase64Options){var t=document.getElementsByClassName("vjs-loading-spinner")[0],n=t.style.zIndex;t.style.zIndex="11";var a=document.createElement("img");a.className="azuremediaplayer-thumbnail";var i=e.thumbnailBase64Options.imageFormat||"png";a.src="data:image/".concat(i,";base64,").concat(e.thumbnailBase64Options.imageBase64),a.title=e.thumbnailBase64Options.imageTitleAlt||"",a.style.position="absolute",a.style.zIndex="10",a.style.maxWidth="100%",a.style.height="100%",a.style.top="50%",a.style.left="50%",a.style.transform="translateY(-50%) translateX(-50%)",e.container.appendChild(a),e.ampPlayer.one(x,function(){var e;null===(e=a.parentElement)||void 0===e||e.removeChild(a),t.style.zIndex=n})}}({container:this.context.container,thumbnailBase64Options:e.thumbnailBase64Options,ampPlayer:this.ampPlayer}),this.createScreenReaderMessageContainer(),this.playbackTelemetryService.initVideoPlayerReference(this.ampPlayer),this.pauseVideoOnSwipeEvent();var r,o=this.ampPlayer.playerElement();if(o&&(o.tabIndex=-1,r=o.querySelector(".vjs-tech")),r&&o){r.setAttribute("tabIndex","0");var c=o.getAttribute("aria-label"),d=this.localization.getString("PoweredByStream");c?(c=c+". "+d,r.setAttribute("aria-label",c)):r.setAttribute("aria-label",d)}if(r&&r.addEventListener("click",function(){}),"MtcOnly"===e.uiMode){var l=".vjs-player > div:not(.vjs-control-bar):not(.vjs-moreoptions-dialog):not(.vjs-loading-spinner)",u=e.isClosedCaptionsInMtcOnlyEnabled?"".concat(l,":not(.vjs-text-track-display)"):l;this.context.container.querySelectorAll(u).forEach(function(e){return e.style.display="none"}),(null==r?void 0:r.parentElement)&&!o.isEqualNode(r.parentElement)&&r.parentElement.style.removeProperty("display"),!0===i&&r&&r.setAttribute("data-is-focusable","true")}this.addResponsiveCSSClass(),this.addResponsiveCSSClass=this.addResponsiveCSSClass.bind(this),window.addEventListener("resize",this.addResponsiveCSSClass)},e.prototype.hideVideoJsElements=function(e){var t=e.querySelector("video");t&&(t.style.position="absolute",t.style.width="100%",t.style.height="100%",t.style.top="0",t.style.bottom="0");var n=e.querySelector(".vjs-poster");n&&(n.style.display="none");var a=e.querySelector(".vjs-loading-spinner");a&&(a.style.display="none");var i=e.querySelector(".vjs-screen-reader-text");i&&(i.style.display="none");var r=e.querySelector(".vjs-big-play-button");r&&(r.style.display="none");var o=e.querySelector(".vjs-control-text");o&&(o.style.display="none");var s=e.querySelector(".vjs-control-bar");s&&(s.style.display="none");var c=e.querySelector(".vjs-caption-settings");c&&(c.style.display="none");var d=e.querySelector(".vjs-error-display");d&&(d.style.display="none")},e.prototype.addResponsiveCSSClass=function(){var e=this.ampPlayer.playerContainer();if(e)for(var t=0,n=Object.entries(me);t<n.length;t++){var a=n[t],i=a[0],r=a[1];if(e.clientWidth>=r.from&&e.clientWidth<=r.to){this.currentResponsiveCss!==i&&(e.classList.remove(this.currentResponsiveCss),e.classList.add(i),this.currentResponsiveCss=i);break}}},e.prototype.getAmpPlayerSources=function(){var e=this,t=this.context.onePlayerLogging.startQos("PlayerRenderEndQos",{name:"createPlayerEngineSources"});try{var n=(this.context.playbackUrls||[]).map(function(t){return e.getAmpPlayerSourceValue(t)});return t.end(),n}catch(e){throw t.endUnexpectedError("Fatal",e),e}},e.prototype.shouldGotoOriginForHLS=function(){return Object(i.t)("11")},e.prototype.getPluginOptions=function(e){return{analytics_collectData:{debug:!1,metricsToTrack:["viewed","heartbeat","playbackSummary","downloadInfo","warnings"],streamId:"SCRUBBED"},retryPlugin:{}}},e.prototype.initEmbedPlaybackErrorHandler=function(e){return Object(a.t)(this,void 0,void 0,function(){return Object(a.i)(this,function(t){return this.embedPlaybackErrorHandler=new be(this.context,this.retryPlayer,this.playbackTelemetryService.sendAdhocPlaybackTelemetry,e.reloadPlayer,!e.isRetryOnDecodeErrorDisabled,this.isEngineRetryDisabled),[2]})})},e.prototype.pauseVideoOnSwipeEvent=function(){var e=this,t=this.ampPlayer.playerContainer();if(t){var n=!1,a=0;["mousedown","touchstart"].forEach(function(e){return t.addEventListener(e,function(){a=t.getBoundingClientRect().left,n=!0})}),["mouseup","touchend"].forEach(function(e){return t.addEventListener(e,function(){n=!1})}),["mousemove","touchmove"].forEach(function(i){return t.addEventListener(i,function(){e.ampPlayer.isFullscreen()||e.ampPlayer.paused()||!n||(t.getBoundingClientRect().left+8<a||t.getBoundingClientRect().left-8>a)&&e.ampPlayer.pause()})})}},e.prototype.listenToPlayerEvents=function(e){var t=this,n=Object(s.e)(this.context.settingsStore.getSettingObject("isAddingVideoSeekingAriaMessage","boolean"));this.ampPlayer.addEventListener(C,function(){t.sendErrorEvent()}),this.ampPlayer.addEventListener(Q,function(){t.playbackTelemetryService.sendAdhocPlaybackTelemetry(Q,{triggerType:Q})});var a=function(){if(e.startTimeInSeconds&&!isNaN(e.startTimeInSeconds)){t.ampPlayer.currentTime(e.startTimeInSeconds);var n=Object(s.e)(t.context.settingsStore.getSettingObject("isSetAmpTimeErrorLoggingEnabled","boolean")),i=Math.abs(t.ampPlayer.currentTime()-e.startTimeInSeconds)>=.1;n&&i&&t.context.onePlayerLogging.warn("PlayerError",Object(_.n)("Failed to set AMP current time"),{name:"setPlayerTimeFailure",isExpected:!1})}t.ampPlayer.removeEventListener(E,a)};Object(s.e)(this.context.settingsStore.getSettingObject("isStartTimeInSecondsAmpFixEnabled","boolean"))?this.ampPlayer.addEventListener(E,a):this.ampPlayer.one(L,a),this.ampPlayer.addEventListener(k,function(){t.updateScreenReaderSpeech(k)}),n&&this.ampPlayer.addEventListener(M,function(){var e=Object(le.t)(Object(le.a)(t.ampPlayer.currentTime()));t.updateScreenReaderSpeech(M,Object(tt.e)(e,t.localization))}),this.ampPlayer.addEventListener(A,function(){t.updateScreenReaderSpeech(A)}),this.ampPlayer.addEventListener($,function(e,n){t.updateScreenReaderSpeech($,Math.floor(n.secondsSkipped).toString())}),this.ampPlayer.addEventListener(ee,function(e,n){t.updateScreenReaderSpeech(ee,Math.floor(n.secondsBack).toString())}),this.ampPlayer.addEventListener(K,function(){t.updateScreenReaderSpeech(K)}),this.ampPlayer.addEventListener(W,function(){t.updateScreenReaderSpeech(W)}),this.ampPlayer.addEventListener(z,function(){t.updateScreenReaderSpeech(z)}),this.ampPlayer.addEventListener(G,function(){t.updateScreenReaderSpeech(G)}),this.ampPlayer.addEventListener(J,function(e,n){t.updateScreenReaderSpeech(J,n.newSetting)}),this.ampPlayer.addEventListener("segmentsAvailable",function(){t.context.streamSession.hideErrorBox()}),this.ampPlayer.addEventListener("localStorageAccessFailure",function(e,n){t.context.onePlayerLogging.warn("PlayerError",n.error,{name:"localStorageAccessFailure",isExpected:!1,codeLocation:n.location||o.e})}),this.ampPlayer.addEventListener("fullscreenchange",function(){var e=t;setTimeout(function(){e.updateScreenReaderSpeech(t.ampPlayer.isFullscreen()?R:N)},1e3),t.preventSwipeInFullScreen()})},e.prototype.handleMouseDown=function(e){e.stopPropagation()},e.prototype.preventSwipeInFullScreen=function(){var e=this.ampPlayer.playerElement();e&&(this.ampPlayer.isFullscreen()?e.addEventListener("mousedown",this.handleMouseDown):e.removeEventListener("mousedown",this.handleMouseDown))},e.prototype.createScreenReaderMessageContainer=function(){var e=this.ampPlayer.playerElement();if(e){var t=document.createElement("div");t.setAttribute("id",this.screenReaderMessageContainerId),t.setAttribute("role","status"),t.setAttribute("aria-live","assertive"),t.setAttribute("aria-atomic","true"),t.setAttribute("style","width: 1px; height: 1px; margin: -1px; position: absolute;  border: 0; padding: 0px; overflow: hidden; clip: rect(0 0 0 0); clip-path: polygon(0px 0px, 0px 0px, 0px 0px); -webkit-clip-path: polygon(0px 0px, 0px 0px, 0px 0px); white-space: nowrap, opacity: 0; font-size: 0;"),t.innerHTML="",this.context.container.appendChild(t);var n=e.querySelector(".vjs-screen-reader-text"),a=e.firstChild;n&&(a?e.insertBefore(n,a):e.appendChild(n))}},e.prototype.sendErrorEvent=function(){var e=this,t=this.ampPlayer.error();t&&(this.lastAMPError=t,this.embedPlaybackErrorHandler.handleError(t,this.ampPlayer),this.isEngineRetryDisabled||this.isRetryOnDecodeErrorDisabled||this.ampPlayer.one("progress",function(){return e.recoverFromError()}))},e.prototype.mapUrlToTrack=function(e,t){var n=this.localization.getString("PlayerSkinCaptionsAuto"),a="captions";return Object(s.e)(this.context.settingsStore.getSettingObject("isMultipleTranscriptsEnabled","boolean"))?{src:e.url,srclang:e.languageTag||"spokenLanguage",label:t||n,kind:a}:{src:e.url,srcLang:e.languageTag||"en",label:t||n,kind:a}},e}(),ot=n(1123),st=n(1780),ct=function(e,t,n,r,o,s,c,d,l,u,f,p,m,_,h,b,g,v){var y=this;this.container=t,this.resourceLoaders=o,this.localization=s,this.onePlayerLogging=c,this.settingsStore=d,this.userSessionData=l,this.enginePhaseHandlers=u,this.enableRefactoredTelemetry=f,this.enableW3CTelemetry=p,this.isResetNSFieldsOnFallbackEnabled=m,this.isDownloadBlocked=_,this.fileSizeInBytes=h,this.isNativeDownloadSizelogEnabled=b,this.isProgressiveCorrelationIdEnabled=g,this.isFluentMtcEnabled=v,this.initialize=function(){return Object(a.t)(y,void 0,void 0,function(){var e,t,n;return Object(a.i)(this,function(a){switch(a.label){case 0:return e=Object(i.n)()?localStorage.getItem(ie.e):void 0,t=e||this.localization.getLanguage(),n=this,[4,this.resourceLoaders.initPhase("loadPlayerEngineResources",function(){return Object(_e.n)(t)})];case 1:return n.playerResources=a.sent(),[2]}})})},this.getOcvUserSessionData=function(){var e,t;return{clientSessionId:(null===(e=y.userSessionData)||void 0===e?void 0:e.clientSessionId)||"",userSessionId:(null===(t=y.userSessionData)||void 0===t?void 0:t.userSessionId)||"",uniqueId:y.streamSession.userSessionInfo.UserClaim.UserInfo.UniqueId,tenantId:y.streamSession.userSessionInfo.UserClaim.TenantId}},this.playbackSessionId=e.userSessionInfo.SessionId;var S=e.loggingService,D=e.portalConfiguration,I=e.userSessionInfo,x=e.viewContext;this.streamSession={portalConfiguration:D,userSessionInfo:I,loggingService:S,telemetryViewContext:new st.e(x),showErrorBox:n,hideErrorBox:r,getOcvUserSessionData:this.getOcvUserSessionData}},dt={"application/vnd.ms-sstr+xml":he.n.Smooth,"application/dash+xml":he.n.Dash,"application/vnd.apple.mpegurl":he.n.Hls,"video/mp4":he.n.Progressive},lt=["None","LoadedMetadata","LoadedData","CanPlay","CanPlayThrough"],ut=function(){function e(t,n,i,r,o,c,d,l,u,f,p,m){var h=this;this.onePlayerContext=o,this.isFluentMtcEnabled=d,this.returnVideoElementToHost=l,this.appStart=f,this.isDownloadBlocked=p,this.playbackRates=[.5,1,1.2,1.5,1.8,2],this.mediaDurationsInSeconds={},this._playState=new se.e(void 0),this._autoplayFailed=new se.e(void 0),this._isFullscreen=new se.e(void 0),this._loadingState=new v.e("None"),this._currentTimeInSeconds=new se.e(void 0),this._mediaDurationInSeconds=new se.e(0),this._seeking=new ce.e,this._playbackFormat=new v.e(void 0),this._playbackTrack=new v.e("OriginalAudio"),this._isActive=new ce.e,this._isPlayerReady=new v.e(!1),this._isPreRoll=new v.e(!0),this._isEnhancedTrackReady=new v.e(!1),this._audioStreamSwitchingFailed=new v.e(!1),this._muted=new se.e(!1),this._volume=new se.e(5),this._loop=new se.e(!1),this._playbackRate=new se.e(1),this._downloadBitrate=new se.e(void 0),this._availableBitrateQualities=new se.e([]),this._bufferedTimeRanges=new se.e(void 0),this._textTracks=new se.e([]),this._activeTextTrack=new se.e(void 0),this._hasAudioStream=new v.e(!0),this._hasAudio=new v.e(void 0),this._mediaDimensions=new v.e(void 0),this._latestFatalError=new v.e(void 0),this._getItemUrl=new v.e(void 0),this._isBuffering=new v.e(!0),this._hasStartedPlaying=!1,this._loadMode="autoplayOff",this._haveSummarizedResourceTimings=!1,this.initialize=function(){return h._streamVideoPlayerContext.initialize()},this.unload=function(){h._streamVideoPlayer&&h._streamVideoPlayer.dispose()},this.initializeTextTracks=function(e){return h.initializeClosedCaptions(e)},this.disableTextTracks=function(){h._player&&h._player.disableTextTracks()},this.switchToAdaptiveStreaming=function(){if(!h._player)return!1;try{return h._player.switchToAdaptiveStreamingPlaybackType(),!0}catch(e){return h.onePlayerContext.log.fatal("PlayerError",e,{name:"ForcingAdaptiveStreamingFailed",isExpected:!1}),!1}},this.canSwitchToAdaptiveStreaming=function(){if(!h._player)return!1;var e=dt[h._player.currentType()];return!(h._techOrder[0]===he.e.AzureHtml5JS&&!h.isAdaptiveStreamingPlaybackFormat(e))},this.renderVideo=function(e,t){return Object(a.t)(h,void 0,void 0,function(){var n,i,r;return Object(a.i)(this,function(a){return this._favorProgressive=this.shouldFavorProgressive(t),this._usePlaybackSpeedLocalStorage=t.showPlaybackSpeedButton,n=this.ensurePlayerInitialized(),i=[],e.dashUrl&&i.push({mimeType:de.t.dash,playbackUrl:e.dashUrl}),e.hlsUrl&&i.push({mimeType:de.t.hls,playbackUrl:e.hlsUrl}),"audio"===t.mediaType?e.progressiveUrl&&i.unshift({mimeType:de.t.progressive,playbackUrl:e.progressiveUrl}):e.progressiveUrl&&i.push({mimeType:de.t.progressive,playbackUrl:e.progressiveUrl}),this._loadMode=t.loadMode,this._streamVideoPlayerContext.playbackUrls=i,r=this.createStreamVideoPlayerOptions(t),[2,n.renderPlayer(r)]})})},this.getCurrentFrame=function(){if(!h._player)return Promise.resolve(void 0);if(h._isRefactoredAMPThumbnailExtractionEnabled){var e=h.videoElement||h._player.playerElement().getElementsByTagName("video")[0];return Object(ot.e)(0,0,h._canvasForFrameExtraction,e)}return h.getCurrentFrameInternal(0,0)},this.getResizedCurrentFrame=function(e,t){if(e<=0||t<=0)throw new Error("Provided width and height must be positive values.");if(!h._player)return Promise.resolve(void 0);if(h._isRefactoredAMPThumbnailExtractionEnabled){var n=h.videoElement||h._player.playerElement().getElementsByTagName("video")[0];return Object(ot.e)(e,t,h._canvasForFrameExtraction,n)}return h.getCurrentFrameInternal(e,t)},this.getScaledCurrentFrame=function(e,t){if(void 0===t&&(t=oe.e.Longer),e<=0)throw new Error("Provided edge length must be a positive value.");if(!h._player)return Promise.resolve(void 0);if(h._isRefactoredAMPThumbnailExtractionEnabled){var n=h.videoElement||h._player.playerElement().getElementsByTagName("video")[0];switch(t){case oe.e.Horizontal:return Object(ot.e)(e,0,h._canvasForFrameExtraction,n);case oe.e.Vertical:return Object(ot.e)(0,e,h._canvasForFrameExtraction,n);case oe.e.Longer:var a=(r=h._player.videoHeight()>h._player.videoWidth())?0:e,i=r?e:0;return Object(ot.e)(a,i,h._canvasForFrameExtraction,n)}}else switch(t){case oe.e.Horizontal:return h.getCurrentFrameInternal(e,0);case oe.e.Vertical:return h.getCurrentFrameInternal(0,e);case oe.e.Longer:var r;return a=(r=h._player.videoHeight()>h._player.videoWidth())?0:e,i=r?e:0,h.getCurrentFrameInternal(a,i)}},this.getPosterImage=function(){if(h._player)return h._player.poster()},this.initializeClosedCaptions=function(e){return Object(a.t)(h,void 0,void 0,function(){return Object(a.i)(this,function(t){switch(t.label){case 0:return Array.isArray(e)&&e.length&&e[0].url||(null==e?void 0:e.url)?[4,this.ensurePlayerInitialized().initializeTextTracks(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},this.getPlayIntervals=function(){if(h._player&&h._player.getDynamicTelemetryProperties){var e=h._player.getDynamicTelemetryProperties().playIntervals;if(e&&e.length>=5)return e="["+e+"]",JSON.parse(e)}return[]},this.ensurePlayerInitialized=function(){if(void 0===h._streamVideoPlayer)try{h._streamVideoPlayer=new rt(h._streamVideoPlayerContext,h.handleOnPlayerCreated,"FastEmbedLight")}catch(e){throw h.onePlayerContext.log.fatal("PlayerError",e,{name:"StreamVideoPlayerInitFailed",isExpected:!1}),e}return h._streamVideoPlayer},this.summarizeResourceTimingsAfterLoad=function(){var e=h.onePlayerContext.log.startQos("PlayerRenderEndQos",{name:"summarizeResourceTimings"});if((Object(s.e)(h.onePlayerContext.settingsStore.getSettingObject("60102","boolean"))||Object(s.e)(h.onePlayerContext.settingsStore.getSettingObject("isAggregatedW3CTelemetryEnabledEcs","boolean")))&&void 0!==h.appStart&&!h._haveSummarizedResourceTimings){h._haveSummarizedResourceTimings=!0;try{if(!h._streamVideoPlayer.playbackTelemetryService)return;h._streamVideoPlayer.playbackTelemetryService.calculateW3CTelemetry(h.appStart),e.end()}catch(t){e.endUnexpectedError("Warning",t)}}},this.toggleSeekMouseVisibility=function(e){var t=e?"visible":"hidden",n=h._player.playerElement().getElementsByClassName("vjs-mouse-display");n&&(n[0].style.visibility=t)},this.isAdaptiveStreamingPlaybackFormat=function(e){return e===he.n.Dash||e===he.n.Hls},this.createStreamVideoPlayerOptions=function(t){var n=["VideoProcessing_BitrateTooHigh","VideoProcessing_ByteStreamTypeNotSupported","VideoProcessing_ByteStreamTypeNotSupported_0eec.5c3f"];(Object(s.e)(h.onePlayerContext.settingsStore.getSettingObject("isForbiddenErrorFallbackEnabled","boolean"))||Object(s.e)(h.onePlayerContext.settingsStore.getSettingObject("60450","boolean")))&&n.push("Web_403Forbidden");var a=Object(s.e)(h.onePlayerContext.settingsStore.getSettingObject("isWaitForFirstSegmentEnabled","boolean"))||Object(s.e)(h.onePlayerContext.settingsStore.getSettingObject("60556","boolean"));h._techOrder=h.shouldFavorProgressive(t)?[he.e.Html5,he.e.AzureHtml5JS,he.e.Flash]:[he.e.AzureHtml5JS,he.e.Flash,he.e.Html5];var i=Object(s.e)(h.onePlayerContext.settingsStore.getSettingObject("isFastSourceSetEnabled","boolean")),r=Object(s.e)(h.onePlayerContext.settingsStore.getSettingObject("isBigPlayButtonHiddenOnAutoplay","boolean")),o=Object(s.e)(h.onePlayerContext.settingsStore.getSettingObject("isIncreasedDefaultBandwidth","boolean")),c=Object(s.e)(h.onePlayerContext.settingsStore.getSettingObject("isIncreasedDefaultBandwidthV2","boolean")),d=Object(s.e)(h.onePlayerContext.settingsStore.getSettingObject("isFinegrainedBandwidthTelemetryEnabled","boolean")),l=Object(s.e)(h.onePlayerContext.settingsStore.getSettingObject("isImprovedSourceBufferLogEnabled","boolean")),u=Object(s.e)(h.onePlayerContext.settingsStore.getSettingObject("isClosedCaptionsInMtcOnlyEnabled","boolean"));return h._getItemUrl.value=t.getItemUrl?t.getItemUrl():void 0,{reloadPlayer:t.reloadPlayer,autoplay:"autoplayOn"===t.loadMode||"deferredLoad"===t.loadMode,expectMeTAManifest:!0,enableFallback:!0,fastSourceSet:i,fullScreenToggleMode:t.fullScreenToggleMode,hideBigPlayButtonOnAutoplay:r,getItemUrl:t.getItemUrl,disableScrubToken:!1,isVolumeShortcutHandlingEnabled:t.isVolumeShortcutHandlingEnabled,isRemoveBigPlayButtonFocusEnabled:t.isRemoveBigPlayButtonFocusEnabled,showPlaybackSpeedButton:t.showPlaybackSpeedButton,showPopOutButton:t.showPopOutButton,popOutButtonHasStreamIcon:t.popOutButtonHasStreamIcon,getDownloadRequestParametersAsync:t.getDownloadRequestParametersAsync,traceConfig:t.maxLogLevel?{maxLogLevel:t.maxLogLevel}:void 0,isPlayerPluginsCleanUpEnabled:t.isPlayerPluginsCleanUpEnabled,customPlayerSettings:{customHeuristicSettings:{maxStreamingResolutionLimit:t.maxStreamingResolutionLimit,maxWaitTimeForFirstSegmentInMSec:a?3500:void 0,defaultBandwidthKbps:e.getDefaultBandwidth(c,o),maxBufferInWallClockSec:t.maxBufferingSec,maxBufferInWallClockSecForCopyCodec:t.maxBufferingSec}},heuristicProfile:t.heuristicProfile,techOrder:h._techOrder,poster:t.poster,playerBackgroundColor:t.playerBackgroundColor,uiMode:t.uiMode,startTimeInSeconds:t.startTimeInSeconds,enableHybridMode:t.enableHybridPlayback,prefetchedManifestPromise:t.prefetchedManifestPromise,customFallbackServiceErrorCodes:n,prefetchedVideoElement:t.prefetchedVideoElement||void 0,mediaType:t.mediaType,showDivSliderIsFocusable:t.showDivSliderIsFocusable,thumbnailBase64Options:t.thumbnailBase64Options,showSetDynamicSizeInDialogEnabled:t.showSetDynamicSizeInDialogEnabled,enableFinegrainedBandwidthTelemetry:d,isMouseTooltipPositionEnabled:t.isMouseTooltipPositionEnabled,isVolumeBarAriaLabelLocalizationEnabled:t.isVolumeBarAriaLabelLocalizationEnabled,isKeyboardShortcutUpdateEnabled:t.isKeyboardShortcutUpdateEnabled,isRetryOnDecodeErrorDisabled:t.isRetryOnDecodeErrorDisabled,isImprovedSourceBufferLogEnabled:l,prefetchAudioInitSegmentQuality:t.prefetchAudioInitSegmentQualityPromise,prefetchVideoInitSegmentQuality:t.prefetchVideoInitSegmentQualityPromise,isPlaybackSpeedInPopoutChatEnabled:t.isPlaybackSpeedInPopoutChatEnabled,isClosedCaptionsInMtcOnlyEnabled:u}},this.getCurrentFrameInternal=function(e,t){return Object(a.t)(h,void 0,void 0,function(){var n,i=this;return Object(a.i)(this,function(a){switch(a.label){case 0:return this._player?(this.drawCurrentFrameToCanvas(e,t),HTMLCanvasElement.prototype.toBlob?[4,new Promise(function(e){i._canvasForFrameExtraction.toBlob(e,"image/jpeg")})]:[2,this.convertDataURLToBlob(this._canvasForFrameExtraction.toDataURL("image/jpeg"))]):[2,Promise.resolve(void 0)];case 1:return[2,null!=(n=a.sent())?n:void 0]}})})},this.drawCurrentFrameToCanvas=function(e,t){var n=h._canvasForFrameExtraction.getContext("2d");h.updateCanvasDimensions(e,t)||n.clearRect(0,0,h._canvasForFrameExtraction.width,h._canvasForFrameExtraction.height);var a=h.videoElement||h._player.playerElement().getElementsByTagName("video")[0];n.drawImage(a,0,0,h._canvasForFrameExtraction.width,h._canvasForFrameExtraction.height)},this.updateCanvasDimensions=function(e,t){return e<=0&&t<=0&&(e=h._player.videoWidth(),t=h._player.videoHeight()),e<=0&&(e=Math.round(t*h._player.videoWidth()/h._player.videoHeight())),t<=0&&(t=Math.round(e*h._player.videoHeight()/h._player.videoWidth())),(h._canvasForFrameExtraction.width!==e||h._canvasForFrameExtraction.height!==t)&&(h._canvasForFrameExtraction.width=e,h._canvasForFrameExtraction.height=t,!0)},this.wireAmpPlaybackFormatToObservable=function(e){h._playbackFormat.value=dt[e.currentType()]},this.wireAmpCurrentTimeToObservable=function(e){h._currentTimeInSeconds.attach(function(t){e.currentTime(t),h.isFluentMtcEnabled&&h._currentTimeInSeconds.externalValueUpdated(e.currentTime())},e.currentTime()),e.addEventListener(P,function(){h.isFluentMtcEnabled&&e.currentTime()===h._currentTimeInSeconds.value||h._currentTimeInSeconds.externalValueUpdated(e.currentTime())})},this.wireAmpMediaDurationInSecondsToObservable=function(e){e.addEventListener("durationchange",function(){h._mediaDurationInSeconds.externalValueUpdated(e.duration())}),e.addEventListener(x,function(){h._mediaDurationInSeconds.value!==e.duration()&&h._mediaDurationInSeconds.externalValueUpdated(e.duration())})},this.wireAmpPlaybackRateToObservable=function(e){h._playbackRate.attach(function(t){return e.canControlPlaybackRate()&&e.playbackRate(t)},e.playbackRate()),e.addEventListener("ratechange",function(){h._playbackRate.externalValueUpdated(e.playbackRate())})},this.wireAmpDownloadBitrateToObservable=function(e){h._downloadBitrate.externalValueUpdated(e.currentDownloadBitrate()),h._downloadBitrate.attach(function(t){if(t!==h._downloadBitrate.value){var n=e.currentVideoStreamList(),a=n&&n.streams&&n.streams[n.selectedIndex],i=a&&a.tracks;if(-1!==t){for(var r=0;r<i.length;r++)if(i[r].bitrate===t){a.selectTrackByIndex(r);break}}else a.selectTrackByIndex(-1)}},e.currentDownloadBitrate()),e.addEventListener("downloadbitratechanged",function(){h._downloadBitrate.externalValueUpdated(e.currentDownloadBitrate())})},this.wireAmpBitrateQualitiesToObservable=function(e){var t=e.currentVideoStreamList();h.updateAmpBitrateQualities(t),e.addEventListener(w,function(){var t=e.currentVideoStreamList();h.updateAmpBitrateQualities(t)})},this.updateAmpBitrateQualities=function(e){if(e&&0!==e.streams.length){var t=e.streams[e.selectedIndex],n=t&&t.tracks;if(n.length>0){var a=[];if(n.length>1){var i=Object(s.e)(h.onePlayerContext.settingsStore.getSettingObject("isAutoQualityLabelLocalizedEnabled","boolean"))?h.onePlayerContext.loc.getString("PlaybackSettings.AutoQualityLabel"):"Auto";a.push({bitrate:-1,selectable:!0,label:i})}for(var r=0;r<n.length;r++)a.push({bitrate:n[r].bitrate,selectable:n[r].selectable,label:n[r].height+"p"});h._availableBitrateQualities.externalValueUpdated(a)}}else h._availableBitrateQualities.externalValueUpdated([])},this.wireAmpBufferedTimeRangesToObservable=function(e){h._bufferedTimeRanges.externalValueUpdated(e.buffered()),e.addEventListener("progress",function(){h._bufferedTimeRanges.externalValueUpdated(e.buffered())})},this.wireAmpTextTracksToObservable=function(e){var t=e.textTracks();t&&h._textTracks.externalValueUpdated(h.toTextTrackArray(t)),e.addEventListener("texttrackchange",function(){var t=e.textTracks();t&&h._textTracks.externalValueUpdated(h.toTextTrackArray(t))})},this.wireAmpActiveTextTrackToObservable=function(e){h._activeTextTrack.externalValueUpdated(e.getCurrentTextTrack()),h._activeTextTrack.attach(function(t){t&&e.setActiveTextTrack(t)},e.getCurrentTextTrack()),e.addEventListener("texttrackchange",function(){h._activeTextTrack.externalValueUpdated(e.getCurrentTextTrack())})},this.wireAmpVolumeToObservable=function(e){h._volume.attach(function(t){return e.volume(t)},e.volume()),e.addEventListener("volumechange",function(){e.muted()?h._volume.externalValueUpdated(0):h._volume.externalValueUpdated(e.volume())})},this.wireAmpMuteToObservable=function(e){h._muted.attach(function(t){return e.muted(t)},e.muted()),e.addEventListener(F,function(){h._muted.externalValueUpdated(e.muted())}),Object(s.e)(h.onePlayerContext.settingsStore.getSettingObject("isUnmuteEventFixEnabled","boolean"))&&e.addEventListener(H,function(){h._muted.externalValueUpdated(e.muted())})},this.wireAmpLoopToObservable=function(e){h._loop.attach(function(t){try{e.loop(t)}catch(e){}h._loop.externalValueUpdated(t)},!1)},this.wireAmpPlaybackAudioToObservable=function(e){var t=e.currentAudioStreamList();if(Object(s.e)(h.onePlayerContext.settingsStore.getSettingObject("disableNoiseSuppressionNoAudio","boolean"))&&(h._hasAudioStream.value=e.hasAudioStream()),t&&t.streams&&2===t.streams.length){var n=t.streams[0].label===de.e.OriginalAudio?[0,1]:[1,0],a=n[0],i=n[1];h._playbackTrack.subscribe(function(e){h._audioStreamSwitchingFailed.value=!1,"EnhancedAudio"===e?(h._isEnhancedTrackReady.value=!1,t.switchIndex(i)):t.switchIndex(a)}),Object(s.e)(h.onePlayerContext.settingsStore.getSettingObject("disableNoiseSuppressionNoAudio","boolean"))&&h._playbackFormat.subscribe(function(){h._hasAudioStream.value=e.hasAudioStream()});var r=function(){h._audioStreamSwitchingFailed.value=!0};t.addEventListener("streamindexinvalid",r),t.addEventListener("streamselectnotsupported",r),e.addEventListener("enhancedTrackReady",function(){h._isEnhancedTrackReady.value=!0})}},this.wireAmpEventHandlers=function(e){h._loadingState.value=lt[e.readyState()],h.wireTier1PerfMetrics(e),h.wireAutoplayFailureReport(e),h.isFluentMtcEnabled&&h.wireAmpMediaDurationInSecondsToObservable(e),e.addEventListener(T,function(){h._isBuffering.value=!0}),e.addEventListener(I,function(){h._isBuffering.value=!1}),e.addEventListener(w,function(){h._loadingState.value="LoadedMetadata",h.mediaDurationsInSeconds.afterLoadedMetadata=h.mediaDurationInSeconds}),e.addEventListener(E,function(){h.wireAmpPlaybackAudioToObservable(e),h.wireAmpPlaybackFormatToObservable(e),h.wireAmpCurrentTimeToObservable(e),h.wireAmpMuteToObservable(e),h.wireAmpLoopToObservable(e),h.wireAmpPlaybackRateToObservable(e),h.wireAmpPlayStateToObservable(e),h.wireAmpVolumeToObservable(e),h.isFluentMtcEnabled&&(h.wireAmpTextTracksToObservable(e),h.wireAmpActiveTextTrackToObservable(e),h.wireAmpBufferedTimeRangesToObservable(e),Object(s.e)(h.onePlayerContext.settingsStore.getSettingObject("areWireAmpBitratePropertiesEnabled","boolean"))&&(h.wireAmpDownloadBitrateToObservable(e),h.wireAmpBitrateQualitiesToObservable(e))),h.onePlayerContext.settingsStore.getSettingObject("isFluentMtcSkipLoadedDataStateEnabled","boolean")&&h.isFluentMtcEnabled||(h._loadingState.value="LoadedData"),h.mediaDurationsInSeconds.afterLoadedData=h.mediaDurationInSeconds,Object(s.e)(h.onePlayerContext.settingsStore.getSettingObject("isMediaDimensionReportingEnabled","boolean"))&&(h._mediaDimensions.value={mediaWidth:e.videoWidth(),mediaHeight:e.videoHeight()})}),e.addEventListener(I,function(){h._loadingState.value="CanPlay",h.mediaDurationsInSeconds.afterCanPlay=h.mediaDurationInSeconds}),e.addEventListener(x,function(){h._isPlayerReady.value=!0,h.isFluentMtcEnabled&&h._hasStartedPlaying||(h._isPreRoll.value=!0),h.wireAmpSeekingToObservable(e),h.wireAmpIsFullscreenToObservable(e),h._loadingState.value="CanPlayThrough",h.onePlayerContext.states.setState("CanPlayThrough"),h._streamVideoPlayerContext&&h._streamVideoPlayerContext.enginePhaseHandlers&&h._streamVideoPlayerContext.enginePhaseHandlers.onCanPlaythrough(),h.mediaDurationsInSeconds.afterCanPlayThrough=h.mediaDurationInSeconds}),e.addEventListener("useractive",function(){h._isActive.notify(!0)}),e.addEventListener("userinactive",function(){h._isActive.notify(!1)}),e.addEventListener(C,function(){var t=e.error();h.summarizeResourceTimingsAfterLoad(),h._streamVideoPlayerContext.enginePhaseHandlers&&h._streamVideoPlayerContext.enginePhaseHandlers.onFailedSetSource(t),Object(s.e)(h.onePlayerContext.settingsStore.getSettingObject("isOnePlayerListenToLatestFatalErrorEnabled","boolean"))&&(h._latestFatalError.value=t)}),e.addEventListener(U,function(){h.returnVideoElementToHost&&(h.videoElement=e.playerElement().getElementsByTagName("video")[0])}),e.addEventListener("manifestParsingCompleted",function(){h.mediaDurationsInSeconds.afterManifestParsingCompleted=h.mediaDurationInSeconds}),Object(s.e)(h.onePlayerContext.settingsStore.getSettingObject("isAmpAutoplayFailedObservableEnabled","boolean"))&&e.addEventListener("autoplayfailed",function(){h._autoplayFailed.externalValueUpdated(!0),h.onePlayerContext.log.warn("PlayerError",Object(_.n)("Received autoplayfailed event from amp"),{name:"AmpAutoplayFailed",isExpected:!0})})},this.wireAmpSeekingToObservable=function(e){e.addEventListener(M,function(){h._seeking.notify(!0)}),e.addEventListener("seeked",function(){h._seeking.notify(!1)})},this.wireAmpIsFullscreenToObservable=function(e){h._isFullscreen.attach(function(t){t?e.enterFullscreen():e.exitFullscreen()},e.isFullscreen()),e.addEventListener(R,function(){h._isFullscreen.externalValueUpdated(!0),h.isFluentMtcEnabled||h.logUserAction("PlayerButtonAction","FullScreen")}),e.addEventListener(N,function(){h._isFullscreen.externalValueUpdated(!1),h.isFluentMtcEnabled||h.logUserAction("PlayerButtonAction","ExitFullScreen")})},this.wireAmpPlayStateToObservable=function(e){h._playState.attach(function(t){"Playing"===t?e.play():"Paused"===t&&e.pause()},e.paused()?"Paused":"Playing"),e.addEventListener(A,function(){h._playState.externalValueUpdated("Paused"),h.isFluentMtcEnabled||h.logUserAction("PlayerPlayPauseAction","Pause"),h._isActive.notify(!0)}),e.addEventListener(k,function(){h._hasStartedPlaying||(h._isPreRoll.value=!1,h._hasStartedPlaying=!0,h.addCssLeavingPreRoll()),h._playState.externalValueUpdated("Playing"),h.isFluentMtcEnabled||h.logUserAction("PlayerPlayPauseAction","Play")})},this.wireTier1PerfMetrics=function(e){switch(e.one(x,function(){var e=h.onePlayerContext.longLivedQosEvents.tryCallEnd("timeToLoadQos");if(e&&Object(s.e)(h.onePlayerContext.settingsStore.getSettingObject("isTTLHeartbeatEnabled","boolean"))){var t=e.filter(function(e){return e instanceof Object&&"durationMs"in e})[0];t&&h._streamVideoPlayer.playbackTelemetryService&&h._streamVideoPlayer.playbackTelemetryService.addTimeToLoadHeartbeat(t.durationMs)}}),e.one(x,function(){h.onePlayerContext.longLivedQosEvents.tryCallEnd("timeToInteractiveQos")}),"autoplayOff"===h._loadMode&&e.one(T,function(){h.wireAmpPlaybackFormatToObservable(e),"DASH"!==h._playbackFormat.value&&h.onePlayerContext.longLivedQosEvents.tryCallEnd("timeToInteractiveQos")}),h._loadMode){case"autoplayOff":e.one("playButtonClicked",function(){var t=h.onePlayerContext.log.startQos("PlayerReportingEndQos",{name:"TimeToInteractionResponse",resultVariant:"Playback"});h.onePlayerContext.longLivedQosEvents.add("timeToInteractionResponseQos",t),e.one(k,function(){h.onePlayerContext.longLivedQosEvents.tryCallEnd("timeToInteractionResponseQos")})});break;case"autoplayOn":e.one("playButtonClicked",function(){h.onePlayerContext.log.warn("PlayerError",Object(_.n)("Autoplay on but play button clicked. Could be the browser preventing autoplay."),{name:"PlayButtonClickInAutoplay",isExpected:!1})});break;case"deferredLoad":e.one(k,function(){h.onePlayerContext.longLivedQosEvents.tryCallEnd("timeToInteractionResponseQos")})}},this.wireAutoplayFailureReport=function(e){if("autoplayOn"===h._loadMode){var t=!0,n=function(){t&&(t=!1,h.onePlayerContext.log.warn("PlayerError",Object(_.n)("Autoplay prevented or failed: Likely Chromium did not detect user input"),{name:"AutoplayFailure",isExpected:!0}))};e.one(L,function(){t=!1}),e.one(x,n),e.one(I,function(){setTimeout(n,5e3)})}},this.addCssLeavingPreRoll=function(){var e=h._streamVideoPlayerContext.container.querySelector(".azuremediaplayer");h._streamVideoPlayerContext.container.classList.add("leaving-preroll"),e&&e.classList.add("leaving-preroll"),setTimeout(function(){h.removeCssLeavingPreRoll()},390)},this.removeCssLeavingPreRoll=function(){var e=h._streamVideoPlayerContext.container.querySelector(".azuremediaplayer");h._streamVideoPlayerContext.container.classList.remove("leaving-preroll"),e&&e.classList.remove("leaving-preroll")},this.handleOnPlayerCreated=function(){h._player=h._streamVideoPlayer.player,h.isFluentMtcEnabled||h.logNonObservableAmpUserActions(h._player),h.wireAmpEventHandlers(h._player),h.triggerPlaybackSpeedLocalStorageEvent(h._player),h._favorProgressive&&h.triggerPlayerFavorsProgressive(h._player)},this.logNonObservableAmpUserActions=function(e){e.addEventListener(F,function(){h.logUserAction("PlayerButtonAction","Mute")}),e.addEventListener(H,function(){h.logUserAction("PlayerButtonAction","Unmute")}),e.addEventListener(z,function(){h.logUserAction("PlayerButtonAction","CaptionsOn")}),e.addEventListener(G,function(){h.logUserAction("PlayerButtonAction","CaptionsOff")}),e.addEventListener(X,function(){h.logUserAction("PlayerButtonAction","OpenSettingsMenu")}),e.addEventListener(Y,function(){h.logUserAction("PlayerButtonAction","OpenPlaybackSpeedMenu")}),e.addEventListener(J,function(e,t){h.logUserAction("PlayerChangeSettingAction","ChangePlaybackSpeed",t)}),e.addEventListener($,function(e,t){h.logUserAction("PlayerButtonAction","SkipForward",t)}),e.addEventListener(ee,function(e,t){h.logUserAction("PlayerButtonAction","SkipBackward",t)}),e.addEventListener("popOutButton",function(e,t){h.logUserAction("PlayerButtonAction","PopOut",t)})},this.logUserAction=function(e,t,n){h.onePlayerContext.log.userAction(e,Object(a.e)({name:t,actionType:"LeftClick",playbackTimeSec:h._currentTimeInSeconds.value?h._currentTimeInSeconds.value:-1},n))},this.triggerPlaybackSpeedLocalStorageEvent=function(e){h._usePlaybackSpeedLocalStorage&&e.trigger("usePlaybackSpeedLocalStorage")},this.triggerPlayerFavorsProgressive=function(e){e.trigger("progressivePlaybackFavored")},this._streamVideoPlayerContext=new ct(t,n,i,r,c,o.loc,o.log,o.settingsStore,u,this.getPlayerEnginePhaseHandlers(),Object(s.e)(o.settingsStore.getSettingObject("isRefactorTelemetryEnabled","boolean")),Object(s.e)(o.settingsStore.getSettingObject("isW3CTelemetryEnabled","boolean")),Object(s.e)(o.settingsStore.getSettingObject("isResetNSFieldsOnFallbackEnabled","boolean")),this.isDownloadBlocked,m,Object(s.e)(o.settingsStore.getSettingObject("isNativeDownloadSizelogEnabled","boolean")),Object(s.e)(o.settingsStore.getSettingObject("isProgressiveCorrelationIdEnabled","boolean")),this.isFluentMtcEnabled),this._canvasForFrameExtraction=document.createElement("canvas"),Object(s.e)(this.onePlayerContext.settingsStore.getSettingObject("isUpdateVideoElementViaSubscriptionEnabled","boolean"))&&this.playbackFormat.subscribe(function(e){var t;e&&(h.videoElement=null===(t=h._player)||void 0===t?void 0:t.playerElement().getElementsByTagName("video")[0])}),this._isRefactoredAMPThumbnailExtractionEnabled=Object(s.e)(this.onePlayerContext.settingsStore.getSettingObject("isRefactoredAMPThumbnailExtractionEnabled","boolean"))}return Object.defineProperty(e.prototype,"playState",{get:function(){return this._playState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFullscreen",{get:function(){return this._isFullscreen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loadingState",{get:function(){return this._loadingState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoplayFailed",{get:function(){return this._autoplayFailed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTimeInSeconds",{get:function(){return this._currentTimeInSeconds},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mediaDurationInSeconds",{get:function(){return this._player?this._player.duration():0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mediaDurationInSecondsV2",{get:function(){return this._mediaDurationInSeconds},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seeking",{get:function(){return this._seeking},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playbackFormat",{get:function(){return this._playbackFormat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playbackTrack",{get:function(){return this._playbackTrack},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPlayerReady",{get:function(){return this._isPlayerReady},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPreRoll",{get:function(){return this._isPreRoll},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEnhancedTrackReady",{get:function(){return this._isEnhancedTrackReady},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"audioStreamSwitchingFailed",{get:function(){return this._audioStreamSwitchingFailed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._muted},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this._playbackRate},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"downloadBitrate",{get:function(){return this._downloadBitrate},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableBitrateQualities",{get:function(){return this._availableBitrateQualities},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bufferedTimeRanges",{get:function(){return this._bufferedTimeRanges},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textTracks",{get:function(){return this._textTracks},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeTextTrack",{get:function(){return this._activeTextTrack},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasAudioStream",{get:function(){return this._hasAudioStream},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasAudio",{get:function(){return this._hasAudio},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mediaDimensions",{get:function(){return this._mediaDimensions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isBuffering",{get:function(){return this._isBuffering},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"latestFatalError",{get:function(){return this._latestFatalError},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"itemUrl",{get:function(){return this._getItemUrl},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availablePlaybackFormats",{get:function(){return new v.e([])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availablePlaybackTracks",{get:function(){return new v.e([])},enumerable:!1,configurable:!0}),e.prototype.setTheme=function(e){this._streamVideoPlayerContext.contextTheme=e},e.prototype.setUserActive=function(){this._streamVideoPlayer.player.userActive(!0)},e.prototype.updateMetadataFetchInfo=function(e){this.ensurePlayerInitialized(),this._streamVideoPlayer.playbackTelemetryService&&this._streamVideoPlayer.playbackTelemetryService.updatePBTelemetryServiceValues({videoMetadataInfo:e})},e.prototype.toggleCCButtons=function(e,t){var n=Object(s.e)(this.onePlayerContext.settingsStore.getSettingObject("isAMPFixForMediaSettingsToggleCCButtonBugEnabled","boolean")),a=Object(s.e)(this.onePlayerContext.settingsStore.getSettingObject("isLateInitializeCCOnTranscriptToggleEnabled","boolean"));n&&(a&&e&&this._player&&this._player.textTracks().length<1&&t?this.initializeClosedCaptions(t):this.isFluentMtcEnabled?(this._textTracks.value=[],Object(s.e)(this.onePlayerContext.settingsStore.getSettingObject("isFluentMtcFixForTranscriptToggleCCButtonBugEnabled","boolean"))&&this._textTracks.externalValueUpdated([])):this._streamVideoPlayer.toggleCCButtons(e))},e.prototype.getVideoElement=function(){return this.videoElement},e.prototype.updateCaptionsContext=function(e){},e.prototype.shouldFavorProgressive=function(e){return Object(s.e)(this.onePlayerContext.settingsStore.getSettingObject("isDisallowFavorProgressiveForOldEdgeEnabled","boolean"))?(null==e?void 0:e.favorProgressive)&&Object(i.i)():null==e?void 0:e.favorProgressive},e.prototype.convertDataURLToBlob=function(e){var t=e.split(",");if(!(t.length<2)){for(var n=atob(t[1]),a=[],i=0;i<n.length;i++)a.push(n.charCodeAt(i));return new Blob([new Uint8Array(a)],{type:"image/jpeg"})}},e.prototype.toTextTrackArray=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},e.prototype.getPlayerEnginePhaseHandlers=function(){var e=this;return{onStartedSetSource:function(){e.onePlayerContext.longLivedQosEvents&&e.onePlayerContext.longLivedQosEvents.tryCallEnd("onePlayerRenderQos"),e._playerEngineRenderQos=e.onePlayerContext.log.startQos("PlayerRenderEndQos",{name:"playerEngineRender"})},onFailedSetSource:function(t){e._playerEngineRenderQos&&(e._playerEngineRenderQos.endUnexpectedError("Fatal",Object(u.e)(t)),e._playerEngineRenderQos=void 0)},onCanPlaythrough:function(){e._playerEngineRenderQos&&(e._playerEngineRenderQos.end(),e._playerEngineRenderQos=void 0)}}},e.getDefaultBandwidth=function(e,t){return e?5409:t?2401:1200},e}();function ft(e,t,n,a,i){var r=Array.from(e).find(function(e){return e.getAttribute("contentType")===t});if(r){var o=function(e,t,n,a){var i,r=null===(i=null==e?void 0:e.getElementsByTagName("SegmentTemplate")[0])||void 0===i?void 0:i.getAttribute("initialization");if(r){var o=new URL(r,t).toString();return n.includes("enableCdn=1")&&a&&e.getElementsByTagName("ContentProtection").length>0&&(o+="&generateHMAC=true"),o}}(r,n,a,i),s=function(e){var t=e.getElementsByTagName("Representation");return Array.from(t).map(function(e){var t,n;return{bandwidth:parseInt(null!==(t=null==e?void 0:e.getAttribute("bandwidth"))&&void 0!==t?t:"",10),quality:null!==(n=null==e?void 0:e.getAttribute("id"))&&void 0!==n?n:""}}).filter(function(e){return Number.isInteger(e.bandwidth)&&""!==e.quality})}(r);if(o&&0!==s.length)return{type:t,initializationLink:o,representations:s}}}function pt(e,t,n,i,r){return Object(a.t)(this,void 0,void 0,function(){var o,s,c,d,l,u,f,p;return Object(a.i)(this,function(a){switch(a.label){case 0:return o=r&&r>0?r:2e3,[4,n(i.initializationLink,e)];case 1:return(null==(s=a.sent())?void 0:s.url)?(c=s.url.replace("$RepresentationID$",t),d=performance.now(),l=new AbortController,u=setTimeout(function(){return l.abort()},o),[4,fetch(c,{signal:l.signal,headers:s.headers})]):[3,4];case 2:return f=a.sent(),clearTimeout(u),p=performance.now(),[4,f.arrayBuffer()];case 3:return[2,{arrBuf:a.sent(),status:f.status,statusText:f.statusText,headers:f.headers,url:c,timeSpentInMs:p-d}];case 4:return[2]}})})}function mt(e,t,n){return Object(a.t)(this,void 0,void 0,function(){var i,r;return Object(a.i)(this,function(a){switch(a.label){case 0:return[4,t];case 1:return(null==(i=a.sent())?void 0:i.audioAdaptationSet)?(o=i.audioAdaptationSet.representations,r=o[0].quality,e.initQos("prefetchAudioInitSegment",function(){return pt("audio",r,e.getDownloadRequestParametersAsync,i.audioAdaptationSet,n)}),[2,r]):[2,void 0]}var o})})}function _t(e,t,n){return Object(a.t)(this,void 0,void 0,function(){var i,r;return Object(a.i)(this,function(a){switch(a.label){case 0:return[4,t];case 1:return(null==(i=a.sent())?void 0:i.videoAdaptationSet)?(r=function(e,t,n){var a=e.find(function(e){return"vcopy"===e.quality});if(a)return a.quality;if(1===e.length)return e[0].quality;var i=function(e,t){var n=0;try{n=parseInt(JSON.parse(localStorage["OnePlayer.BandwidthKbps"]).val,10)}catch(a){n=ut.getDefaultBandwidth(e,t)}finally{return 1e3*n}}(t,n);if(i<=e[0].bandwidth/.95)return e[0].quality;for(var r=0;r<e.length-1;r++)if(i>=e[r].bandwidth/.95&&i<=e[r+1].bandwidth/.85)return e[r].quality;return e[e.length-1].quality}(i.videoAdaptationSet.representations,e.isIncreasedDefaultBandwidthV2,e.isIncreasedDefaultBandwidth),e.initQos("prefetchVideoInitSegment",function(){return pt("video",r,e.getDownloadRequestParametersAsync,i.videoAdaptationSet,n)}),[2,r]):[2,void 0]}})})}var ht,bt=n(1890),gt=n(1781),vt="hidden",yt="pagehide",St="visibilitychange",Dt=function(){function e(e){var t=this;this.startQos=function(e,n,a,i){var r=t.isPageInBackground.value,o=t.isPageInBackground.subscribe(function(e){!0===e&&(r=!0)}),s=[];t.telemetrySubscribers.forEach(function(t){var i=t.onStartQos(e,n.name,a);s.push({onEndQos:t.onEndQos,tagName:i})});var c=function(e,t,a,o){var s,c;if(a){var d=Object(u.e)(a);s=d.message,c=d.stack}e.onEndQos(e.tagName,n,{result:t,message:s,stack:c,isExpected:o,hasSpentTimeInBackground:r},i)};return{end:function(){var e=s.map(function(e){return e.onEndQos(e.tagName,n,{result:"Success",hasSpentTimeInBackground:r},i)});return o(),e},endExpectedError:function(e,t){var n=s.map(function(n){c(n,e,t,!0)});return o(),n},endUnexpectedError:function(e,t){var n=s.map(function(n){c(n,e,t,!1)});return o(),n}}},this.pageVisibilityHandler=function(){document&&document.visibilityState===vt?t.isPageInBackground.value=!0:t.isPageInBackground.value=!1},this.telemetrySubscribers=e||[],this.isPageInBackground=new v.e(document.visibilityState===vt),document.addEventListener(St,this.pageVisibilityHandler,!1),window.addEventListener(yt,this.pageVisibilityHandler,!1)}return e.prototype.unload=function(){document.removeEventListener(St,this.pageVisibilityHandler,!1),window.removeEventListener(yt,this.pageVisibilityHandler,!1),this.isPageInBackground.unsubscribeAll()},e.prototype.appLogic=function(e,t){delete t.stack,this.telemetrySubscribers.forEach(function(n){n.onAppLogic(e,t)})},e.prototype.fatal=function(e,t,n){delete n.staticMessage;var a=Object(u.e)(t);this.telemetrySubscribers.forEach(function(t){t.onFatalError(e,a,n)})},e.prototype.warn=function(e,t,n){delete n.staticMessage;var a=Object(u.e)(t);this.telemetrySubscribers.forEach(function(t){t.onWarning(e,a,n)})},e.prototype.measureQos=function(e,t,n,i){return Object(a.t)(this,void 0,void 0,function(){var r,o,s;return Object(a.i)(this,function(a){switch(a.label){case 0:r=this.startQos(e,t),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,n()];case 2:return o=a.sent(),r.end(),[2,o];case 3:throw s=a.sent(),i&&i(s)?r.endExpectedError("Fatal",s):r.endUnexpectedError("Fatal",s),s;case 4:return[2]}})})},e.prototype.userAction=function(e,t){this.telemetrySubscribers.forEach(function(n){n.onUserAction(e,t)})},e.prototype.completedQos=function(e,t,n,a){return this.telemetrySubscribers.map(function(i){i.onCompletedQos(e,t,n,a)})},e}(),It=n(1121),xt=function(){function e(e,t){this.networkErrorLogger=e,this.networkHealthCheckUrl=t}return e.prototype.getResourceLoader=function(e){var t=this.loadWithRetry.bind(this);return function(n,a,i){return e(n,function(){return t(a,i)})}},e.prototype.loadWithRetry=function(t,n){var a=this,i=this.networkErrorLogger;return Object(It.e)(t,function(t){return a.networkHealthCheckUrl&&e.checkFailedResource(t,a.networkHealthCheckUrl,i)||Promise.resolve()},n)},e.checkFailedResource=function(t,n,i){return Object(a.t)(this,void 0,void 0,function(){var r,o;return Object(a.i)(this,function(s){switch(s.label){case 0:r={name:"OnePlayerHealthCheck",method:"GET",url:t,isExpected:!1},s.label=1;case 1:return s.trys.push([1,3,,4]),[4,e.sendRequest(n)];case 2:return s.sent(),i(Object(a.e)(Object(a.e)({},r),{message:Object(_.n)("OnePlayerHealthCheck. Can successfully reach our health URL. This means there is no client network issue, so it is a backend issue.")})),[3,4];case 3:return o=s.sent(),i(Object(a.e)(Object(a.e)({},r),{isExpected:!0,message:Object(_.n)("OnePlayerHealthCheck. Failed to reach our health URL. This means there is a client network issue"),stack:o.stack})),[3,4];case 4:return[2]}})})},e.sendRequest=function(e){if("undefined"!=typeof AbortController){var t=new AbortController,n=t.signal;return setTimeout(function(){return t.abort()},15e3),fetch(e,Object(a.e)({method:"GET"},{signal:n}))}var i=fetch(e,{method:"GET"}),r=new Promise(function(e,t){return setTimeout(function(){return t(new Error(Object(_.n)("Timeout")))},15e3)});return Promise.race([i,r])},e}(),Ct={AfterUi:!0,BeforePlayer:!0,BeforeUi:!0,BeforeMarkersUi:!0,TimeToLoad:!0,TimeToInteractive:!0,TimeToInteractionResponse:!0,TimeToStableInteractive:!0},Ot=function(){function e(e){this.onePlayerLogger=e,this.pluginTelemetryApis={}}return e.prototype.getTelemetryApi=function(e){return this.pluginTelemetryApis[e.pluginName]=this.pluginTelemetryApis[e.pluginName]||{appLogic:this.appLogic.bind(this,e),fatal:this.fatal.bind(this,e),userAction:this.userAction.bind(this,e),warn:this.warn.bind(this,e),measureQos:this.measureQos.bind(this,e),startQos:this.startQos.bind(this,e),networkFatal:this.networkFatal.bind(this,e),unhandledError:this.unhandledError.bind(this,e),sessionSummary:this.sessionSummary.bind(this,e),resourceTiming:this.resourceTiming.bind(this,e)},this.pluginTelemetryApis[e.pluginName]},e.prototype.appLogic=function(e,t){this.onePlayerLogger.appLogic("PluginAppLogic",Object(a.e)(Object(a.e)({},e),t))},e.prototype.fatal=function(e,t,n){this.onePlayerLogger.fatal("PluginError",t,Object(a.e)(Object(a.e)({},e),n))},e.prototype.networkFatal=function(e,t,n){this.onePlayerLogger.fatal("PluginNetworkError",t,Object(a.e)(Object(a.e)({},e),n))},e.prototype.unhandledError=function(e,t,n){this.onePlayerLogger.fatal("PluginError",t,Object(a.e)(Object(a.e)(Object(a.e)({},e),n),{name:"PluginErrorBoundary",isExpected:!1}))},e.prototype.warn=function(e,t,n){this.onePlayerLogger.warn("PluginError",t,Object(a.e)(Object(a.e)({},e),n))},e.prototype.userAction=function(e,t){this.onePlayerLogger.userAction("PluginButtonAction",Object(a.e)(Object(a.e)({},e),t))},e.prototype.applyPluginIdentifier=function(e,t){Object.assign(t,e)},e.prototype.measureQos=function(e,t,n,a){var i=this.getEventName(t.name);return this.applyPluginIdentifier(e,t),this.onePlayerLogger.measureQos(i,t,n,a)},e.prototype.startQos=function(e,t){var n=this.getEventName(t.name);return this.applyPluginIdentifier(e,t),this.onePlayerLogger.startQos(n,t)},e.prototype.sessionSummary=function(e,t){this.onePlayerLogger.appLogic("PluginSessionSummary",Object(a.e)(Object(a.e)({},e),t))},e.prototype.getEventName=function(e){return Ct[e]?"PluginReportingEndQos":"PluginEndQos"},e.prototype.resourceTiming=function(e,t,n,i){var r=this;setTimeout(function(){performance&&performance.getEntriesByType&&performance.getEntriesByType("resource").forEach(function(o){if(o.name.match(n)){var s=Te(o,i),c={name:t};r.onePlayerLogger.appLogic("PluginResourceTiming",Object(a.e)(Object(a.e)(Object(a.e)({},e),c),s))}})},0)},e}(),wt=function(){function e(e,t,n){var i=this;this.pluginsToLoad=e,this.playerApi=t,this.context=n,this.registry={},this.pluginApisCreated={},this.uniquePluginNameSet=new Set,this.phaseChangeHistory=[],this.onUiManagerSet=new ce.e,this.forceEnable=void 0,this.pluginEnabledStates=new Map,this.initPhaseChange=function(e){return Object(a.t)(i,void 0,void 0,function(){var t=this;return Object(a.i)(this,function(n){switch(n.label){case 0:return this.phaseChangeHistory.push(e),this.registry[e]?[4,Promise.all(this.registry[e].map(function(n){return Object(a.t)(t,void 0,void 0,function(){return Object(a.i)(this,function(t){return this.isPluginEnabled(n)?[2,this.ensureInstanceAndCallInitPlugin(e,n)]:[2]})})}))]:[3,2];case 1:return n.sent(),[3,2];case 2:return"AfterUi"===e&&this.logPluginsInitializedEvent(),[2]}})})},this.registerPlugin=function(e){return Object(a.t)(i,void 0,void 0,function(){var t,n,i,r;return Object(a.i)(this,function(a){switch(a.label){case 0:if(!(t=this.addToPluginRegistry(e)))return[3,4];n=0,i=this.phaseChangeHistory,a.label=1;case 1:return n<i.length?(r=i[n],e.manifest.phasesToInit.indexOf(r)>-1&&this.isPluginEnabled(t)?[4,this.ensureInstanceAndCallInitPlugin(r,t)]:[3,3]):[3,4];case 2:a.sent(),a.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},this.addToPluginRegistry=function(e){if(!i.uniquePluginNameSet.has(e.manifest.name)){i.uniquePluginNameSet.add(e.manifest.name);for(var t=void 0,n=0,a=e.manifest.phasesToInit;n<a.length;n++){var r=a[n];void 0===t&&(t={manifest:e.manifest,instanceFactory:e.instanceFactory,isEnabled:i.forceEnable||void 0===e.isEnabled?function(){return!0}:e.isEnabled}),i.registry[r]=i.registry[r]||[],i.registry[r].push(t)}return i.context.log.appLogic("PluginAppLogic",{name:"pluginRegistered",pluginName:e.manifest.name,pluginVersion:e.manifest.version}),t}i.context.log.fatal("PluginError",Object(_.n)("Plugin not registered because duplicate plugin already exists"),{name:"pluginRegisterFailed",isExpected:!1,pluginName:e.manifest.name,pluginVersion:e.manifest.version})},this.ensureInstanceAndCallInitPlugin=function(e,t){return Object(a.t)(i,void 0,void 0,function(){var n,i,r;return Object(a.i)(this,function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),n=this.logAdapter.getTelemetryApi({pluginName:t.manifest.name,pluginVersion:t.manifest.version}),void 0!==t.instance?[3,2]:(i=t,[4,t.instanceFactory(this.getResourceLoader(n))]);case 1:i.instance=a.sent(),a.label=2;case 2:return[4,this.initPlugin(e,t,n)];case 3:return a.sent(),[3,5];case 4:return r=a.sent(),this.context.log.fatal("PluginError",r,{name:"pluginInitializationFailed",pluginName:t.manifest.name,pluginVersion:t.manifest.version,isExpected:!1}),[3,5];case 5:return[2]}})})},this.initPlugin=function(e,t,n){return Object(a.t)(i,void 0,void 0,function(){var i,r;return Object(a.i)(this,function(a){return i=this.getPluginApiAdapter({pluginName:t.manifest.name,pluginVersion:t.manifest.version},n),r={name:e},[2,i.log.measureQos(r,function(){return t.instance.phaseHandler(e,i)})]})})},this.getPluginApiAdapter=function(e,t){return i.pluginApisCreated[e.pluginName]=i.pluginApisCreated[e.pluginName]||{ui:i.getUiApiPromise(e),player:i.playerApi,localization:i.context.loc,log:t,onePlayerSettingsStore:i.context.settingsStore,settingsProviders:i.context.settingsStore.getSettingsProviders(),measuredResourceLoader:i.getResourceLoader(t),flightingContext:i.context.flightingContext},i.pluginApisCreated[e.pluginName]},this.getUiApiPromise=function(e){return i.uiManager?Promise.resolve(i.uiManager.getUiAdapter(e)):new Promise(function(t){i.onUiManagerSet.subscribe(function(n){t(n.getUiAdapter(e))})})},this.logAdapter=new Ot(this.context.log);var r=this.context.settingsStore.getSettingObject("isMediaSettingsLayerEnabled","boolean");this.forceEnable=!(r&&!0===r.value);for(var o=0,c=this.pluginsToLoad;o<c.length;o++){var d=c[o];this.addToPluginRegistry(d)}this.isNewPluginsInitializedSchemaEnabled=Object(s.e)(this.context.settingsStore.getSettingObject("isNewPluginsInitializedSchemaEnabled","boolean")),n.log.appLogic("PlayerAppLogic",{name:"PluginManagerCreated"})}return e.prototype.setUiManager=function(e){this.uiManager=e,this.onUiManagerSet.notify(this.uiManager)},e.prototype.logPluginsInitializedEvent=function(){if(this.isNewPluginsInitializedSchemaEnabled){var e=[],t=[];this.pluginEnabledStates.forEach(function(n,a){n?e.push(a.pluginName):t.push(a.pluginName)}),this.context.log.appLogic("PluginManagerAppLogic",{name:"PluginsInitialized",pluginInitConfiguration:JSON.stringify({pluginsInitialized:e,pluginsNotInitialized:t})})}else{var n=[];this.pluginEnabledStates.forEach(function(e,t){n.push({pluginIdentifier:t,isPluginEnabled:e})}),this.context.log.appLogic("PluginManagerAppLogic",{name:"PluginsInitialized",pluginConfiguration:n})}},e.prototype.getResourceLoader=function(e){return new xt(function(t){return e.networkFatal(t.staticMessage?t.staticMessage:h.t.Missing,t)},this.context.networkHealthCheckUrl||"").getResourceLoader(function(t,n){return e.measureQos({name:t},n)})},e.prototype.isPluginEnabled=function(e){var t={pluginName:e.manifest.name,pluginVersion:e.manifest.version};if(this.isNewPluginsInitializedSchemaEnabled){var n=!1,a=!1;return this.pluginEnabledStates.forEach(function(t,i){if(i.pluginName===e.manifest.name&&i.pluginVersion===e.manifest.version)return n=!0,void(a=t)}),n||(a=e.isEnabled(),this.pluginEnabledStates.set(t,a)),a}var i=this.pluginEnabledStates.get(t);return void 0===i&&(i=e.isEnabled(),this.pluginEnabledStates.set(t,i)),i},e}(),Et=n(1107),At=n(245),Lt=n(47),kt=n.n(Lt),Mt=!1,Pt=function(e,t,n,i){return Object(a.t)(void 0,void 0,void 0,function(){return Object(a.i)(this,function(a){switch(a.label){case 0:return"i"===n.key&&n.altKey&&!1===Mt?(t.log.userAction("PlayerButtonAction",{name:"OpenDiagnosticTool",playbackTimeSec:i.currentTimeInSeconds.value||-1,actionType:"KeyDown"}),Mt=!0,ht?[3,2]:[4,Tt(e,t,i)]):[3,3];case 1:return a.sent(),[3,3];case 2:ht.isEnabled().value=!0,a.label=3;case 3:return[2]}})})};function Tt(e,t,n){return Object(a.t)(this,void 0,void 0,function(){var i,r;return Object(a.i)(this,function(a){switch(a.label){case 0:return[4,t.diagnosticToolProvider&&t.diagnosticToolProvider()];case 1:return(i=a.sent())?(ht=i,(r=document.createElement("div")).className="diagnostic-tool",e.videoEngineContainer.appendChild(r),kt.a.render(ht.render(),r),ht.isEnabled().subscribe(function(e){Mt=e,!1===e&&t.log.userAction("PlayerButtonAction",{name:"CloseDiagnosticTool",playbackTimeSec:n.currentTimeInSeconds.value||-1,actionType:"KeyDown"})}),[2]):[2]}})})}var Ut=n(346),Ft=function(){function e(e,t,n){var i=this;this.localization=e,this.context=t,this.getVideoElement=n,this._textTracks=new se.e([]),this._activeTextTrack=new se.e(void 0),this.isMultipleTranscriptsEnabled=!1,this.activeOffset=!1,this._currentTimeInSeconds=-1,this.initializeClosedCaptions=function(e){return Object(a.t)(i,void 0,void 0,function(){var t,n,i,r,o=this;return Object(a.i)(this,function(a){return this.isMultipleTranscriptsEnabled=Object(s.e)(this.context.settingsStore.getSettingObject("isMultipleTranscriptsEnabled","boolean")),this._textTracks.value=[],this.removeVideoTracks(),this.captionsRegion||this.createCustomCaptionsRenderer(),this.isMultipleTranscriptsEnabled&&Array.isArray(e)?(i=this.orderCaptionsList(e),r=[],i.forEach(function(e){e.isVisible&&(t=o.mapUrlToTrack(e,e.formattedLanguage),r.push(t))}),this._textTracks.externalValueUpdated(r),this._textTracks.value=r,[2]):((n=Array.isArray(e)?e[0]:e).isVisible&&(t=this.mapUrlToTrack(n),this._textTracks.value.push(t),this._textTracks.externalValueUpdated([t])),[2])})})},this.adjustCuePositionWhenActive=function(e){i.activeOffset=e,i._activeTextTrack.value&&i.setActiveTrack(i._activeTextTrack.value.label)},this.disableTextTracks=function(){var e=i.getVideoElement();Array.from(e.getElementsByTagName("track")).forEach(function(e){var t=e.track;e.default=!1,t.mode="disabled"}),i.captions&&(i.captions.innerText=""),i.setActiveTrack("off")},this.setActiveTrack=function(e){var t=i.getVideoElement();Array.from(t.getElementsByTagName("track")).forEach(function(t){var n=t.track,a=n.label.toLowerCase()===e.toLowerCase();t.default=a,n.mode=a?"hidden":"disabled",i.addTelemetry(a,e,t)}),i.activeCuePositioning(),i._activeTextTrack.externalValueUpdated(i._textTracks.value.find(function(t){return t.label===e}))},this.removeVideoTracks=function(e){var t=i.getVideoElement();if(t){var n=t.getElementsByTagName("track");Array.from(n).forEach(function(e){"captions"===e.track.kind&&t.removeChild(e)}),e&&i._textTracks.externalValueUpdated([])}},this.mapUrlToTrack=function(e,t){var n=Object(s.e)(i.context.settingsStore.getSettingObject("isClosedCaptionsLanguageLabelEnabled","boolean")),a=i.localization.getString("PlayerSkinCaptionsAuto"),r=i.isMultipleTranscriptsEnabled&&n&&t?t:a;return{src:e.url,srclang:e.languageTag||(i.isMultipleTranscriptsEnabled?"spokenLanguage":"en"),label:r,kind:"captions"}},this.orderCaptionsList=function(e){var t=new Map,n=[];return e.forEach(function(e){var r,o=i.formatLanguage(null!==(r=e.languageTag)&&void 0!==r?r:"",e.source),s=t.get(o);t.set(o,s?s+1:1);var c=s?Object(ue.e)(i.localization.getString("TranscriptFormattedLanguage"),o,s.toString()):o;n.push(Object(a.e)(Object(a.e)({},e),{formattedLanguage:c}))}),n.sort(function(e,t){return e.formattedLanguage&&t.formattedLanguage?e.formattedLanguage.toLocaleLowerCase(i.localization.locale.value)<t.formattedLanguage.toLocaleLowerCase(i.localization.locale.value)?-1:1:0}),n},this.formatLanguage=function(e,t){if(!e){var n=["microsoft transcript generation","microsoft teams"].includes(t)?"SpokenLanguageText":"TranscriptLanguageUnknown";return i.localization.getString(n)}try{return pe(e,i.localization)}catch(t){var a=Object(u.e)(t);return i.context.log.warn("PlayerError","Captions language formatting failed ".concat(e,". ").concat(a.message),{name:"CCLanguageFormattingFailed",isExpected:!1}),i.localization.getString("TranscriptLanguageUnknown")}},this.wireTextTracksToObservable=function(){i.textTracks.subscribe(function(e){e.length&&i.appendTextTracks(),i._textTracks.value.find(function(e){var t;return e.label===(null===(t=i._activeTextTrack.value)||void 0===t?void 0:t.label)})||i.disableTextTracks()})},this.wireActiveTextTrackToObservable=function(){i._activeTextTrack.externalValueUpdated(void 0),i._activeTextTrack.attach(function(e){i.setActiveTrack(e?e.label:"off")},void 0)},this.appendTextTracks=function(){var e=i.getVideoElement();e?i._textTracks.value.forEach(function(t){var n=i.createTrackElement(t);n.onerror=function(e){var n=Object(u.e)(e);i.context.log.warn("PlayerError","Failed to create trackElement ".concat(t.label,". ").concat(n.message),{name:"CCTrackElemConfigFailed ",isExpected:!1})},n.track.oncuechange=function(){var e,t;n.track.activeCues&&(t=n.track.activeCues[0]);var a=Ut.HtmlSanitizer.sanitizeHtml((null===(e=null==t?void 0:t.text)||void 0===e?void 0:e.replace(/(?:\r\n|\r|\n)/g,"<br>"))||"");i.captions.innerHTML=a,i.activeCuePositioning()},e.appendChild(n)}):i.context.log.fatal("PlayerError","Video element undefined",{name:"CCAppendTextTracksFailed",isExpected:!1})},this.createTrackElement=function(e){var t=document.createElement("track");return t.kind="captions",t.label=e.label,t.srclang=e.srclang,t.src=e.src,t},this.activeCuePositioning=function(){i.captionsRegion&&(i.captionsRegion.style.bottom=i.activeOffset?"80px":"40px")},this.wireTextTracksToObservable(),this.wireActiveTextTrackToObservable()}return Object.defineProperty(e.prototype,"textTracks",{get:function(){return this._textTracks},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeTextTrack",{get:function(){return this._activeTextTrack},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTimeInSeconds",{set:function(e){this._currentTimeInSeconds=e},enumerable:!1,configurable:!0}),e.prototype.addTelemetry=function(e,t,n){var a,i,r,o;e&&(null===(a=this._activeTextTrack.value)||void 0===a?void 0:a.label)!==t&&((null===(i=this._activeTextTrack.value)||void 0===i?void 0:i.srclang)||this.context.log.userAction("PlayerButtonAction",{name:"CCTurnedOn",actionType:"LeftClick",playbackTimeSec:this._currentTimeInSeconds}),this.context.log.userAction("PlayerChangeSettingAction",{name:"CCLanguageSelected",actionType:"LeftClick",oldSetting:(null===(r=this._activeTextTrack.value)||void 0===r?void 0:r.srclang)||"off",newSetting:n.srclang,playbackTimeSec:this._currentTimeInSeconds})),"off"===t&&(null===(o=this._activeTextTrack.value)||void 0===o?void 0:o.label)&&this.context.log.userAction("PlayerButtonAction",{name:"CCTurnedOff",actionType:"LeftClick",playbackTimeSec:this._currentTimeInSeconds})},e.prototype.createCustomCaptionsRenderer=function(){this.captionsRegion=document.createElement("div"),this.captionsRegion.className="captions-region",this.captions=document.createElement("div"),this.captions.className="captions",this.captionsRegion.appendChild(this.captions);var e=document.getElementsByClassName("onePlayer-overlay")[0];e&&e.appendChild(this.captionsRegion)},e}(),Ht=function(){function e(e,t,n){var i,r=this;this.engine=e,this.context=t,this.localization=n,this.mediaDurationsInSeconds=this.engine.mediaDurationsInSeconds,this.playbackRates=this.engine.playbackRates,this.getPlayIntervals=this.engine.getPlayIntervals,this.ccManager=new Ft(this.localization,this.context,function(){return r.engine.getVideoElement()}),this._isActive=this.engine.isActive,this.canSwitchToAdaptiveStreaming=function(){return r.engine.canSwitchToAdaptiveStreaming()},this.switchToAdaptiveStreaming=function(){return r.engine.switchToAdaptiveStreaming()},this.getVideoElement=function(){return r.engine.getVideoElement()},this.getCurrentFrame=function(){return r.engine.getCurrentFrame()},this.getResizedCurrentFrame=function(e,t){return r.engine.getResizedCurrentFrame(e,t)},this.getScaledCurrentFrame=function(e,t){return r.engine.getScaledCurrentFrame(e,t)},this.initialize=function(){return r.engine.initialize()},this.toggleCCButtons=function(e,t){r.captionsUrls=t,e||t||(r.disableTextTracks(),r.ccManager.removeVideoTracks(!0))},this.initializeTextTracks=function(e){return Object(a.t)(r,void 0,void 0,function(){return Object(a.i)(this,function(t){switch(t.label){case 0:return this.captionsUrls=e,this.disableTextTracks(),[4,this.initializeClosedCaptions(e)];case 1:return t.sent(),[2]}})})},this.disableTextTracks=function(){r.ccManager.disableTextTracks()},this.initializeClosedCaptions=function(e){return Object(a.t)(r,void 0,void 0,function(){var t=this;return Object(a.i)(this,function(n){return this.captionsUrls=e,[2,this.ccManager.initializeClosedCaptions(e).catch(function(e){var n=Object(u.e)(e);t.context.log.warn("PlayerError",n.message,{name:"CCInitializeFailed",isExpected:!1})})]})})},null===(i=this.engine.isPreRoll)||void 0===i||i.subscribe(function(e){e||r.ccManager.adjustCuePositionWhenActive(!0)}),this.engine.playbackFormat.subscribe(function(){return Object(a.t)(r,void 0,void 0,function(){return Object(a.i)(this,function(e){switch(e.label){case 0:return[4,this.initializeClosedCaptions(this.captionsUrls)];case 1:return e.sent(),this.ccManager.adjustCuePositionWhenActive(!0),[2]}})})}),this.engine.currentTimeInSeconds.subscribe(function(e){r.ccManager.currentTimeInSeconds=e||-1}),Object(s.e)(this.context.settingsStore.getSettingObject("isNextGenEngineCContextEnabled","boolean"))&&this.wireCCManagerEvents()}return Object.defineProperty(e.prototype,"activeTextTrack",{get:function(){return this.ccManager.activeTextTrack},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"audioStreamSwitchingFailed",{get:function(){return this.engine.audioStreamSwitchingFailed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoplayFailed",{get:function(){return this.engine.autoplayFailed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableBitrateQualities",{get:function(){return this.engine.availableBitrateQualities},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availablePlaybackFormats",{get:function(){return this.engine.availablePlaybackFormats},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availablePlaybackTracks",{get:function(){return this.engine.availablePlaybackTracks},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bufferedTimeRanges",{get:function(){return this.engine.bufferedTimeRanges},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTimeInSeconds",{get:function(){return this.engine.currentTimeInSeconds},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"downloadBitrate",{get:function(){return this.engine.downloadBitrate},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasAudio",{get:function(){return this.engine.hasAudio},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasAudioStream",{get:function(){return this.engine.hasAudioStream},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},set:function(e){var t=this;this._isActive=e,this._isActive.subscribe(function(e){t.ccManager.adjustCuePositionWhenActive(e)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isBuffering",{get:function(){return this.engine.isBuffering},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEnhancedTrackReady",{get:function(){return this.engine.isEnhancedTrackReady},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFullscreen",{get:function(){return this.engine.isFullscreen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPlayerReady",{get:function(){return this.engine.isPlayerReady},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPreRoll",{get:function(){return this.engine.isPreRoll},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"itemUrl",{get:function(){return this.engine.itemUrl},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"latestError",{get:function(){return this.engine.latestError},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"latestFatalError",{get:function(){return this.engine.latestFatalError},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loadingState",{get:function(){return this.engine.loadingState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this.engine.loop},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mediaDimensions",{get:function(){return this.engine.mediaDimensions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mediaDurationInSeconds",{get:function(){var e,t;return null!==(t=null===(e=this.engine)||void 0===e?void 0:e.mediaDurationInSeconds)&&void 0!==t?t:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mediaDurationInSecondsV2",{get:function(){return this.engine.mediaDurationInSecondsV2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this.engine.muted},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playbackFormat",{get:function(){return this.engine.playbackFormat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this.engine.playbackRate},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playbackTrack",{get:function(){return this.engine.playbackTrack},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playState",{get:function(){return this.engine.playState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seeking",{get:function(){return this.engine.seeking},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textTracks",{get:function(){return this.ccManager.textTracks},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this.engine.volume},enumerable:!1,configurable:!0}),e.prototype.wireCCManagerEvents=function(){var e=this;this.ccManager.textTracks.subscribe(function(t){var n=(null==t?void 0:t.length)>0;e.engine.updateCaptionsContext({captionsAvailable:n})}),this.ccManager.activeTextTrack.subscribe(function(t){t&&e.engine.updateCaptionsContext({captionsWereEnabled:!0})})},e}();"function"!=typeof window.CustomEvent&&(window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}),Number.isNaN||Object.defineProperty(Number,"isNaN",{value:function(e){return e!=e}}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw TypeError(Object(_.n)('"this" is null or not defined'));var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw TypeError(Object(_.n)("predicate must be a function"));for(var a=arguments[1],i=0;i<n;){var r=t[i];if(e.call(a,r,i,t))return r;i++}},configurable:!0,writable:!0}),Element.prototype.hasOwnProperty("remove")||Object.defineProperty(Element.prototype,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError(Object(_.n)('"this" is null or not defined'));var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError(Object(_.n)("predicate must be a function"));for(var a=arguments[1],i=0;i<n;){var r=t[i];if(e.call(a,r,i,t))return i;i++}return-1},configurable:!0,writable:!0}),String.prototype.repeat||(String.prototype.repeat=function(e){if(null==this)throw new TypeError(Object(_.n)("can't convert "+this+" to object"));var t=""+this;if((e=+e)!=e&&(e=0),e<0)throw new RangeError(Object(_.n)("repeat count must be non-negative"));if(e==1/0)throw new RangeError(Object(_.n)("repeat count must be less than infinity"));if(e=Math.floor(e),0==t.length||0==e)return"";if(t.length*e>=1<<28)throw new RangeError(Object(_.n)("repeat count must not overflow maximum string size"));var n=t.length*e;for(e=Math.floor(Math.log(e)/Math.log(2));e;)t+=t,e--;return t+t.substring(0,n-t.length)}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),a=1;a<arguments.length;a++){var i=arguments[a];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},writable:!0,configurable:!0}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),a=n.length>>>0;if(0===a)return!1;for(var i,r,o=0|t,s=Math.max(o>=0?o:a-Math.abs(o),0);s<a;){if((i=n[s])===(r=e)||"number"==typeof i&&"number"==typeof r&&isNaN(i)&&isNaN(r))return!0;s++}return!1}}),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(function(e){e.hasOwnProperty("prepend")||Object.defineProperty(e,"prepend",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach(function(e){var n=e instanceof Node;t.appendChild(n?e:document.createTextNode(String(e)))}),this.insertBefore(t,this.firstChild)}})}),Object.values||(Object.values=function(e){return Object.keys(e).map(function(t){return e[t]})});var Rt,Nt=[{mark:"TimeToLoad",qos:"timeToLoadQos"},{mark:"TimeToStableInteractive",qos:"timeToStableInteractiveQos"},{mark:"TimeToInteractive",qos:"timeToInteractiveQos"},{mark:"TimeToInteractionResponse",qos:"timeToInteractionResponseQos"},{mark:"FirstContentfulPaint",qos:"firstContentfulPaintQos"}],Bt=function(){function e(e,t,r,c,d,l){var f,p,m,h,b,g=this;this.options=e,this.settingsStore=c,this.uiConfiguration=d,this.showReportIssueDelayedButton=l,this.isCaptionsForNextEngineEnabled=Object(s.e)(this.settingsStore.getSettingObject("isCaptionsForNextEngineEnabled","boolean")),this.isOptimizedWebVideoLocalizationEnabled=Object(s.e)(this.settingsStore.getSettingObject("isOptimizedWebVideoLocalizationEnabled","boolean")),this.renderBlockingOptions={},this.initialize=function(e,t){return Object(a.t)(g,void 0,void 0,function(){return Object(a.i)(this,function(n){return this.initPromise?this.log.warn("PlayerError",Object(_.n)("OnePlayer Core initialize() should only be called once"),{name:"InitializeCalledMoreThanOnce",isExpected:!1}):this.initPromise=this.initializeInternal(e,t),[2,this.initPromise]})})},this.renderVideo=function(e){return Object(a.t)(g,void 0,void 0,function(){var t,n,i,r,o,c,d,l,u,f,p,m=this;return Object(a.i)(this,function(_){switch(_.label){case 0:t=this.log.startQos("PlayerRenderEndQos",{name:"renderVideo"}),n=this.log.startQos("PlayerRenderEndQos",{name:"onePlayerRender"}),this.context.longLivedQosEvents.add("onePlayerRenderQos",n),_.label=1;case 1:return _.trys.push([1,19,,20]),[4,this.states.waitForStates(["PlayerCanRender"])];case 2:return _.sent(),o=this.playerEngineAdaptor.renderVideo(this.playbackUrls,this.getPlayerOptions(e)),this.uiConfiguration.isFluentMtcEnabled&&this.isFluentMtcInitSplitV2Enabled&&(this.mtcManager.initializeMediaTransportControlUi(e.shouldShowPlaybackSpeed||!1),this.uiManagerConfiguration.uiConfiguration.pluginMarkersContainer=this.mtcManager.pluginMarkersContainer,this.uiManagerConfiguration.playerUiObservableProperties.isActive=this.mtcManager.isActive,this.uiManagerConfiguration.uiConfiguration.detailsButtonContainer=this.mtcManager.detailsButtonContainer),[4,o];case 3:return _.sent(),[4,this.states.waitForStates(["CanPlayThrough"])];case 4:return _.sent(),c=Object(s.e)(this.context.settingsStore.getSettingObject("isClosedCaptionsInMtcOnlyEnabled","boolean")),"FullUi"!==this.options.uiMode?[3,16]:(d=Object(s.e)(this.context.settingsStore.getSettingObject("isThreeStepRenderingEnabled","boolean")),[4,this.renderQos("initUiManager",this.initUiManager)]);case 5:return _.sent(),this.uiManager&&this.uiManager.renderInitialLoadingUi(),d?(i=this.context.log.startQos("PlayerReportingEndQos",{name:"TimeToStableInteractiveNav"}),r=this.context.log.startQos("PlayerReportingEndQos",{name:"TimeToStableInteractiveMarkers"}),[4,this.renderQos("playerUIBlockingWork",function(){return Object(a.t)(m,void 0,void 0,function(){return Object(a.i)(this,function(e){switch(e.label){case 0:return[4,this.doUiBlockingWork()];case 1:return e.sent(),[2]}})})})]):[3,7];case 6:return _.sent(),this.states.setState("UiCanDraw"),[3,9];case 7:return[4,this.renderQos("playerUIBlockingWork",function(){return Object(a.t)(m,void 0,void 0,function(){return Object(a.i)(this,function(e){switch(e.label){case 0:return[4,Promise.all([this.doUiBlockingWork(),this.phaseSpecificWorkAndQos("BeforeMarkersUi",this.renderQos)])];case 1:return e.sent(),[2]}})})})];case 8:_.sent(),this.states.setState("UiCanDraw"),this.states.setState("MarkersUiCanDraw"),_.label=9;case 9:l=this.context.log.startQos("PlayerRenderEndQos",{name:"uiRender"}),_.label=10;case 10:return _.trys.push([10,14,,15]),d?(this.uiManager&&this.uiManager.renderPlaybackAndExperienceUi(),null==i||i.end(),i=void 0,[4,this.renderQos("markersUIBlockingWork",function(){return m.phaseSpecificWorkAndQos("BeforeMarkersUi",m.renderQos)})]):[3,12];case 11:return _.sent(),this.states.setState("MarkersUiCanDraw"),this.uiManager&&this.uiManager.renderMarkersUi(),[3,13];case 12:this.uiManager&&this.uiManager.render(),_.label=13;case 13:return(u=document.getElementsByClassName("navigation-root")[0])&&u.addEventListener("focusin",function(){m.playerEngineAdaptor.setUserActive()}),null==i||i.end(),i=void 0,null==r||r.end(),r=void 0,this.isDiagnosticToolEnabled=Object(s.e)(this.context.settingsStore.getSettingObject("isDiagnosticToolEnabled","boolean")),this.isDiagnosticToolEnabled&&void 0!==this.options.diagnosticToolProvider&&(this.context.diagnosticToolProvider=function(){return m.options.diagnosticToolProvider(m.player,m.localization,m.dataLayer)},document.addEventListener("keydown",this.diagnosticToolKeyboardListener)),l.end(),[3,15];case 14:throw f=_.sent(),l.endUnexpectedError("Fatal",f),f;case 15:return[3,17];case 16:this.log.appLogic("PlayerAppLogic",{name:"FullUiRenderSkipped",playerDimensions:{width:this.uiConfiguration.videoEngineContainer.clientWidth,height:this.uiConfiguration.videoEngineContainer.clientHeight}}),"MtcOnly"===this.options.uiMode&&c&&this.getClosedCaptionsUrlAndInitPlayerCC().catch(function(){}),_.label=17;case 17:return this.states.setState("InitComplete"),this.context.longLivedQosEvents.tryCallEnd("timeToStableInteractiveQos"),[4,this.phaseSpecificWorkAndQos("AfterUi",this.renderQos)];case 18:return _.sent(),t.end(),this.playerEngineAdaptor.summarizeResourceTimingsAfterLoad(),[3,20];case 19:throw p=_.sent(),null==i||i.endUnexpectedError("Fatal",p),null==r||r.endUnexpectedError("Fatal",p),t.endUnexpectedError("Fatal",p),this.enterFatalErrorState(p),this.playerEngineAdaptor.summarizeResourceTimingsAfterLoad(),p;case 20:return[2]}})})},this.unload=function(){try{g.playerEngineAdaptor.unload(),g.uiManager&&g.uiManager.unload(),g.uiConfiguration.isFluentMtcEnabled&&g.mtcResizeObserver&&(g.mtcResizeObserver.disconnect(),Object(s.e)(g.context.settingsStore.getSettingObject("isFluentMtcManagerUnloadEnabled","boolean"))&&g.mtcManager&&g.mtcManager.unload()),g.states.setState("Unloaded"),g.log.unload(),performance&&void 0!==performance.clearResourceTimings&&performance.clearResourceTimings(),g.isDiagnosticToolEnabled&&document.removeEventListener("keydown",g.diagnosticToolKeyboardListener)}catch(e){throw g.enterFatalErrorState(e),e}},this.registerPlugin=function(e){return Object(a.t)(g,void 0,void 0,function(){return Object(a.i)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.states.waitForStates(["PlayerCanRender"])];case 1:return t.sent(),this.pluginManager?[2,this.pluginManager.registerPlugin(e)]:(this.pluginManager=new wt([e],this.player,this.context),[3,3]);case 2:throw t.sent();case 3:return[2]}})})},this.showErrorBoxWithoutInit=function(){return Object(a.t)(g,void 0,void 0,function(){var e,t=this;return Object(a.i)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.onePlayerResourcesPromise||(this.onePlayerResourcesPromise=this.initQos("loadOnePlayerResources",this.isOptimizedWebVideoLocalizationEnabled?this.localization.loadResources:function(){return t.localization.setLocale(t.language)})),[4,this.onePlayerResourcesPromise];case 1:return n.sent(),e={titleStr:this.localization.getString("FatalPlayerLoadingErrorTitle"),reload:this.reloadPlayer,message:this.localization.getString("FatalPlayerLoadingErrorMessage"),isRecoverable:!1,isResponsiveToHostEnabled:Object(s.e)(this.context.settingsStore.getSettingObject("isResponsiveCSSToHostEnabled","boolean"))},this.showErrorBox(e),[3,3];case 2:return n.sent(),[3,3];case 3:return[2]}})})},this.showErrorBox=function(e,t,n){var i=Object(u.e)(t);e&&(g.isExpectedErrorCode(e)||g.isExpectedUnsupportedBrowserError(i,e))?g.context.longLivedQosEvents.tryCallEndExpectedErrorOnAll("Fatal",i):g.context.longLivedQosEvents.tryCallEndUnexpectedErrorOnAll("Fatal",i),g.log.appLogic("PlayerAppLogic",{name:"ShowErrorBox"});var r=g.options.sessionData;g.initUiManager().then(function(){if(g.uiManager){if(e&&"PlayerError"===n&&g.showReportIssueDelayedButton){var t=g.localization.getString("ErrorBox.Waiting.Message");e.delayedCustomButtonOptions={customSecondaryButtonPromise:g.showReportIssueDelayedButton(g.localization,g.uiManager.getHostTheme()),loadingMessage:t}}g.uiManager.showErrorBox(Object(a.e)(Object(a.e)({},e),{playbackSessionId:r?r.clientSessionId:o.e,log:g.log}))}},function(e){g.log.fatal("PlayerError",e,{name:"UIManagerInitFailed",isExpected:!1})})},this.hideNavigationPanel=function(){g.uiManager&&g.uiManager.hideNavigationPanel()},this.showMessageBar=function(e,t,n){g.initUiManager().then(function(){var i,r=void 0;Object(s.e)(g.context.settingsStore.getSettingObject("isLongSessionWarningMessageBarEnabled","boolean"))?n&&(r=[Object(a.e)(Object(a.e)({},n),{text:g.localization.getString(n.text)})]):n&&n.href&&(r=[{text:g.localization.getString(n.text),href:n.href,dismissMessageOnInteraction:n.dismissMessageOnInteraction}]),null===(i=g.uiManager)||void 0===i||i.enqueuePlayerMessageBarMessage({messageType:At.e.warning,userActionName:e,text:g.localization.getString(t),links:r})}).catch(function(t){g.log.warn("PlayerError",t,{name:e+"-Failed",isExpected:!1})})},this.initUiManager=function(){return Object(a.t)(g,void 0,void 0,function(){var e,t=this;return Object(a.i)(this,function(a){switch(a.label){case 0:return this.uiManager?[3,2]:[4,Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(638)]).then(n.bind(null,3539))];case 1:e=a.sent().UiManager,this.uiManagerConfiguration.options.posterImageUrl=this.playerEngineAdaptor.getPosterImage(),this.uiManager=new e(this.uiManagerConfiguration,this.context),this.dataLayer&&this.uiManager.subscribeToMediaMetadata(this.dataLayer.metadata),this.pluginManager&&this.pluginManager.setUiManager(this.uiManager),this.playerEngineAdaptor.setTheme(this.uiManager.getHostTheme()),this.uiManager.navigationPanelState.subscribe(function(e){t.navigationPanelShownProperty.value=e.isOpen}),a.label=2;case 2:return[2]}})})},this.reloadPlayer=function(){Object(s.e)(g.context.settingsStore.getSettingObject("isAllowHostDefaultReloadOverrideEnabled","boolean"))&&g.options.reloadPlayer?g.options.reloadPlayer():window.location.reload()},this.getClosedCaptionsUrlAndInitPlayerCC=function(){return Object(a.t)(g,void 0,void 0,function(){var e,t,n,i,r,o;return Object(a.i)(this,function(a){switch(a.label){case 0:e=this.log.startQos("PlayerRenderEndQos",{name:"loadClosedCaptions"}),t=this.log.startQos("PlayerRenderEndQos",{name:"getClosedCaptionsUrl"}),n=[],a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.options.getClosedCaptionsUrl()];case 2:return n=a.sent(),i=n?Array.isArray(n)?n[0]:n:void 0,this.dataLayer&&(this.dataLayer.metadata.captionsAvailable.value=!!i),i?t.end():t.endExpectedError("Warning","Closed caption not available"),[3,4];case 3:return r=a.sent(),o=Object(u.e)(r),this.dataLayer&&(this.dataLayer.metadata.captionsAvailable.value=!1),t.endUnexpectedError("Warning",o),[3,4];case 4:return i?this.player.initializeClosedCaptions(n).then(function(){e.end()}).catch(function(t){var n=Object(u.e)(t);e.endUnexpectedError("Fatal",n)}):e.endExpectedError("Warning","Closed caption not available"),[2]}})})},this.hideErrorBox=function(){g.log.appLogic("PlayerAppLogic",{name:"HideErrorBox"}),g.uiManager&&g.uiManager.hideErrorBox()},this.isExpectedErrorCode=function(e){return!!e.errorCode&&["0x20200193","0x20200194","0x20200196","0x50400000"].includes(e.errorCode)},this.isExpectedUnsupportedBrowserError=function(e,t){var n=Object(u.a)(e.message);return n&&(t.titleStr=g.localization.getString("UnsupportedBrowserErrorTitle"),t.message=g.localization.getString("UnsupportedBrowserErrorMessage"),t.learnMoreLink=g.localization.getString("UnsupportedBrowserErrorLearnMoreLink")),n},this.wirePerfTelemetryStartedInHost=function(){var e,t;g.options.isNextGenEngineEnabled&&(null===(e=g.options.playbackSourceProvider)||void 0===e||e.wireQosEvents(g.log));for(var n=function(e,t){t.then(function(t){if(Object(D.n)(t.measure)&&g.log.completedQos("PlayerInitEndQos",t.measure,t.result,t.data),"FetchMetadata"===e){var n={metadataFetchErrorCode:t.result.errorCode,metadataFetchErrorMessage:t.result.message,metadataFetchErrorCorrelationId:t.data.backendCorrelationId,spRequestDuration:t.data.backendRequestDuration,isCdnHit:t.data.isCdnHit};g.playerEngineAdaptor.updateMetadataFetchInfo(n)}})},a=0,i=Object.entries(g.options.hostQosEventsToLog||{});a<i.length;a++){var r=i[a];n(r[0],r[1])}var o=null===(t=g.options.hostQosEventsToLog)||void 0===t?void 0:t.TimeToInteractive;"deferredLoad"!==g.options.loadMode||o||g.log.warn("ConfigurationError",Object(_.n)("TTI should be passed from host as a completed perf measure when using loadMode: deferredLoad"),{name:"HostConfigurationWarning",isExpected:!1}),Nt.forEach(function(e){var t=g.options.startedPerfMarks[e.mark];if(Object(D.t)(t))if("TimeToLoad"===e.mark&&"deferredLoad"===g.options.loadMode&&o)o.then(function(e){if(Object(D.n)(e.measure)){var t=e.measure,n=t.duration,a=t.startTime;return function(e){return{startTimeMs:a,endTimeMs:e.endTimeMs,durationMs:e.durationMs+n}}}},function(){}).then(function(n){var a=g.log.startQos("PlayerReportingEndQos",{name:e.mark},t,n);g.context.longLivedQosEvents.add(e.qos,a)},function(){});else if("FirstContentfulPaint"!==e.mark||g.uiConfiguration.isFluentMtcEnabled){var n=g.log.startQos("PlayerReportingEndQos",{name:e.mark},t);g.context.longLivedQosEvents.add(e.qos,n)}})},this.initializeInternal=function(e,t){return Object(a.t)(g,void 0,void 0,function(){var n;return Object(a.i)(this,function(a){switch(a.label){case 0:return a.trys.push([0,6,,7]),this.states.setState("StartingInit"),this.loadPlayerEngineAdaptorPromise?[4,this.loadPlayerEngineAdaptorPromise]:[3,2];case 1:a.sent(),a.label=2;case 2:return this.dataLayer=e,this.wirePerfTelemetryStartedInHost(),t&&"FullUi"===this.options.uiMode&&(this.pluginManager=new wt(t,this.player,this.context)),[4,this.initQos("playerInitBlockingWork",this.doPlayerInitBlockingWork)];case 3:return a.sent(),[4,this.initQos("initializePlayer",this.playerEngineAdaptor.initialize)];case 4:return a.sent(),[4,this.renderQos("playerRenderBlockingWork",this.doPlayerRenderBlockingWork)];case 5:return a.sent(),this.states.setState("PlayerCanRender"),[3,7];case 6:throw n=a.sent(),this.enterFatalErrorState(n),n;case 7:return[2]}})})},this.getPlayerOptions=function(e){var t,n,i,r,o=g.context.settingsStore.getSettingObject("IsPopOutButtonEnabled","boolean"),c=g.context.settingsStore.getSettingObject("IsStreamPopOutIconEnabled","boolean"),d=g.context.settingsStore.getSettingObject("isPlaybackStartTimeConsumptionEnabled","boolean"),l=Object(s.e)(g.context.settingsStore.getSettingObject("isDivSliderIsFocusableEnabled","boolean")),u=Object(s.e)(g.context.settingsStore.getSettingObject("isSetDynamicSizeInDialogEnabled","boolean")),f=Object(s.e)(g.context.settingsStore.getSettingObject("isVolumeShortcutHandlingEnabled","boolean")),p=Object(s.e)(g.context.settingsStore.getSettingObject("isPlayerPluginsCleanUpEnabled","boolean")),m=Object(s.e)(g.context.settingsStore.getSettingObject("isRemoveBigPlayButtonFocusEnabled","boolean")),_=Object(s.e)(g.context.settingsStore.getSettingObject("isMouseTooltipPositionEnabled","boolean")),h=Object(s.e)(g.context.settingsStore.getSettingObject("isVolumeBarAriaLabelLocalizationEnabled","boolean")),b=Object(s.e)(g.context.settingsStore.getSettingObject("isKeyboardShortcutUpdateEnabled","boolean")),v=Object(s.e)(g.context.settingsStore.getSettingObject("isPlaybackSpeedInPopoutChatEnabled","boolean")),y=void 0;g.renderBlockingOptions.prefetchedVideoElement||(y=g.prefManifestPromise);var S=void 0;if(Object(s.e)(d)){g.log.appLogic("PlayerAppLogic",{name:"PlaybackStartTimeInitialization"});var D=null!==(n=null===(t=g.options.playbackOptions)||void 0===t?void 0:t.startTimeInSeconds)&&void 0!==n?n:null===(i=g.options.playbackOptions)||void 0===i?void 0:i.startAtSecond;S="number"==typeof D&&D>=0?D:void 0}return g.showPopOutButton.value=!(!Object(s.e)(o)||!e.shouldShowPopOutButton),Object(a.e)(Object(a.e)({loadMode:g.options.loadMode,reloadPlayer:g.reloadPlayer,getDownloadRequestParametersAsync:g.options.getDownloadRequestParametersAsync,maxLogLevel:g.options.ampParams?g.options.ampParams.maxLogLevel:void 0,maxStreamingResolutionLimit:g.options.ampParams?g.options.ampParams.maxStreamingResolutionLimit:void 0,showPopOutButton:g.showPopOutButton.value,popOutButtonHasStreamIcon:Object(s.e)(c),isVolumeShortcutHandlingEnabled:f,mediaType:g.options.itemMetadata?g.options.itemMetadata.mediaType:void 0,poster:g.options.itemMetadata?g.options.itemMetadata.itemThumbnailUrl:void 0,playerBackgroundColor:g.options.playerBackgroundColor,startTimeInSeconds:S,heuristicProfile:g.heuristicProfile,showPlaybackSpeedButton:e.shouldShowPlaybackSpeed,getItemUrl:g.getItemUrl,uiMode:g.options.uiMode},g.renderBlockingOptions),{enableHybridPlayback:g.enableHybridPlayback,prefetchedManifestPromise:y,showDivSliderIsFocusable:l,thumbnailBase64Options:e.shouldShowThumbnailBase64?g.options.thumbnailBase64Options:void 0,showSetDynamicSizeInDialogEnabled:u,fullScreenToggleMode:null===(r=g.options.uiOptions)||void 0===r?void 0:r.fullScreenToggleMode,maxBufferingSec:e.maxVideoBufferSec||void 0,isPlayerPluginsCleanUpEnabled:p,isRemoveBigPlayButtonFocusEnabled:m,isMouseTooltipPositionEnabled:_,isVolumeBarAriaLabelLocalizationEnabled:h,isKeyboardShortcutUpdateEnabled:b,isRetryOnDecodeErrorDisabled:e.shouldDisableRetryOnDecodeError,prefetchAudioInitSegmentQualityPromise:g.prefetchAudioInitSegmentQualityPromise,prefetchVideoInitSegmentQualityPromise:g.prefetchVideoInitSegmentQualityPromise,isPlaybackSpeedInPopoutChatEnabled:v})},this.getItemUrl=function(){if(g.options.itemMetadata&&g.options.itemMetadata.itemUrl){if(!Object(s.e)(g.settingsStore.getSettingObject("isShareNavPanelAndCurrentTimeEnabled","boolean")))return g.options.itemMetadata.itemUrl;var e={defaultNavPanel:g.uiManager&&g.uiManager.navigationPanelState.value.isOpen?g.uiManager&&g.uiManager.navigationPanelState.value.panelId:void 0,playbackOptions:{startTimeInSeconds:g.player.currentTimeInSeconds.value}},t=g.options.itemMetadata.itemUrl.indexOf("?")>=0?"&":"?";return g.options.itemMetadata.itemUrl+t+"nav="+JSON.stringify(e)}},this.doPlaybackManifestPrefetch=function(e){return Object(a.t)(g,void 0,void 0,function(){var t,n,i,r=this;return Object(a.i)(this,function(a){switch(a.label){case 0:return t="unknown",e&&e.dashUrl&&e.dashUrl[0]?((n=e.dashUrl[0])&&(n=this.addAdditionalManifestParam(n)),[4,this.renderQos("prefetchDownloadRequestParametersAsync",function(){return r.options.getDownloadRequestParametersAsync(n)})]):[3,5];case 1:return(i=a.sent())&&i.url?[4,fetch(i.url,{headers:i.headers})]:[3,3];case 2:return[2,a.sent()];case 3:i?i.url||(t="updated url not defined"):t="updateDashRequest not defined",a.label=4;case 4:return[3,6];case 5:e?e.dashUrl?e.dashUrl[0]||(t="dashUrl[0] not defined"):t="dashUrl not defined":t="playbackUrls not defined",a.label=6;case 6:throw new Error("Dash Url is not valid: "+t)}})})},this.addAdditionalManifestParam=function(e){if(g.enableHybridPlayback&&-1!==e.indexOf("enableCdn=1")){var t=e.indexOf("?")>=0?"&":"?";return e+t+"hybridPlayback=true"}return e},this.getDownloadRequestParametersAsync=function(e,t){return Object(a.t)(g,void 0,void 0,function(){var n=this;return Object(a.i)(this,function(a){switch(a.label){case 0:return[4,this.renderQos("prefetch ".concat(t," InitSegmentRequestParametersAsync"),function(){return n.options.getDownloadRequestParametersAsync(e)})];case 1:return[2,a.sent()]}})})},this.getPrefetchManifest=function(e){return Object(a.t)(g,void 0,void 0,function(){var t,n;return Object(a.i)(this,function(a){switch(a.label){case 0:return Object(s.e)(this.settingsStore.getSettingObject("isPrefetchManifestHelperV2Enabled","boolean"))?[4,Object(Et.e)(e,this.options.getDownloadRequestParametersAsync,!!this.enableHybridPlayback)]:[3,2];case 1:return n=a.sent(),[3,4];case 2:return[4,this.doPlaybackManifestPrefetch(e)];case 3:n=a.sent(),a.label=4;case 4:return(t=n)?[4,t.text()]:[2,void 0];case 5:return[2,{text:a.sent(),status:t.status,statusText:t.statusText,headers:t.headers,url:t.url}]}})})},this.kickoffRenderBlockingWorkEarly=function(){var e,t,n,i;if(g.playbackUrlsPromise=g.options.getPlaybackUrls(),g.favorProgressivePromise=g.options.getFavorProgressivePlayback&&g.options.getFavorProgressivePlayback()||Promise.resolve(!1),g.options.prefetchManifestResponse&&g.options.prefetchManifestResponse.prefetchManifestPromise?(g.prefManifestPromise=g.options.prefetchManifestResponse.prefetchManifestPromise,g.log.appLogic("PlayerAppLogic",{name:"HostProvidedPrefetchManifestPromiseUsed"})):g.prefManifestPromise=Promise.all([g.favorProgressivePromise,g.playbackUrlsPromise]).then(function(e){var t=e[0],n=e[1];if(!t)return g.renderQos("prefetchManifest",function(){return Object(a.t)(g,void 0,void 0,function(){return Object(a.i)(this,function(e){return[2,this.getPrefetchManifest(n)]})})})}).catch(function(){}),g.isPrefInitSegmentFlightEnabled){var r=(t={prefManifestPromise:g.prefManifestPromise,initQos:g.initQos,getDownloadRequestParametersAsync:g.getDownloadRequestParametersAsync,log:g.log,isIncreasedDefaultBandwidth:g.isIncreasedDefaultBandwidth,isIncreasedDefaultBandwidthV2:g.isIncreasedDefaultBandwidthV2},n=null===(e=g.settingsStore.getSettingObject("prefSegTimeout","number"))||void 0===e?void 0:e.value,i=t.prefManifestPromise.then(function(e){if(e)return function(e){var t=e.text,n=(new DOMParser).parseFromString(t,"application/xml"),a=function(e){var t;return null===(t=e.documentElement.getElementsByTagName("BaseURL")[0])||void 0===t?void 0:t.innerHTML}(n);if(a){var i=n.documentElement.getElementsByTagName("AdaptationSet"),r=ft(i,"audio",a,e.url,!0),o=ft(i,"video",a,e.url,!1);if(r&&o)return{baseUrl:a,audioAdaptationSet:r,videoAdaptationSet:o}}}(e)}).catch(function(e){t.log.warn("PlayerError",e,{name:"PrefetchInitSegmentsFailed",isExpected:!1})}),{audioSegmentQuality:mt(t,i,n),videoSegmentQuality:_t(t,i,n)});g.prefetchAudioInitSegmentQualityPromise=null==r?void 0:r.audioSegmentQuality,g.prefetchVideoInitSegmentQualityPromise=null==r?void 0:r.videoSegmentQuality}g.options.prefVideoTagPromise?(g.prefVideoTagPromise=g.options.prefVideoTagPromise,g.log.appLogic("PlayerAppLogic",{name:"HostProvidedPrefetchVideoTagPromiseUsed"})):g.prefVideoTagPromise=Promise.all([g.favorProgressivePromise,g.playbackUrlsPromise]).then(function(e){var t=e[0],n=e[1];if(t){var a=Object(s.e)(g.context.settingsStore.getSettingObject("isRemoveMouseEventFocusStateEnabled","boolean")),i=Object(s.e)(g.context.settingsStore.getSettingObject("isAddCrossOriginAnonymousEnabled","boolean"));return function(e,t,n,a,i){if(t.progressiveUrl&&0!==t.progressiveUrl.length&&t.progressiveUrl[0]){var r=document.createElement("video");if(!(t.hlsUrl&&t.hlsUrl.length>0&&t.hlsUrl[0]&&function(e){var t=e.canPlayType("application/vnd.apple.mpegurl");return"maybe"===t||"probably"===t}(r)))return ne({backgroundColor:e.playerBackgroundColor,container:n,videoElement:r,isRemoveMouseEventFocusStateEnabled:a,isAddCrossOriginAnonymousEnabled:i}),r.src=t.progressiveUrl[0],r.load(),r}}(g.options,n,g.uiConfiguration.videoEngineContainer,a,i)}}).catch(function(e){g.log.warn("PlayerError",e,{name:"PrefetchProgressiveFailed",isExpected:!1})})},this.doPlayerInitBlockingWork=function(){return Object(a.t)(g,void 0,void 0,function(){var e=this;return Object(a.i)(this,function(t){switch(t.label){case 0:return this.onePlayerResourcesPromise=this.initQos("loadOnePlayerResources",this.isOptimizedWebVideoLocalizationEnabled?this.localization.loadResources:function(){return e.localization.setLocale(e.language)}),this.context.isNextGenEngineEnabled||this.kickoffRenderBlockingWorkEarly(),[4,this.onePlayerResourcesPromise];case 1:return t.sent(),[2]}})})},this.doPlayerRenderBlockingWork=function(){return Object(a.t)(g,void 0,void 0,function(){var e,t,n,i,r,o,c,d;return Object(a.i)(this,function(a){switch(a.label){case 0:return this.uiConfiguration.isFluentMtcEnabled?[4,this.mtcManagerPromise]:[3,2];case 1:e=a.sent().MtcManager,t=this.log.startQos("PlayerRenderEndQos",{name:"fluentMtcRender"}),n={isPreRoll:this.player.isPreRoll,playState:this.player.playState,titleObservable:this.dataLayer.metadata.itemTitle,isBuffering:this.player.isBuffering,showPopOutButton:this.showPopOutButton},i=Object(s.e)(this.context.settingsStore.getSettingObject("isAllowStreamWebAppToHideBrandingEnabled","boolean"))?void 0===this.uiManagerConfiguration.options.branding||null===this.uiManagerConfiguration.options.branding:!this.uiManagerConfiguration.options.branding,r=!i&&this.uiManagerConfiguration.options.branding?this.uiManagerConfiguration.options.branding:this.localization.getString("MicrosoftStream");try{this.mtcManager=new e(this.uiManagerConfiguration.uiConfiguration,this.context,n,this.player,this.options.loadMode,r,this.options.showMetadataOverlay,this.options.themeData,this.getItemUrl,null===(d=this.options.itemMetadata)||void 0===d?void 0:d.popOutButtonItemUrlQueryStringProperties),this.uiManagerConfiguration.addPlaybackExperienceButton=this.mtcManager.addPlaybackExperienceButton.bind(this.mtcManager),this.context.isNextGenEngineEnabled&&(this.player.isActive=this.mtcManager.isActive),Object(s.e)(this.settingsStore.getSettingObject("isFluentMtcRerenderFixEnabled","boolean"))&&(this.uiManagerConfiguration.options.getHostTheme=this.mtcManager.getHostTheme.bind(this.mtcManager)),this.mtcManager.initializeSpinnerAndBigPlayButton(this.options.isDevMode),this.isFluentMtcInitSplitV2Enabled||(this.mtcManager.initializeMediaTransportControlUi(!1),this.uiManagerConfiguration.uiConfiguration.pluginMarkersContainer=this.mtcManager.pluginMarkersContainer,this.uiManagerConfiguration.playerUiObservableProperties.isActive=this.mtcManager.isActive,this.uiManagerConfiguration.uiConfiguration.detailsButtonContainer=this.mtcManager.detailsButtonContainer),t.end()}catch(e){o=Object(u.e)(e),t.endUnexpectedError("Fatal",o)}a.label=2;case 2:return[4,Promise.all([this.playbackUrlsPromise,this.favorProgressivePromise,this.prefVideoTagPromise])];case 3:return c=a.sent(),this.playbackUrls=c[0],this.renderBlockingOptions.favorProgressive=c[1],this.renderBlockingOptions.prefetchedVideoElement=c[2],[2,this.phaseSpecificWorkAndQos("BeforePlayer",this.renderQos)]}})})},this.doUiBlockingWork=function(){return Object(a.t)(g,void 0,void 0,function(){return Object(a.i)(this,function(e){return this.getClosedCaptionsUrlAndInitPlayerCC().catch(function(){}),[2,this.phaseSpecificWorkAndQos("BeforeUi",this.renderQos)]})})},this.phaseSpecificWorkAndQos=function(e,t){return Object(a.t)(g,void 0,void 0,function(){var n=this;return Object(a.i)(this,function(a){switch(a.label){case 0:return[4,t("loadDataForPhase".concat(e),function(){return n.dataLayer.loadDataForPhase(e)})];case 1:return a.sent(),this.log.appLogic("PlayerPluginStateChanged",{newState:e}),this.pluginManager?[4,t("allPluginInitForPhase".concat(e),function(){return n.pluginManager.initPhaseChange(e)})]:[3,3];case 2:a.sent(),a.label=3;case 3:return[2]}})})},this.logStateChanged=function(e,t){g.log.appLogic("PlayerCoreStateChanged",{newState:e,oldState:t})},this.initQos=function(e,t,n){return g.log.measureQos("PlayerInitEndQos",{name:e},t,n)},this.renderQos=function(e,t,n){return g.log.measureQos("PlayerRenderEndQos",{name:e},t,n)},this.diagnosticToolKeyboardListener=function(e){return Object(a.t)(g,void 0,void 0,function(){return Object(a.i)(this,function(t){switch(t.label){case 0:return[4,Pt(this.uiConfiguration,this.context,e,this.player)];case 1:return t.sent(),[2]}})})},this.navigationPanelShownProperty=new v.e(void 0!==d.panels.navigationMenuDefaultOpenBehavior&&d.panels.navigationMenuDefaultOpenBehavior.assumePanelWillBeOpen&&d.panels.navigationMenuDefaultOpenBehavior.sufficientWidthForDefaultPanelToOpen),this.options.uiMode=this.options.uiMode||"FullUi";var S=e;this.heuristicProfile=S.mediaServiceContext&&"amsObjectId"in S.mediaServiceContext?"QuickStart":"MeTA",this.log=new Dt(e.telemetryCallbacks);var I=this.log.startQos("PlayerInitEndQos",{name:"timeInConstructor"});this.states=new ae("ErrorOccurred",this.logStateChanged),this.states.setState("Instantiation");var x=this.log.fatal.bind(this.log);this.resourceLoader=new xt(function(e){return x("NetworkError",e.message,e)},this.options.networkHealthCheckUrl);var C=this.initQos.bind(this),O=Object(i.n)()?localStorage.getItem(ie.e):void 0;this.language=O||this.options.userContext&&this.options.userContext.language,this.localization=r(this.resourceLoader.getResourceLoader(C),this.language),this.showPopOutButton=new v.e(!1),this.context={log:this.log,loc:this.localization,settingsStore:this.settingsStore,longLivedQosEvents:new gt.e,states:this.states,networkHealthCheckUrl:this.options.networkHealthCheckUrl,flightingContext:this.options.flightingContext,isNextGenEngineEnabled:e.isNextGenEngineEnabled};var w={clientSessionId:null===(f=e.sessionData)||void 0===f?void 0:f.clientSessionId,userSessionId:null===(p=e.sessionData)||void 0===p?void 0:p.userSessionId};if(this.options.startedPerfMarks.OnePlayerStart&&Object(D.t)(this.options.startedPerfMarks.OnePlayerStart)&&(this.appStart=this.options.startedPerfMarks.OnePlayerStart.startTime),this.context.isNextGenEngineEnabled){var E=new re.e;this.playerEngineAdaptor=E,this.loadPlayerEngineAdaptorPromise=this.initNextGenEngineAdaptor().then(function(e){E.attach(e)})}else this.playerEngineAdaptor=new ut(t,this.uiConfiguration.videoEngineContainer,this.showErrorBox,this.hideErrorBox,this.context,{initPhase:this.measuredResourceLoader(this.initQos),renderPhase:this.measuredResourceLoader(this.renderQos)},this.uiConfiguration.isFluentMtcEnabled,e.returnVideoElementToHost,w,this.appStart,this.options.isDownloadBlocked,this.options.itemMetadata&&this.options.itemMetadata.itemSizeInBytes);this.context.isNextGenEngineEnabled&&this.isCaptionsForNextEngineEnabled&&(this.playerApi=new Ht(this.playerEngineAdaptor,this.context,this.localization)),Object(s.e)(this.settingsStore.getSettingObject("isOnePlayerListenToLatestFatalErrorEnabled","boolean"))&&(this.context.isNextGenEngineEnabled?null===(h=this.player.latestError)||void 0===h||h.subscribe(function(e){var t=e||void 0;t&&t.isFatal&&g.enterFatalErrorState(e,"PlayerError")}):null===(m=this.player.latestFatalError)||void 0===m||m.subscribe(function(e){e&&g.enterFatalErrorState(e,"PlayerError")})),this.uiConfiguration.playerMatchesContentAspectRatio&&this.player.mediaDimensions.subscribe(function(e){0!==(null==e?void 0:e.mediaWidth)&&0!==(null==e?void 0:e.mediaHeight)&&(g.uiConfiguration.videoEngineContainer.style.aspectRatio="".concat(e.mediaWidth/e.mediaHeight))}),Object(s.e)(this.settingsStore.getSettingObject("isShowNavPanelOverflowOnlyEnabled","boolean"))&&this.options.uiOptions&&(this.uiConfiguration.shouldShowNavPanelOverflowOnly=this.options.uiOptions.shouldShowNavPanelOverflowOnly);var A={isActive:this.player.isActive,isPlayerReady:this.player.isPlayerReady,isPreRoll:this.player.isPreRoll,playState:this.player.playState,currentTimeInSeconds:this.player.currentTimeInSeconds,toggleSeekMouseVisibility:this.playerEngineAdaptor.toggleSeekMouseVisibility};if(this.uiManagerConfiguration={options:{showMetadataOverlay:e.showMetadataOverlay,branding:e.overlayBranding,themeData:e.themeData,mediaType:e.itemMetadata&&e.itemMetadata.mediaType,getMediaDurationsInSeconds:function(){var e;return g.context.isNextGenEngineEnabled?g.player.mediaDurationInSecondsV2.value:null===(e=g.player.mediaDurationsInSeconds)||void 0===e?void 0:e.afterLoadedData},reloadPlayer:this.reloadPlayer},playerUiObservableProperties:A,uiConfiguration:Object(a.e)({pluginMarkersContainer:null,detailsButtonContainer:null},this.uiConfiguration),getItemUrl:this.getItemUrl},this.enableHybridPlayback=Object(s.e)(this.settingsStore.getSettingObject("isHybridPlaybackEnabled","boolean"))||Object(s.e)(this.settingsStore.getSettingObject("60381","boolean")),this.isPrefInitSegmentFlightEnabled=Object(s.e)(this.settingsStore.getSettingObject("isPrefInitSegmentV2Enabled","boolean")),this.isIncreasedDefaultBandwidthV2=Object(s.e)(this.settingsStore.getSettingObject("isIncreasedDefaultBandwidthV2","boolean")),this.isIncreasedDefaultBandwidth=null!==(b=Object(s.e)(this.settingsStore.getSettingObject("isIncreasedDefaultBandwidth","boolean")))&&void 0!==b&&b,this.uiConfiguration.isFluentMtcEnabled){this.mtcManagerPromise=Promise.all([n.e(0),n.e(24),n.e(649),n.e(341)]).then(n.bind(null,3538));var L=this.uiManagerConfiguration.uiConfiguration.playerContainer,k=this.uiManagerConfiguration.uiConfiguration.playbackControlsContainer.parentElement,M=k&&k.classList.contains("mtc-controls")?k:L,P=Object(y.n)(function(){M.clientWidth<320&&L.style.setProperty("--oneplayer-mtc-fluent-spacing","center"),M.clientWidth>=320&&L.style.setProperty("--oneplayer-mtc-fluent-spacing","space-between"),M.clientWidth<480?L.style.setProperty(bt.e.captionsTrackMtcHiddenInset,"0px 0px 16px 0px"):L.style.setProperty(bt.e.captionsTrackMtcHiddenInset,"0px 0px 40px 0px")},200);this.mtcResizeObserver=new ResizeObserver(P),this.mtcResizeObserver.observe(M)}this.setNetworkHealthCheckUrl(),this.isFluentMtcInitSplitV2Enabled=Object(s.e)(this.context.settingsStore.getSettingObject("isFluentMtcInitSplitV2Enabled","boolean")),I.end()}return Object.defineProperty(e.prototype,"videoElement",{get:function(){return this.player.getVideoElement()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"player",{get:function(){return this.context.isNextGenEngineEnabled&&this.isCaptionsForNextEngineEnabled?this.playerApi:this.playerEngineAdaptor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"navigationPanelShown",{get:function(){return this.navigationPanelShownProperty},enumerable:!1,configurable:!0}),e.prototype.enterFatalErrorState=function(e,t){var n=this;this.enterFatalErrorStateAsync(e,t).catch(function(e){n.log.fatal("PlayerError",e,{name:"EnterFatalErrorStateFailed",isExpected:!1})})},e.prototype.enterFatalErrorStateAsync=function(e,t){return Object(a.t)(this,void 0,void 0,function(){var n;return Object(a.i)(this,function(a){switch(a.label){case 0:return this.states.setState("ErrorOccurred"),[4,this.onePlayerResourcesPromise];case 1:return a.sent(),n={titleStr:this.localization.getString("FatalPlayerLoadingErrorTitle"),reload:this.reloadPlayer,message:this.localization.getString("FatalPlayerLoadingErrorMessage"),isRecoverable:!1,isResponsiveToHostEnabled:Object(s.e)(this.context.settingsStore.getSettingObject("isResponsiveCSSToHostEnabled","boolean"))},this.showErrorBox(n,e,t),[2]}})})},e.prototype.measuredResourceLoader=function(e){var t=e.bind(this);return this.resourceLoader.getResourceLoader(t)},e.prototype.initNextGenEngineAdaptor=function(){var e,t,i;return Object(a.t)(this,void 0,void 0,function(){var r,o,c,d=this;return Object(a.i)(this,function(a){switch(a.label){case 0:if(!this.options.playbackSourceProvider)throw new Error("SourceProvider is not provided");return[4,n.e(494).then(n.bind(null,3547))];case 1:return r=a.sent(),o="autoplayOn"===this.options.loadMode||Object(s.e)(this.settingsStore.getSettingObject("isNextGenEngineDeferLoadEnabled","boolean"))&&"deferredLoad"===this.options.loadMode,c={appStartTime:this.appStart,container:this.uiConfiguration.videoEngineContainer,loggingService:this.log,settingsStore:this.context.settingsStore,getRequestParamsAsync:this.options.getDownloadRequestParametersAsync,oneplayerState:this.context.states,longLivedQosEvents:this.context.longLivedQosEvents,sources:this.options.playbackSourceProvider.getPlaybackSources(Object(s.e)(this.context.settingsStore.getSettingObject("isFluentMtcNavPanelRtlFixEnabled","boolean"))),onLongLivedQosEventsEnd:function(){return d.context.longLivedQosEvents.tryCallEnd("timeToLoadQos")},isFluentMtcEnabled:this.uiConfiguration.isFluentMtcEnabled,autoplay:o,heuristicSettings:null===(e=this.options.playbackOptions)||void 0===e?void 0:e.engineHeuristicSettings,startTimeInSeconds:null===(t=this.options.playbackOptions)||void 0===t?void 0:t.startTimeInSeconds,didHostProvidePrefetchedData:void 0!==this.options.playbackSourceProvider,getItemUrl:this.getItemUrl,posterImageUrl:null===(i=this.options.itemMetadata)||void 0===i?void 0:i.itemThumbnailUrl,dashPlaybackConfig:this.options.playbackSourceProvider.getDashPlaybackConfig(),isHybridCdnEnabled:this.options.isNextGenEngineWithCdnEnabled},[2,new r.PlayerEngineAdaptor(c)]}})})},e.prototype.setNetworkHealthCheckUrl=function(){Object(s.e)(this.context.settingsStore.getSettingObject("performHealthCheckIdentifyNetworkFailuresKS","boolean"))?S.e.setHealthCheckUrl(this.options.networkHealthCheckUrl):S.e.setHealthCheckUrl(void 0)},e}(),jt=n(644),Vt=n(1172),zt=n(645),Gt=n(478),Kt=n(1762),Wt=n(19),qt=function(e){void 0===e&&(e=3e5);var t=this;this.timerId=setTimeout(function(){return""},1e3),this.start=function(){t.timerId=setInterval(function(){t._pulse.value=!t._pulse.value},t.timeOut)},this.stop=function(){t.timerId&&clearTimeout(t.timerId)},this.reset=function(){t.stop(),t.start()},e=e>0?e:0,this.timeOut=e,this._pulse=new v.e(!1)};!function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"}(Rt||(Rt={}));var Qt=function(e,t){var n=this;this._signalTrace=[],this._seeking=!1,this.retrieveAndClearSignalTrace=function(){var e=n._signalTrace.toString();return n._signalTrace=[],e},this.listenToEngineEvents=function(){var e;return n._player?(n._player.playbackFormat.subscribe(function(e){n.updateSignalSourceUsingPlaybackFormat(e),n._signalTrace.push(["PlaybackFormatChanged",JSON.stringify({format:e})])}),n._player.isPlayerReady.subscribe(function(e){var t=n._player.currentTimeInSeconds.value;e&&n._trigger("PlayerLoaded",{currentTimeInSeconds:t,signalSource:n._signalSource}),n._signalTrace.push(["PlayerLoaded",JSON.stringify({PBTime:t})])}),n._player.mediaDurationInSecondsV2.subscribe(function(e){var t=n._player.currentTimeInSeconds.value;n._trigger("DurationUpdated",{currentTimeInSeconds:t,signalSource:n._signalSource,mediaDurationInSeconds:e}),n._signalTrace.push(["DurationUpdated",JSON.stringify({PBTime:t,duration:e})])}),n._player.playState.subscribe(function(e){var t,a=null===(t=n._player.currentTimeInSeconds)||void 0===t?void 0:t.value;"Playing"===e?n._trigger("Play",{currentTimeInSeconds:a,signalSource:n._signalSource}):"Paused"===e&&(a&&a>0&&a===n._player.mediaDurationInSecondsV2.value?n._trigger("PlaybackEnded",{currentTimeInSeconds:a,signalSource:n._signalSource,reason:"Completed"}):n._trigger("Pause",{currentTimeInSeconds:a,signalSource:n._signalSource})),n._signalTrace.push([null!=e?e:"PlayState",JSON.stringify({PBTime:a})])}),n._player.seeking.subscribe(function(e){var t,a=null===(t=n._player.currentTimeInSeconds)||void 0===t?void 0:t.value;n._trigger("Seek",{currentTimeInSeconds:a,signalSource:n._signalSource,isSeeking:e}),!e!==n._seeking&&n._signalTrace.push([e?"Seeking":"Seeked",JSON.stringify({PBTime:a})]),n._seeking=e}),n._player.isBuffering.subscribe(function(e){var t,a=null===(t=n._player.currentTimeInSeconds)||void 0===t?void 0:t.value;n._trigger("Buffer",{currentTimeInSeconds:a,signalSource:n._signalSource,isBuffering:e}),n._signalTrace.push([e?"Buffering":"Buffered",JSON.stringify({PBTime:a})])}),n._player.playbackRate.subscribe(function(e){var t,a=null===(t=n._player.currentTimeInSeconds)||void 0===t?void 0:t.value;n._trigger("PlaybackSpeedChanged",{currentTimeInSeconds:a,signalSource:n._signalSource,playbackSpeed:e}),n._signalTrace.push(["PlaybackSpeedChanged",JSON.stringify({PBTime:a,rate:e})])}),null===(e=n._player.latestError)||void 0===e||e.subscribe(function(e){var t,a,i,r,o=null===(a=null===(t=n._player)||void 0===t?void 0:t.currentTimeInSeconds)||void 0===a?void 0:a.value;if(e){var s=!1,c=!0;try{var d=e;s=null!==(i=null==d?void 0:d.isFatal)&&void 0!==i&&i,c=null===(r=null==d?void 0:d.ignoreFallback)||void 0===r||r}catch(e){}n._trigger("ErrorSignal",{currentTimeInSeconds:o,signalSource:n._signalSource,error:e,isFatal:s,ignoreFallback:c}),n._signalTrace.push(["Error",JSON.stringify({PBTime:o,isFatal:s,ignoreFallback:c})])}}),Rt.Success):Rt.Failure},this.updateSignalSourceUsingPlaybackFormat=function(e){n._signalSource=e?"DASH"===e?"Engine-Shaka":"Engine-Native":"Engine"},this._player=e,this._trigger=t},Yt=function(e,t){var n=this;this._fetchCurrentTimeInSeconds=e,this._notifyAnalytics=t,this._hasPlayerLoaded=!1,this._playbackActivities=[],this.getPlaybackActivities=function(){var e=n._fetchCurrentTimeInSeconds();return n._isValidTime(e)&&n._isPlaying()&&(n._endOngoingPlay(e),n._lastPlayTime=e),n._playbackActivities.splice(0)},this.receivePlaybackEvent=function(e,t){var a;n._hasPlayerLoaded;var i=t.currentTimeInSeconds;if(!n._isValidTime(i)&&"PlayerLoaded"!==e&&"ErrorSignal"!==e)return Rt.Failure;try{switch(e){case"Play":-1!==n._inferLastPlayTime()||n._isSeeking()||n._isBuffering()?n._isValidTime(n._lastPlayTime):n._lastPlayTime=i;break;case"Pause":n._isPlaying()?n._endOngoingPlay(i):n._isValidTime(n._lastPlayTime);break;case"Seek":t.isSeeking?(n._endOngoingPlay(i),n._seekStartTime=i):(n._seekStartTime=void 0,n._seekEndTime=i);break;case"Buffer":t.isBuffering?(n._endOngoingPlay(i),n._bufferStartTime=i):(n._bufferStartTime=void 0,n._bufferEndTime=i);break;case"ErrorSignal":n._isErrorImpactingPlayback(t)&&(n._endOngoingPlay(i),n._resetMetrics(!0));break;case"PlayerLoaded":n._hasPlayerLoaded=!0;break;case"PlaybackEnded":n._endOngoingPlay(i)}("ErrorSignal"===e&&n._isErrorImpactingPlayback(t)||"PlaybackEnded"===e||(null===(a=n._playbackActivities)||void 0===a?void 0:a.length)>=10)&&n._notifyAnalytics()}catch(e){return Rt.Failure}return Rt.Success},this._endOngoingPlay=function(e){var t=n._inferLastPlayTime(),a=null!=e?e:-1;n._isValidTime(a)&&n._isValidTime(t)&&a>t&&n._playbackActivities.push({playbackEvent:"Play",startTime:t,endTime:a}),n._resetMetrics()},this._inferLastPlayTime=function(){return void 0!==n._lastPlayTime&&n._isValidTime(n._lastPlayTime)?n._lastPlayTime:void 0!==n._seekEndTime&&n._isValidTime(n._seekEndTime)?n._seekEndTime:void 0!==n._bufferEndTime&&n._isValidTime(n._bufferEndTime)?n._bufferEndTime:-1},this._resetMetrics=function(e){void 0===e&&(e=!1),e&&(n._hasPlayerLoaded=!1,n._seekStartTime=void 0,n._bufferStartTime=void 0),n._lastPlayTime=void 0,n._seekEndTime=void 0,n._bufferEndTime=void 0},this._isValidTime=function(e){return null!=e&&!isNaN(e)&&e>=0},this._isSeeking=function(){return void 0!==n._seekStartTime},this._isBuffering=function(){return void 0!==n._bufferStartTime},this._isPlaying=function(){return n._inferLastPlayTime()>-1&&!n._isSeeking()&&!n._isBuffering()},this._isErrorImpactingPlayback=function(e){var t=e;return(null==t?void 0:t.isFatal)||!(null==t?void 0:t.ignoreFallback)}},Jt=function(e){var t,n=this;this.playbackActivities=[],this.thresholdUserActionCount=4,this.bufferLength=10,this.userPlayPauseActionCounts=0,this.lastProcessedIntervalIndex=-1,this.currentPlaybackActivity=void 0,this.player=void 0,this.mediaDurationInSeconds=void 0,this.eventTraceSignalSequenceNumber=1,this.dispose=function(){n.playbackTimer.stop(),n.useNewPlaybackActivityBuilder?n.triggerSignalSend(n.isForcedEndSignalEnabled?"MSOnePlayer":void 0):n.isForcedEndSignalEnabled?n.endFlush("MSOnePlayer"):n.flushTelemetry(!0)},this.currentPlaybackTimeFetcher=function(){var e,t;return null===(t=null===(e=n.player)||void 0===e?void 0:e.currentTimeInSeconds)||void 0===t?void 0:t.value},this.onUserActionEvent=function(e){if(!(n.useNewPlaybackActivityBuilder||"Play"!==e.name&&"Pause"!==e.name)){n.userPlayPauseActionCounts+=1,n.populateNewPlaybackActivities();var t=Math.floor(e.playbackTimeSec)===n.getMediaDuration();1===n.flushTelemetry(t)&&n.resetMetrics()}},this.triggerSignalSend=function(e){var t,a,i;if(n.playbackActivities=n.playbackActivitiesBuilder.getPlaybackActivities(),((null===(t=n.playbackActivities)||void 0===t?void 0:t.length)>0||void 0!==e)&&(n.loggingService.appLogic("MediaAnalytics",n.prepareSchema(e)),n.playbackActivities=[]),n.isEventTraceLoggingEnabled){var r=null!==(i=null===(a=n.engineAnalyticsAdaptor)||void 0===a?void 0:a.retrieveAndClearSignalTrace())&&void 0!==i?i:"";""!==r&&n.loggingService.appLogic("MediaAnalyticsEventTrace",{eventTrace:r,seqNumber:n.eventTraceSignalSequenceNumber++})}},this.populateNewPlaybackActivities=function(){var e=n.playIntervalsGetter();if(e&&e.length>0){if(n.lastProcessedIntervalIndex>=0){var t=e[n.lastProcessedIntervalIndex];t[1]!==n.lastProcessedInterval[1]&&(n.currentPlaybackActivity&&n.currentPlaybackActivity.startTime>=0?n.currentPlaybackActivity.endTime=t[1]:n.currentPlaybackActivity={playbackEvent:"Play",startTime:n.isPlaybackActivityFixEnabled?n.lastProcessedInterval[1]:n.lastProcessedInterval[1]+1,endTime:t[1]},n.lastProcessedInterval=e[n.lastProcessedIntervalIndex])}for(var a=n.lastProcessedIntervalIndex+1;a<e.length;a++){n._addCurrentPlaybackActivityIfValid();var i=e[a];n.currentPlaybackActivity={playbackEvent:"Play",startTime:i[0],endTime:i[1]},n.lastProcessedIntervalIndex=a,n.lastProcessedInterval=e[n.lastProcessedIntervalIndex]}}},this._addCurrentPlaybackActivityIfValid=function(){if(n.currentPlaybackActivity){var e=n.currentPlaybackActivity;n._isValidNumber(e.startTime)&&n._isValidNumber(e.endTime)&&("Play"===e.playbackEvent&&e.startTime>e.endTime||n.playbackActivities.push(e)),n.currentPlaybackActivity=void 0}},this._isValidNumber=function(e){return!(null==e||isNaN(e)||e<0)},this.getMediaDuration=function(){var e,t;return n.useNewPlaybackActivityBuilder?null!==(t=null===(e=n.player)||void 0===e?void 0:e.mediaDurationInSecondsV2.value)&&void 0!==t?t:-1:(n.mediaDurationInSeconds||(n.mediaDurationInSeconds=n.player&&n.player.mediaDurationsInSeconds&&n.player.mediaDurationsInSeconds.afterCanPlayThrough),n.mediaDurationInSeconds||-1)},this._getPlaybackPlatform=function(){var e,t,a={Player:"OnePlayer",PlaybackType:null===(t=null===(e=n.player)||void 0===e?void 0:e.playbackFormat)||void 0===t?void 0:t.value,manifestDuration:n.player&&n.player.mediaDurationInSeconds,metadataDuration:n.options&&"odspContext"in n.options&&n.options.odspContext&&n.options.odspContext.fileDuration&&(n.options.odspContext.fileDuration>0?n.options.odspContext.fileDuration/1e3:n.options.odspContext.fileDuration),durationAfterManifestParsingCompleted:n.player&&n.player.mediaDurationsInSeconds&&n.player.mediaDurationsInSeconds.afterManifestParsingCompleted,durationAfterCanPlay:n.player&&n.player.mediaDurationsInSeconds&&n.player.mediaDurationsInSeconds.afterCanPlay,durationAfterLoadedMetadata:n.player&&n.player.mediaDurationsInSeconds&&n.player.mediaDurationsInSeconds.afterLoadedMetadata,durationAfterLoadedData:n.player&&n.player.mediaDurationsInSeconds&&n.player.mediaDurationsInSeconds.afterLoadedData,durationAfterCanPlayThrough:n.player&&n.player.mediaDurationsInSeconds&&n.player.mediaDurationsInSeconds.afterCanPlayThrough};return JSON.stringify(a)},this.getSignalId=function(){return Object(Wt.e)()},this.prepareSchema=function(e){var t=h.t.Missing;return{name:"MediaAnalytics",playbackActivities:JSON.stringify(n.playbackActivities),startTime:(new Date).toISOString(),endTime:(new Date).toISOString(),status:"Completed",compliance:"EUII",aadAppId:"00000003-0000-0ff1-ce00-000000000000",appName:n.options&&n.options.hostContext&&n.options.hostContext.app?n.options.hostContext.app:t,appVer:t,actorType:"User",aadTenantId:n.options&&n.options.userContext&&n.options.userContext.tenantId?n.options.userContext.tenantId:t,actorIdType:"AAD",actorId:n.options&&n.options.userContext&&n.options.userContext.userId?n.options.userContext.userId:t,itemType:"File",vroomItemId:n.options&&"odspContext"in n.options&&n.options.odspContext&&n.options.odspContext.itemId?n.options.odspContext.itemId:t,containerId:"",containerType:"",clientSessionId:t,isLive:!1,listItemUniqueId:n.options&&n.options.mediaServiceContext&&"listItemUniqueId"in n.options.mediaServiceContext&&n.options.mediaServiceContext.listItemUniqueId?n.options.mediaServiceContext.listItemUniqueId:t,operation:"MediaPlaybackSignaled",pageMode:"Read",playbackType:t,playbackPlatform:n._getPlaybackPlatform(),fileExtension:t,userType:t,fileDuration:n.getMediaDuration(),vroomDriveId:n.options&&"odspContext"in n.options&&n.options.odspContext&&n.options.odspContext.driveId?n.options.odspContext.driveId:t,endReason:"InProgress",graphId:n.options&&n.options.mediaServiceContext&&"graphId"in n.options.mediaServiceContext&&n.options.mediaServiceContext.graphId?n.options.mediaServiceContext.graphId:t,signalVersion:n.isForcedEndSignalEnabled?2:1.9,webId:n.options&&n.options.mediaServiceContext&&"webId"in n.options.mediaServiceContext&&n.options.mediaServiceContext.webId?n.options.mediaServiceContext.webId:t,signalGuid:n.getSignalId(),signalSequenceNumber:n.signalSequenceNumber++,isEndSignal:n.isForcedEndSignalEnabled?void 0!==e:void 0,unloadSource:n.isForcedEndSignalEnabled?e:void 0}},this.sendMediaAnalytics=function(){n.playbackActivities&&n.playbackActivities.length>0&&(n.transformPlaybackActivities(),n.loggingService.appLogic("MediaAnalytics",n.prepareSchema()))},this.transformPlaybackActivities=function(){n.playbackActivities[0].endTime>n.getMediaDuration()&&(n.playbackActivities[0].endTime=n.getMediaDuration());for(var e=n.playbackActivities[0].endTime,t=1;t<n.playbackActivities.length;t++)n.playbackActivities[t].startTime===e+1&&(n.playbackActivities[t].startTime=e),n.playbackActivities[t].endTime>n.getMediaDuration()&&(n.playbackActivities[t].endTime=n.getMediaDuration()),e=n.playbackActivities[t].endTime},this.endFlush=function(e){n._addCurrentPlaybackActivityIfValid(),n.playbackActivities&&n.playbackActivities.length>0&&n.transformPlaybackActivities(),n.loggingService.appLogic("MediaAnalytics",n.prepareSchema(e)),n.playbackActivities=[]},this.flushTelemetry=function(e){var t;return void 0===e&&(e=!1),!e&&n.playbackActivities.length<n.bufferLength-1&&n.userPlayPauseActionCounts<n.thresholdUserActionCount?0:(n._addCurrentPlaybackActivityIfValid(),(null===(t=n.playbackActivities)||void 0===t?void 0:t.length)>0?(n.sendMediaAnalytics(),n.playbackActivities=[],1):0)},this.resetMetrics=function(){n.playbackTimer.reset(),n.updateUserActionCount()},this.updateUserActionCount=function(){n.userPlayPauseActionCounts>=n.thresholdUserActionCount&&(n.thresholdUserActionCount*=2),n.userPlayPauseActionCounts=0};var a=e.loggingService,i=e.options,r=e.playIntervalsGetter,o=e.player,c=e.settingsStore;this.loggingService=a,this.playbackTimer=new qt,this.options=i,this.playIntervalsGetter=r,this.player=o,this.signalSequenceNumber=1,this.isPlaybackActivityFixEnabled=Object(s.e)(null==c?void 0:c.getSettingObject("enablePlaybackActivitiesFormationFix","boolean")),this.isForcedEndSignalEnabled=Object(s.e)(null==c?void 0:c.getSettingObject("isForcedMediaAnalyticsEndSignalEnabled","boolean"));var d=null!==(t=null==i?void 0:i.isNextGenEngineEnabled)&&void 0!==t&&t,l=Object(s.e)(null==c?void 0:c.getSettingObject("isShakaBasedActivityFormationEnabled","boolean"));try{this.useNewPlaybackActivityBuilder=d&&l&&void 0!==this.player,this.useNewPlaybackActivityBuilder&&this.player&&(this.playbackActivitiesBuilder=new Yt(this.currentPlaybackTimeFetcher,this.triggerSignalSend),this.engineAnalyticsAdaptor=new Qt(this.player,this.playbackActivitiesBuilder.receivePlaybackEvent),this.engineAnalyticsAdaptor.listenToEngineEvents()===Rt.Failure&&(this.useNewPlaybackActivityBuilder=!1))}catch(e){this.useNewPlaybackActivityBuilder=!1}this.isEventTraceLoggingEnabled=this.useNewPlaybackActivityBuilder&&Object(s.e)(null==c?void 0:c.getSettingObject("isMediaAnalyticsEventTraceLoggingEnabled","boolean")),this.playbackTimer.start(),this.playbackTimer._pulse.subscribe(function(e){n.useNewPlaybackActivityBuilder?n.triggerSignalSend():(n.populateNewPlaybackActivities(),1===n.flushTelemetry(!0)&&n.resetMetrics())})},Xt=n(264),Zt={AadClientId:"",AadInstance:"",AadResourceId:"",EnableMockApiGateway:!1,AzureMediaPlayerVersion:"",PlayerMaxLogLines:0,PlayerLiveInitTimeInMS:0,TenantServiceApiVersion:"",TenantServiceUri:"",LocalyticsConfiguration:{instrumentationKey:""},BuildNumber:"",RingNumber:"",ClusterName:"",StaticContentLocation:"",StaticContentLocations:[],StaticContentContainer:"",MaxStaticContentRetries:0,HowToVideosUri:"",PartnerBinariesUri:"",SDNNamesWithVersions:"",WirecastDownloadUri:"",EnabledEncoders:"",FeatureFlags:"",ECSConfiguration:{},PetrolApiEndpoint:"https://petrol.office.microsoft.com/v1",IsDevelopmentMode:!0,SupportedLanguages:["en","ar","eu","bg","ca","zh-hans","zh-hant","hr","cs","da","nl","et","fi","fr","gl","de","el","he","hi","hu","id","it","ja","kk","ko","lv","lt","ms","nb","pl","pt-br","pt-pt","ro","ru","sr-cyrl-rs","sr-latn-rs","sk","sl","es","sv","th","tr","uk","vi"],RTLLanguages:["ar","he"],StreamTrialServicePlan:"",PlaybackLoadTimeThreshold:2e4,PlaybackBufferCountThreshold:3,PlaybackFailedDownloadCountThreshold:2,PreloadBrowsersWithOS:"",StreamWebAriaConfiguration:{IngestionKey:"",OverrideEndpointUrl:""},PrivacyScrubbingConfiguration:{UrlTypesForScrubbing:[{urlPathRegex:/\/transform\/videomanifest/gi,replaceByUrlType:"MetaManifestUrl"},{urlPathRegex:/\/transform\/videotranscode/gi,replaceByUrlType:"MetaTranscodeUrl"},{urlPathRegex:/.*\/drives\/.*\/items\/.*/gi,replaceByUrlType:"DocIdUrl"},{urlPathRegex:/.*\/files\/.*\/@ms\/stream-bundle\/chunks\/.*\.js/gi,fallbackScrubber:!0}],DropEventNames:[],EventFieldsDictionary:{PlayerEngineHeartbeat:{regexCheck:{RegEx:/fallback\d+_(message|rawData)/,Strategy:Xt.e.scrubUrls}}},GlobalFieldsDictionary:{url:Xt.e.scrub,pageUrl:Xt.e.scrub,domain:Xt.e.scrub,trafficReferrer:Xt.e.scrub,hostApp:Xt.e.scrubOrAnyGuid,viewContext:[{FullPath:"viewContext.url",Strategy:Xt.e.scrub}],message:Xt.e.scrubUrls,rawData:Xt.e.scrubUrls,stack:Xt.e.scrubUrls},PassThroughTokens:["compliance center","directembedpage","exchange","fastoneupfileviewer","item-viewer demo app","mediata service","office","onedrive","onenote","oneupfileviewer","outlook","power bi","sandbox","sharepoint","sharepointfileviewer","stream","streamplaylist","streamwebapp","teams","yammer","wechat","forms","videoloopcomponent","powerpoint","word","excel","connectandperspectives"],ScrubQueryParametersHostNames:["microsoftstream.com","microsoftstream.us","stream.azure-test.net","hos-barcelonaportal-1-1.cloudapp.net","svc.ms"],ScrubToPartialHostNames:["sharepoint.com","sharepoint-df.com","teams.microsoft.com","signup.microsoft.com","learn.microsoft.com","microsoft.com","hubblecontent.osi.office.net","sway.office.com","streamrecommendation.delve.office.com","streamrecommendation.office.com","delve.office.com","forms.office.com","tasks.office.com","outlook.office.com","outlook-sdf.office.com","office.com","yammer.com","onenote.officeapps.live.com","powerpoint.officeapps.live.com","officeapps.live.com","botframework.com"],UriQueryParameters:{PassThroughQueryParameters:["adminmode","appcorrelation","appplatform","autoplay","browseback","channelid","mode","displaymode","entrypoint","hasplayed","isinadminmode","isindevmode","isinvideotrimmode","nosignupcheck","popular","privacy","recommendationver","refid","showdescription","showheader","showscreenrecorder","signout","sort","srcscreen","st","top","uploadstatus","vid","videoid","videoispublished","videoprivacy"],ScrubQueryParameters:{hostApp:{type:Xt.t.stringOrAnyGuid,acceptedValues:[]},reftype:{type:Xt.t.string,acceptedValues:["emailtrialalmostover","emailtrialcomplete","emailportalvideoready","emailteamscreatorvideoready","emailteamsattendeevideoready","emailvideoerror","emailshared"]},view:{type:Xt.t.string,acceptedValues:["video","channel","people","highlights","videos","channels","membership","userchannels","uservideos","administrators","spotlightvideos","companypolicies","usagedetails","group","support","comments","facedetection","forgottenusers","personaldata","contentcreation","streamaccess","liveevents","networkcaching","recyclebin","browsechannels","groupchannels","browsegroups","browsevideos","grouphome","groupvideos","groupprincipals"]}}}},OfficeVideoGLSApiVersion:"",OfficeVideoGLSUri:"",AriaConfiguration:{IngestionKey:"",OverrideEndpointUrl:""},TenantFilterEnabled:!1,TenantFilterRedirectUrl:"",AllowedTenants:[],DisallowedTenants:[]},$t=n(1108),en=n(3346),tn=n(57),nn=n(1760),an=n(790),rn=function(){function e(t){var n=t.defaultLocale,a=t.loader,i=t.pseudo,r=void 0!==i&&i;this.defaultLocale=this.isValidLocale(n)&&n.toLowerCase()||e.DEFAULT_LOCALE,this.locale=new v.e(void 0),this.isDefaultLoaded=!1,this.localizedStringsProvider=new en.e({defaultLang:e.convertToStreamCultureName(this.defaultLocale),rootElement:document.documentElement,loadDefaultStringsAsync:function(){return a("langRes",function(){return Object(an.n)(an.e)})},loadNonDefaultLangAsync:function(e){return a("langRes",function(){return Object(an.n)(e)})},pseudo:r})}return e.prototype.setLocale=function(t){return Object(a.t)(this,void 0,void 0,function(){var n;return Object(a.i)(this,function(a){switch(a.label){case 0:return this.isDefaultLoaded?[3,2]:[4,this.localizedStringsProvider.waitDefaultResourcesLoad()];case 1:a.sent(),this.isDefaultLoaded=!0,t||(this.locale.value=this.defaultLocale),a.label=2;case 2:return t&&this.locale.value!==t?(n=t,this.isValidLang(t)||(n=e.convertToStreamCultureName(t),this.isValidLang(n))?[4,this.localizedStringsProvider.setLanguage(n)]:(this.locale.value=this.defaultLocale,[2])):[3,4];case 3:a.sent(),this.locale.value=t,a.label=4;case 4:return[2]}})})},e.prototype.getLanguage=function(){return this.locale.value&&this.isValidLang(this.locale.value)?this.locale.value:e.convertToStreamCultureName(this.locale.value)},e.prototype.getString=function(e){if(void 0===this.locale.value)throw new Error(Object(_.n)("getString() is called before resources are loaded"));return this.localizedStringsProvider.getString(e)},e.prototype.loadResources=function(){return Object(a.t)(this,void 0,void 0,function(){return Object(a.i)(this,function(e){return[2,Promise.resolve()]})})},e.convertToStreamCultureName=function(e){return void 0===e&&(e=""),Object(tn.e)(e)},e.prototype.isValidLocale=function(t){return!!t&&!!e.convertToStreamCultureName(t)},e.prototype.isValidLang=function(e){return!!e&&-1!==Object.keys(nn.e).indexOf(e)},e.DEFAULT_LOCALE="en-us",e}(),on=n(1120),sn=function(){function e(e){this._ignoreNewData=!1,this._savedToLocalStorage=!1,this._recordedEvents=[],this._keyToEventNameMap=new Map,this._playbackSessionId=e}return e.prototype.analyzeStartQos=function(e,t){this._ignoreNewData||this._keyToEventNameMap.set(t,e)},e.prototype.analyzeEndQos=function(e,t,n,a){if(!this._ignoreNewData){var i=this._keyToEventNameMap.get(e);i&&this.analyzeCompletedQos(i,t,n,a)}},e.prototype.analyzeCompletedQos=function(e,t,n,a){if(!(this._ignoreNewData||n<10))return"PlayerReportingEndQos"===e&&"TimeToLoad"===t?(this._ttlMs=n,void(this._ignoreNewData=!0)):void this._recordedEvents.push({eventName:e,name:t,durationMs:n,backendRequestDuration:a})},e.prototype.getPerformanceSessions=function(){var e=[];if(!this._savedToLocalStorage){var t=this.getCurrentPerformanceSession();t&&e.push(t)}var n=Object(on.e)();return e.push.apply(e,n),e},e.prototype.saveToLocalStorage=function(){Object(on.t)(this.getPerformanceSessions()),this._savedToLocalStorage=!0},e.prototype.getCurrentPerformanceSession=function(){if(void 0!==this._ttlMs)return{playbackSessionId:this._playbackSessionId,ttlMs:this._ttlMs,recordedEvents:this._recordedEvents,calculatedEvents:[],calculatedEventMap:{}}},e}(),cn=function(){function e(e,t){void 0===t&&(t="OnePlayer");var r,c,d,v,y,S,D,I=this;this.options=e,this.longSessionTimeout=-1,this.failSession=!1,this.isOneDSEUDBOverrideEnabled=!1,this.initialize=function(){return Object(a.t)(I,void 0,void 0,function(){return Object(a.i)(this,function(e){return this.isOneDSEUDBOverrideEnabled&&this.failSession?[2,this.onePlayer.showErrorBoxWithoutInit()]:[2,this.onePlayer.initialize(this.dataLayer,this.getPluginsToLoad())]})})},this.renderVideo=function(){return Object(a.t)(I,void 0,void 0,function(){var e,t,n,i,r,o,c,d,l,u,f=this;return Object(a.i)(this,function(p){switch(p.label){case 0:return Object(s.e)(this.settingsStore.getSettingObject("isShowWarningMessageBarToUnauthorizedOrExternalUsersEnable","boolean"))&&this.showWarningMessageBarToUnauthorizedOrExternalUsers(),Object(s.e)(this.settingsStore.getSettingObject("isLongSessionWarningMessageBarEnabled","boolean"))&&"StreamWebApp"===(null===(d=this.options.hostContext)||void 0===d?void 0:d.app)&&(this.longSessionTimeout=window.setTimeout(function(){f.showLongSessionWarningMessageBar()},108e5)),e=(null===(l=this.settingsStore.getSettingObject("maxBufferInSec","number"))||void 0===l?void 0:l.value)||0,n=null===(u=this.options.mediaServiceContext)||void 0===u?void 0:u.isTeamsMeetingRecording,e>0?void 0===n?[3,1]:(i=this.getMaxBufferInSec(this.options,n),[3,3]):[3,4];case 1:return[4,this.getMaxBufferInSecAsync()];case 2:i=p.sent(),p.label=3;case 3:t=i,p.label=4;case 4:return void 0===n?[3,5]:(o=this.shouldShowPlaybackSpeed(n),[3,7]);case 5:return[4,this.shouldShowPlaybackSpeedAsync()];case 6:o=p.sent(),p.label=7;case 7:return r=o,c=Object(a.e)({shouldShowPlaybackSpeed:r,shouldShowPopOutButton:this.shouldShowPopOutButton(),shouldShowThumbnailBase64:this.shouldShowThumbnailBase64(),maxVideoBufferSec:t},this.getCustomRenderOptions()),[4,this.onePlayer.renderVideo(c)];case 8:return p.sent(),this.performanceVisualizerDataCollector&&this.performanceVisualizerDataCollector.saveToLocalStorage(),[2]}})})},this.unload=function(){I.loggingService&&I.loggingService.logAppExited(!1),I.isMediaAnalyticsEnabled&&I.mediaAnalytics.dispose(),I.onePlayer.unload(),I.developerToolsPluginCleanup&&I.developerToolsPluginCleanup(),I.settingStoreSubscriptionTokens.forEach(function(e){I.settingsStore.unsubscribe(e)}),clearTimeout(I.longSessionTimeout)},this.shouldShowPopOutButton=function(){if(I.options.hostContext){if("OneUpMicroservice"===I.options.hostContext.integrationType)return Object(s.e)(I.settingsStore.getSettingObject("isPopOutButtonForEmbedMicroserviceEnabled","boolean"));if(Object(s.e)(I.settingsStore.getSettingObject("isPopOutButtonForProfileVideoDisabled","boolean"))&&"394866fc-eedb-4f01-8536-3ff84b16be2a"===I.options.hostContext.app)return!1;if("StreamWebApp"===I.options.hostContext.app)return!1;var e=I.options.isEnvInGovCloud(),t=Object(s.e)(I.settingsStore.getSettingObject("isNewStreamEnabledGovCloud","boolean")),n=!0;return Object(s.e)(I.settingsStore.getSettingObject("isGovCloudFeatureFlowEnable","boolean"))&&(n=!e||t),!(!Object(s.e)(I.settingsStore.getSettingObject("60658","boolean"))||!n)||"OneUp"!==I.options.hostContext.integrationType}},this.shouldShowThumbnailBase64=function(){return Object(s.e)(I.settingsStore.getSettingObject("isThumbnailBase64Enabled","boolean"))},this.getMaxBufferInSecAsync=function(){return Object(a.t)(I,void 0,void 0,function(){var e;return Object(a.i)(this,function(t){switch(t.label){case 0:return[4,this.delayLoadedMetadataPromise];case 1:return t.sent(),e=this.telemetryContext.mediaContext&&this.telemetryContext.mediaContext.contentType,[2,this.getMaxBufferInSec(this.options,"Meeting"===e)]}})})},this.shouldShowPlaybackSpeedAsync=function(){return Object(a.t)(I,void 0,void 0,function(){var e;return Object(a.i)(this,function(t){switch(t.label){case 0:return[4,this.delayLoadedMetadataPromise];case 1:return t.sent(),e=this.telemetryContext.mediaContext&&this.telemetryContext.mediaContext.contentType,[2,this.shouldShowPlaybackSpeed("Meeting"===e)]}})})},this.shouldResetDisableFeedbackOption=function(e){var t;return!e||!((null===(t=I.settingsStore.getSettingObject("disableFeedbackAllowedHosts","string[]"))||void 0===t?void 0:t.value)||[]).includes(e)},this.onKeyDown=function(e){"F12"===e.key&&e.ctrlKey&&(I.onePlayer.registerPlugin(I.getDeveloperToolsPluginToLoad()).catch(function(){I.onePlayer.log.warn("PluginError",Object(_.n)("Failed to register Developer Tools plugin"),{name:"RegistrationFeatureFlagInvalid",isExpected:!1,pluginName:zt.e.name,pluginVersion:zt.e.version})}),I.onePlayer.log.appLogic("PlayerAppLogic",{name:"ActivateDeveloperToolsHotkey"}),I.developerToolsPluginCleanup&&I.developerToolsPluginCleanup(),I.developerToolsPluginCleanup=void 0)},this.onAppLogicEvent=function(e,t){var n,a=!1;"PlayerSessionSummary"!==e&&"PluginSessionSummary"!==e||(a=!0),null===(n=I.loggingService)||void 0===n||n.appLogicThin(e,t,a)},this.onWarningEvent=function(e,t,n){var i;null===(i=I.loggingService)||void 0===i||i.warnThin(e,Object(a.e)(Object(a.e)({},n),{result:"Warning",message:t.message||Object(_.n)(h.t.Missing),stack:t.stack||h.a.Missing}))},this.onFatalErrorEvent=function(e,t,n){var i;null===(i=I.loggingService)||void 0===i||i.fatalThin(e,Object(a.e)(Object(a.e)({},n),{result:"Fatal",message:t.message||Object(_.n)(h.t.Missing),stack:t.stack||h.a.Missing}))},this.onUserActionEvent=function(e,t){var n;!I.isMediaAnalyticsEnabled||"PlayerPlayPauseAction"!==e||"Play"!==t.name&&"Pause"!==t.name||I.mediaAnalytics.onUserActionEvent(t),null===(n=I.loggingService)||void 0===n||n.userActionThin(e,t)},this.onStartQos=function(e,t,n){var a;return n&&(a=I.loggingService.registerEarlyStartPerformance(e,n,{name:t})),a=I.loggingService.startUniquePerformance(e,{name:t}),I.performanceVisualizerDataCollector&&I.performanceVisualizerDataCollector.analyzeStartQos(e,a),a},this.onEndQos=function(e,t,n,i){var r,o=Object(a.e)(Object(a.e)({},t),n),s=null===(r=I.loggingService)||void 0===r?void 0:r.endPerformance(e,o,void 0,i);if(I.performanceVisualizerDataCollector&&s&&I.performanceVisualizerDataCollector.analyzeEndQos(e,t.name,s.endTimeMs-s.startTimeMs,t.backendRequestDuration),void 0!==s)return s},this.onCompletedQos=function(e,t,n,i){var r,o=Object(a.e)(Object(a.e)({},i),n);null===(r=I.loggingService)||void 0===r||r.registerCompletedPerformance(e,t,o),I.performanceVisualizerDataCollector&&I.performanceVisualizerDataCollector.analyzeCompletedQos(e,i.name,t.duration,i.backendRequestDuration)},this.getPluginsToLoad=function(){for(var e=[],t=0,n=I.getRegisteredPlugins();t<n.length;t++){var a=n[t];if(Object(s.e)(I.settingsStore.getSettingObject(a.settingName,"boolean"))){var i=a.manifest.getPluginInstanceFactory(I.dataLayer.metadata),r=a.manifest.getIsPluginEnabled?a.manifest.getIsPluginEnabled(I.dataLayer.metadata):void 0,o={manifest:a.manifest,instanceFactory:i,isEnabled:r};e.push(o)}}return I.shouldLoadDeveloperToolsPlugin&&e.push(I.getDeveloperToolsPluginToLoad()),e},this.getDeveloperToolsPluginToLoad=function(){return{manifest:zt.e,instanceFactory:zt.e.getPluginInstanceFactory(I.dataLayer.metadata,{triggerFatalError:function(e){I.onePlayer.showErrorBox(e)},isDevKustoDb:Zt.StreamWebAriaConfiguration.IngestionKey===g.e,playerConfigurationOptions:I.playerConfigurationOptions,getPerformanceSessionsForVisualizer:function(){var e;return null===(e=I.performanceVisualizerDataCollector)||void 0===e?void 0:e.getPerformanceSessions()}})}},this.initializeTelemetry=function(e,t,n,i,r){var c,d,u,m,_=I.getPlaybackSessionId(e),h=Object($t.a)(e.userContext,_);Object(s.e)(I.settingsStore.getSettingObject("isHelpingReportIssueEnabled","boolean"))&&e.userContext&&(e.userContext.principalId=h.UserClaim.UserInfo.UniqueId);var g,v=Object(a.e)(Object(a.e)({},function(e){return{standardContext:(n=e.standard,{userId:n.userId||o.e,puid:n.puid||o.e,accountType:n.accountType||"Unknown",tenantId:n.tenantId||o.e,resourceTenantId:n.resourceTenantId,component:n.component,platform:n.platform,version:n.version,language:n.language||"en-US",schemaVer:p.schemaVersion}),mediaContext:e.media,expContext:e.exp,hostContext:e.host&&(t=e.host,{hostApp:t.app,hostPlatform:t.platform,hostView:t.view,hostComponent:t.component,hostMode:t.mode,hostIntegrationType:t.integrationType,hostSessionId:t.sessionId||o.e,hostCorrelationId:t.correlationId||o.e,hostVersion:o.e,hostExtraTelemetry:t.extraTelemetry,hostReferralApp:t.referralApp,hostReferralAppPlatform:t.referralAppPlatform,hostReferralView:t.referralView,hostReferralMode:t.referralMode,hostReferralPlaybackSessionId:t.referralPlaybackSessionId,hostReferralEntryIndex:t.referralEntryIndex})};var t,n}({standard:Object(a.e)({puid:h.UserClaim.UserInfo.UniqueId,component:"OnePlayer",platform:"Web",version:jt.e},e.userContext),media:I.getMediaContext(e),host:e.hostContext,exp:n})),{onePlayerContext:dn(e,_)}),y=null===(c=r.getSettingObject("ingestionKeyOverride","string"))||void 0===c?void 0:c.value,S=!1;I.isOneDSEUDBOverrideEnabled&&I.options.userContext&&"Business"===I.options.userContext.accountType&&!I.options.oneDsEndPointOverride&&(I.options.oneDsEndPointOverride=null===(d=r.getSettingObject("OneDSEndpointOverride","string"))||void 0===d?void 0:d.value,I.options.oneDsEndPointOverride&&(null===(m=null===(u=e.flightingContext)||void 0===u?void 0:u.filters)||void 0===m?void 0:m.aadTenantId)||(I.failSession=!0,S=!0)),g=S?I.getNullLogger():Object(b.e)({stream:v},t,h,jt.e,_,e.startedPerfMarks.OnePlayerStart,{msOnePlayerUnload:I.unload},!0,Object(l.e)(),""===y?void 0:y,e.oneDsEndPointOverride);for(var D=0,x=i;D<x.length;D++)(0,x[D])(g);var C=r.subscribe(f.e.UsedFlightsUpdated,function(e,t){g.setFlightsUsed(t)}),O=r.subscribe(f.e.UnusedFlightsUpdated,function(e,t){g.setFlightsUnused(t)}),w=r.subscribe(f.e.FlightOverrideOccurred,function(e){g.setFlightsOverridden()});return I.settingStoreSubscriptionTokens=[C,O,w],(window._pageTimings||(window._pageTimings={})).buildNumber=jt.e,{loggingService:g,telemetryContext:v,userSessionInfo:h}},this.showReportIssueDelayedButton=function(e,t){return Object(a.t)(I,void 0,void 0,function(){var i,r,o,s,c,d,l,f,p,_=this;return Object(a.i)(this,function(a){switch(a.label){case 0:i=e.getString("ReportAnIssueBtnTxt"),r={name:"LoadReportIssueButton",backendName:"OCV"},o=this.onePlayer.log.startQos("PlayerEndQos",r),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.dataLayer.metadata.getSurveyAdminSettings()];case 2:return s=a.sent(),o.end(),[3,4];case 3:return c=a.sent(),d=Object(u.t)(c),l=!(!c.statusCode||!Object(m.a)(c.statusCode.toString()))||c.message&&c.message.indexOf("The user aborted a request")>=0,d.isExpected=l,l?o.endExpectedError("Fatal",d):o.endUnexpectedError("Fatal",d),[2,null];case 4:return f={name:"ReportIssueSettingRequested",message:JSON.stringify(s)},this.onePlayer.log.appLogic("PlayerAppLogic",f),s&&s.enableFeebackCollection?(p=Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(602)]).then(n.bind(null,3583)),[2,{label:i,clicked:function(){_.onePlayer.log.userAction("PlayerButtonAction",{name:"ReportIssueButton",playbackTimeSec:-1,actionType:"LeftClick"}),_.showReportIssue(e,p,t).catch(function(){})}}]):[2,null]}})})},this.showReportIssue=function(e,t,n){return Object(a.t)(I,void 0,void 0,function(){var i,r;return Object(a.i)(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),void 0!==this.reportIssueComponent?[3,2]:[4,t];case 1:i=a.sent(),this.reportIssueComponent=new i.ReportIssueComponent(this.onePlayer.uiConfiguration.videoEngineContainer,this.onePlayer.player.currentTimeInSeconds,this.onePlayer.log,this.loggingService,this.dataLayer.metadata,this.settingsStore,e,n),a.label=2;case 2:return this.reportIssueComponent.render(),[3,4];case 3:return r=a.sent(),this.onePlayer.log.fatal("ConfigurationError",r,{name:"ErrorBoxReportIssue.RenderComponent",isExpected:!1}),[3,4];case 4:return[2]}})})},this.showWarningMessageBarToUnauthorizedOrExternalUsers=function(){I.options.hostContext&&"StreamWebApp"===I.options.hostContext.app&&I.isAnonymousOrExternalUser()&&I.onePlayer.showMessageBar("UnauthenticatedUserAttemptPlayback","UnauthenticatedUserPlayerWarning",{text:"UnauthenticatedUserPlayerWarning.Link",href:"https://go.microsoft.com/fwlink/?linkid=2196188",dismissMessageOnInteraction:!0})},this.showLongSessionWarningMessageBar=function(){var e={text:"LongSessionUserWarning.Link",dismissMessageOnInteraction:!0,onClick:function(){var e;I.onePlayer.log.userAction("PlayerButtonAction",{name:"ReloadPageLinkClick",playbackTimeSec:null!==(e=I.onePlayer.player.currentTimeInSeconds.value)&&void 0!==e?e:-1,actionType:"LeftClick"}),window.location.reload()}};I.onePlayer.showMessageBar("LongSessionUserWarning","LongSessionUserWarning",e)},this.isAnonymousOrExternalUser=function(){var e,t,n;return void 0!==I.dataLayer.metadata&&I.dataLayer.metadata.userContext&&(void 0===(null===(e=I.dataLayer.metadata.userContext.value)||void 0===e?void 0:e.principalId)||"mis"===(null===(t=I.dataLayer.metadata.userContext.value)||void 0===t?void 0:t.principalId)||""===(null===(n=I.dataLayer.metadata.userContext.value)||void 0===n?void 0:n.principalId))},this.getNullLogger=function(){return{PrivacyScrubber:void 0,setupPrivacyScrubber:function(){},setupLogger:function(){},getIsDevelopmentMode:function(){return!1},getClassicStreamContextsDeepCopy:function(){},setClassicStreamContexts:function(){},getStreamContextsDeepCopy:function(){},setStreamContexts:function(){},setFlightsUsed:function(){},setFlightsUnused:function(){},setFlightsOverridden:function(){},legacy:function(){},registerEarlyStartPerformance:function(){return"registerEarlyStartPerformance"},startPerformance:function(){return"startPerformance"},startUniquePerformance:function(){return"startUniquePerformance"},endPerformance:function(){},registerCompletedPerformance:function(){return"registerCompletedPerformance"},debug:function(){},userSignedIn:function(){},logAppExited:function(){},userSignedOut:function(){},appLogicThin:function(){},userActionThin:function(){},fatalThin:function(){},warnThin:function(){},traceThin:function(){return"traceThin"},scrubErrorMessage:function(){return"scrubErrorMessage"}}};try{var x=this.getPortalConfig(e),C=[],O=e.hostSettingsProviders||[],w=Object(Kt.e)(function(){return I.loggingService}.bind(this),C),E=Object(Kt.n)(e.isDevMode,Object(Kt.t)(w),O),A=E.settingsStore,L=E.isDeveloperToolsPluginEnabled,k=E.isDeveloperToolsHotkeyEnabled;this.settingsStore=A,this.settingsStore.getSettingObject("1995","boolean"),this.settingsStore.getSettingObject("60634","boolean"),this.settingsStore.getSettingObject("60702","boolean"),this.settingsStore.getSettingObject("60486","boolean"),this.settingsStore.getSettingObject("90028","number"),this.settingsStore.getSettingObject("60565","boolean"),this.settingsStore.getSettingObject("60846","boolean"),this.settingsStore.getSettingObject("60847","boolean"),this.settingsStore.getSettingObject("60189","boolean"),this.settingsStore.getSettingObject("90134","number"),this.settingsStore.getSettingObject("90135","number"),this.settingsStore.getSettingObject("90136","number"),this.settingsStore.getSettingObject("60834","boolean"),this.settingsStore.getSettingObject("90132","number"),this.settingsStore.getSettingObject("60912","boolean"),this.settingsStore.getSettingObject("90149","number"),this.settingsStore.getSettingObject("1264","boolean"),this.settingsStore.getSettingObject("1451","boolean"),this.settingsStore.getSettingObject("90156","number"),this.settingsStore.getSettingObject("1295","number"),this.settingsStore.getSettingObject("90118","number"),this.isOneDSEUDBOverrideEnabled=Object(s.e)(this.settingsStore.getSettingObject("isOneDSEUDBOverrideEnabled","boolean")),!Object(s.e)(this.settingsStore.getSettingObject("isRegexFieldAddedToConfigurationEnabled","boolean"))&&"PlayerEngineHeartbeat"in x.PrivacyScrubbingConfiguration.EventFieldsDictionary&&delete x.PrivacyScrubbingConfiguration.EventFieldsDictionary.PlayerEngineHeartbeat,x.PrivacyScrubbingConfiguration.Killswitches={redactResponseData:Object(s.e)(this.settingsStore.getSettingObject("isResponseDataRedactedEnabled","boolean")),redactFilePaths:Object(s.e)(this.settingsStore.getSettingObject("isRedactFilePathsEnabled","boolean"))};var M=Object(s.e)(this.settingsStore.getSettingObject("isOptimizedWebVideoLocalizationEnabled","boolean"));(Object(s.e)(this.settingsStore.getSettingObject("isStreamUriScrubberEnabled","boolean"))||Object(s.e)(this.settingsStore.getSettingObject("60360","boolean")))&&(x.PrivacyScrubbingConfiguration.UriScrubberType="Stream"),e.isNextGenEngineEnabled=Object(Kt.i)(this.settingsStore,null===(r=this.options.hostContext)||void 0===r?void 0:r.integrationType,this.options.playbackSourceProvider),e.isNextGenEngineEnabled||void 0===e.playbackSourceProvider||(e.getPlaybackUrls=function(e){var t=this;return function(){return Object(a.t)(t,void 0,void 0,function(){var t,n,i,r,o;return Object(a.i)(this,function(a){switch(a.label){case 0:return[4,e.getPlaybackSources()];case 1:t=a.sent(),n={},i=0,a.label=2;case 2:return i<t.length?[4,(r=t[i]).urls]:[3,5];case 3:if(!(o=a.sent()))return[3,4];switch(r.playbackFormat){case"DASH":n.dashUrl=o;break;case"HLS":n.hlsUrl=o;break;case"PROGRESSIVE":n.progressiveUrl=o}a.label=4;case 4:return i++,[3,2];case 5:return[2,n]}})})}}(e.playbackSourceProvider));var P=this.initializeTelemetry(e,x,function(e,t){var n=e.flightingContext,a="",i="",r="",s="",c=!1;return n&&(a=n.ring||o.e,r=n.flightSessionId||o.e,s=n.eTag||o.e,c=!!n.flightDataIsFromCache,n.filters)&&(i=JSON.stringify({currentCultureName:n.filters.currentCultureName})),{ring:a,flightFilters:i,flightsUsed:t.getUsedFlights(),flightsUnused:t.getUnusedFlights(),providers:t.getSettingsProviders().map(function(e){return e.id}).join(","),flightCacheSessionId:r,eTag:s,flightDataIsFromCache:c}}(e,A),C,A),T=P.loggingService,U=P.telemetryContext,F=P.userSessionInfo;this.telemetryContext=U,this.addDebugInfo(U),this.loggingService=T,this.delayLoadedMetadataPromise=e.getDelayLoadedMetadata().then(function(e){var t;return I.telemetryContext.mediaContext=I.getMediaContext(I.options,e),null===(t=I.loggingService)||void 0===t||t.setStreamContexts(U),e}),e.getPlaybackUrls&&(e.getPlaybackUrls=this.decoratePlaybackUrlsCallback(e.getPlaybackUrls,U.onePlayerContext.playbackSessionId,this.delayLoadedMetadataPromise,e.isPrefetchProgressiveEnabled));var H={loggingService:this.loggingService,portalConfiguration:x,userSessionInfo:F,viewContext:t};if(e.sessionData={userSessionId:H.userSessionInfo.SessionId,clientSessionId:U.onePlayerContext.playbackSessionId},void 0===e.telemetryCallbacks&&(e.telemetryCallbacks=[]),e.telemetryCallbacks.push({onAppLogic:this.onAppLogicEvent,onWarning:this.onWarningEvent,onFatalError:this.onFatalErrorEvent,onUserAction:this.onUserActionEvent,onStartQos:this.onStartQos,onEndQos:this.onEndQos,onCompletedQos:this.onCompletedQos}),Object(s.e)(this.settingsStore.getSettingObject("isAllowStreamWebAppToHideBrandingEnabled","boolean"))&&("Stream"!==(null===(c=e.hostContext)||void 0===c?void 0:c.app)||e.overlayBranding?""===e.overlayBranding&&(e.overlayBranding=void 0):e.overlayBranding=""),(null===(d=e.uiOptions)||void 0===d?void 0:d.disableFeedback)&&this.shouldResetDisableFeedbackOption(null===(v=e.hostContext)||void 0===v?void 0:v.app)&&(e.uiOptions.disableFeedback=!1),this.playerConfigurationOptions=e,L&&Object(i.n)()&&this.applyPlayerConfigurationOverridesFromLocalStorage(e),this.initializeEngineHeuristic(e),e.getDownloadRequestParametersAsync&&(e.getDownloadRequestParametersAsync=this.decorateDownloadRequestParametersCallback(e.getDownloadRequestParametersAsync)),Object(s.e)(A.getSettingObject("isPerformanceVisualizerToolEnabled","boolean"))&&(this.performanceVisualizerDataCollector=new sn(U.onePlayerContext.playbackSessionId)),Object(s.e)(A.getSettingObject("isDiagnosticToolEnabled","boolean"))&&(e.diagnosticToolProvider=function(e,t,n){return I.getDiagnosticTool(e,t,n)}),Object(s.e)(A.getSettingObject("isPopOutReferralTelemetryEnabled","boolean"))){var R=null===(y=e.itemMetadata)||void 0===y?void 0:y.itemUrl;if(e.itemMetadata&&R){var N=(null===(S=e.hostContext)||void 0===S?void 0:S.app)||"mis",B="PopOut.mis."+((null===(D=e.sessionData)||void 0===D?void 0:D.clientSessionId)||"mis"),j=new URL(R),V=j.searchParams;V.has("referrer")||V.append("referrer",N),V.has("referrerScenario")||V.append("referrerScenario",B),e.itemMetadata.popOutButtonItemUrlQueryStringProperties=j.toString()}}if(this.onePlayer=new Bt(e,H,function(e,t){return M?new an.t({loader:e,locale:t}):new rn({defaultLocale:"en-us",loader:e,pseudo:!1})},this.settingsStore,this.getUiConfiguration(),Object(s.e)(this.settingsStore.getSettingObject("isReportIssueErrorBoxEnable","boolean"))?this.showReportIssueDelayedButton:void 0),this.failSession&&this.isOneDSEUDBOverrideEnabled)return;this.ui={hideNavigationPanel:this.onePlayer.hideNavigationPanel,navigationPanelShown:this.onePlayer.navigationPanelShown},this.player=this.onePlayer.player,this.dataLayer=this.getDataLayer(e,U,this.delayLoadedMetadataPromise,this.onePlayer.log,this.settingsStore),this.delayLoadedMetadataPromise.catch(function(e){I.onePlayer.log.fatal("ConfigurationError",e,{name:"getDelayLoadedMetadata",isExpected:!1})});var z=Object(s.e)(A.getSettingObject("isMediaAnalyticsSignalEnabled","boolean"))||Object(s.e)(this.settingsStore.getSettingObject("1122","boolean"));this.isMediaAnalyticsEnabled=z&&e.userContext&&"Business"===e.userContext.accountType,this.isMediaAnalyticsEnabled&&(this.mediaAnalytics=new Jt({loggingService:this.onePlayer.log,options:e,playIntervalsGetter:this.onePlayer.player.getPlayIntervals,player:this.player,settingsStore:this.settingsStore}));var G=this.onePlayer.log.startQos("PluginEndQos",{pluginName:zt.e.name,pluginVersion:zt.e.version,name:"DetermineDeveloperToolsLoadMode"});try{this.shouldLoadDeveloperToolsPlugin=L||k&&Object(Gt.e)(),!1===this.shouldLoadDeveloperToolsPlugin&&k&&(e.container.addEventListener("keydown",function(e){return I.onKeyDown(e)}),this.developerToolsPluginCleanup=function(){e.container.removeEventListener("keydown",function(e){return I.onKeyDown(e)})}),G.end()}catch(e){G.endUnexpectedError("Warning",e)}}catch(e){this.loggingService&&(this.loggingService.debug("msOnePlayer.ctor thrown unexpected error.",JSON.stringify(e)),this.onFatalErrorEvent("PlayerError",e,{name:"MSOnePlayerInitFailed",isExpected:!1,codeLocation:"MsOnePlayer.ctor()"}))}}return Object.defineProperty(e.prototype,"videoElement",{get:function(){return this.onePlayer.videoElement},enumerable:!1,configurable:!0}),e.prototype.initializeEngineHeuristic=function(e){if(e.isNextGenEngineEnabled){var t=this.getEngineHeuristicSettings();if(!t||0===Object.keys(t).length)return;e.playbackOptions||(e.playbackOptions={}),e.playbackOptions.engineHeuristicSettings=t}},e.prototype.addDebugInfo=function(e){if(Object(s.e)(this.settingsStore.getSettingObject("isStreamDebugInfoEnabled","boolean"))){var t=window;t.streamDebugInfo?t.streamDebugInfo.push(e):t.streamDebugInfo=[e]}},e.prototype.shouldShowPlaybackSpeed=function(e){var t=this.options.itemMetadata&&this.options.itemMetadata.mediaType,n=Object(s.e)(this.settingsStore.getSettingObject("isPlaybackSpeedNonTMRFilesEnabled","boolean")),a=Object(s.e)(this.settingsStore.getSettingObject("isPlaybackSpeedTMRFilesEnabled","boolean"));return Object(s.e)(this.settingsStore.getSettingObject("isPlaybackSpeedAudioFilesEnabled","boolean"))&&"audio"===t||"video"===t&&(n&&!e||a&&e)},e.prototype.getPortalConfig=function(e){var t,n,a=Zt,i="Consumer"===(null===(t=e.userContext)||void 0===t?void 0:t.accountType)||"ConsumerAnonymous"===(null===(n=e.userContext)||void 0===n?void 0:n.accountType),r=e.isDevMode||e.hostContext&&"Dev"===e.hostContext.environment;return e.isConsumerTelemetryPipelineEnabled&&i?a.StreamWebAriaConfiguration.IngestionKey=r?g.t:g.i:r?a.StreamWebAriaConfiguration.IngestionKey=g.e:e.isEnvInGovCloud(!0)?a.StreamWebAriaConfiguration.IngestionKey=g.n:a.StreamWebAriaConfiguration.IngestionKey=g.a,a},e.prototype.getPlaybackSessionId=function(e){var t,n,a=null===(t=e.prefetchManifestResponse)||void 0===t?void 0:t.playbackSessionId;if(Object(s.e)(this.settingsStore.getSettingObject("isHostProvidedPrefetchManifestEnabled","boolean"))&&a&&d.n(a))return a;var i=null===(n=e.playbackSourceProvider)||void 0===n?void 0:n.getPlaybackSessionId();return i&&d.n(i)?i:d.t().toString()},e.prototype.getStandardTheme=function(e){var t=localStorage.getItem(zt.i),n=localStorage.getItem(zt.t);return t?!JSON.parse(t):e.themeData&&e.themeData.base&&e.themeData.base.isStandardTheme?e.themeData.base.isStandardTheme:!!n&&!JSON.parse(n)},e.prototype.applyPlayerConfigurationOverridesFromLocalStorage=function(e){var t=localStorage.getItem(zt.a);t&&(e.loadMode=JSON.parse(t)?"autoplayOn":"autoplayOff");var n=localStorage.getItem(zt.d);n&&(e.showMetadataOverlay=JSON.parse(n));var a=localStorage.getItem(zt.n);if(a||!e.themeData||!e.themeData.fluentTheme){var i=this.getStandardTheme(e);e.themeData={base:{isStandardTheme:i,primaryColor:Object(zt.o)(!i,a)}}}},e}();function dn(e,t,n,a){return{playbackSessionId:t,controlBuildConfiguration:"",loadMode:e.loadMode,metaUrl:e.mediaServiceContext&&e.mediaServiceContext.mediaServiceUrl,isAnonymous:ln(e),engineName:e.isNextGenEngineEnabled?"Engine 2.0":"AzureMediaPlayer",engineVersion:e.isNextGenEngineEnabled?"":Vt}}function ln(e){switch(e.userContext&&e.userContext.accountType){case"BusinessAnonymous":case"ConsumerAnonymous":return!0;default:return!1}}var un,fn=n(1109),pn=n(2),mn=n(796),_n=Object(a.e)(Object(a.e)({},{ocv:{resourceRequestUri:"",scopes:["User.Read"]}}),{microsoftGraph:{resourceRequestUri:"https://graph.microsoft-ppe.com/",scopes:["User.Read"]},pushChannel:{scopes:["https://pushchanneltst.1drv.ms/.default"]},sharePointOnline:{scopes:["User.Read"]},vroom_2_0:{resourceRequestUri:"https://prepspo.spgrid.com",scopes:["User.Read","User.Write"]}}),hn=n(3353);!function(e){e[e.None=0]="None",e[e.ViewOnly=1]="ViewOnly",e[e.Edit=2]="Edit",e[e.TotalControl=3]="TotalControl"}(un||(un={}));var bn={components:[fe.t.VideoDetails]},gn=new Set([404,406,429,503]),vn=function(){function e(e,t,n){void 0===n&&(n=300);var a=this;this.getAccessToken=e,this.telemetryApi=t,this.requestDigestTimeBufferSecs=n,this.getGenerateRequestDigest=function(e){return void 0!==e?a.generateRequestDigest(e):Promise.resolve(void 0)}}return e.prototype.generateRequestDigest=function(e){return Object(a.t)(this,void 0,void 0,function(){var t,n,i,r,o,s,c,d,l;return Object(a.i)(this,function(a){switch(a.label){case 0:if(this.requestDigestCache&&this.requestDigestCache.expiration>Date.now())return[2,this.requestDigestCache];t={name:"SharePointProviderGenerateRequestDigest",backendCorrelationId:"",backendName:"SharePoint"},n=this.telemetryApi.startQos("PlayerInitEndQos",t),a.label=1;case 1:return a.trys.push([1,4,,5]),i=e.siteUrl,s=(o=S.e).post,c=[fe.t.VideoDetails+".GetRequestDigest",bn,i,"/_api/contextinfo",{},{}],[4,this.generateHeaders()];case 2:return[4,s.apply(o,c.concat([a.sent(),yn]))];case 3:return r=a.sent(),this.requestDigestCache={token:r.FormDigestValue,expiration:1e3*(Number(r.FormDigestTimeoutSeconds)-this.requestDigestTimeBufferSecs)+Date.now()},n.end(),[2,this.requestDigestCache];case 4:throw d=a.sent(),l=this.generateServiceError(d),t.backendCorrelationId=l.requestId||"mis",l.isExpected?n.endExpectedError("Fatal",l):n.endUnexpectedError("Fatal",l),l;case 5:return[2]}})})},e.prototype.generateHeaders=function(e){return Object(a.t)(this,void 0,void 0,function(){var t;return Object(a.i)(this,function(n){switch(n.label){case 0:return[4,this.getAccessToken("SharePointOnline")];case 1:return t=n.sent(),e?[2,{accept:"application/json",Authorization:"Bearer "+t,"user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.67 Safari/537.36 Edg/87.0.664.47","Content-Type":"application/json;charset=UTF-8","x-requestdigest":e.token}]:[2,{accept:"application/json",Authorization:"Bearer "+t,"user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.67 Safari/537.36 Edg/87.0.664.47","Content-Type":"application/json;charset=UTF-8"}]}})})},e.prototype.generateServiceError=function(e){var t=Object(u.t)(e);return t.isExpected=!(!t.statusCode||!gn.has(t.statusCode)),(void 0===t.statusCode||t.statusCode<400)&&(t.name.toLowerCase().includes("abort")||t.name.toLowerCase().includes("network")||t.message.toLowerCase().includes("abort")||t.message.toLowerCase().includes("network")||t.staticMessage&&t.staticMessage.toLowerCase().includes("abort")||t.staticMessage&&t.staticMessage.toLowerCase().includes("network"))&&(t.isExpected=!0),t},e}(),yn=hn.e.object({FormDigestValue:hn.e.string,FormDigestTimeoutSeconds:hn.e.number}),Sn=function(e){function t(t,n,i,r){void 0===r&&(r=300);var s=e.call(this,n,i,r)||this;return s.userEmail=t,s.getUserCanEdit=function(e){return Object(a.t)(s,void 0,void 0,function(){var t,n;return Object(a.i)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),e&&e.siteUrl!==o.e&&e.listId!==o.e&&e.listItemId!==o.e&&""!==e.siteUrl&&""!==e.listId&&""!==e.listItemId?[4,this.checkUserPermission(e)]:[2,!1];case 1:return t=a.sent(),[2,!!(n=t.pop())&&n.role>=un.Edit];case 2:return a.sent(),[2,!1];case 3:return[2]}})})},s}return Object(a.a)(t,e),t.prototype.checkUserPermission=function(e){return Object(a.t)(this,void 0,void 0,function(){var t,n,i,r,o,s,c,d,l,u,f;return Object(a.i)(this,function(a){switch(a.label){case 0:t={name:"MSOdspPermissionProviderCheckUserPermissions",userCanEdit:!1,backendCorrelationId:"",backendName:"SharePoint"},n=this.telemetryApi.startQos("PlayerInitEndQos",t),a.label=1;case 1:return a.trys.push([1,5,,6]),i={listId:e.listId,itemId:e.listItemId},r=e.siteUrl,[4,this.generateRequestDigest(e)];case 2:return o=a.sent(),d=(c=S.e).post,l=[fe.t.VideoDetails+".CheckPermissions",bn,r,"/_api/web/lists(':listId')/GetItemById(:itemId)/CheckPermissions",i,{recipients:[{alias:this.userEmail}]}],[4,this.generateHeaders(o)];case 3:return[4,d.apply(c,l.concat([a.sent(),hn.e.object({value:hn.e.array(Dn)})]))];case 4:return s=a.sent(),t.userCanEdit=s.value[0]&&s.value[0].role>=un.Edit,n.end(),[2,s.value];case 5:throw u=a.sent(),f=this.generateServiceError(u),t.backendCorrelationId=f.requestId||"mis",f.isExpected?n.endExpectedError("Fatal",f):n.endUnexpectedError("Fatal",f),f;case 6:return[2]}})})},t}(vn),Dn=hn.e.object({canHaveAccess:hn.e.boolean,existingAccessType:hn.e.number,hasAccess:hn.e.boolean,inputEntity:hn.e.string,isPending:hn.e.boolean,recipientDeniedReason:hn.e.number,role:hn.e.number}),In=n(3204),xn=n(1763),Cn=n(1113),On=n(3205),wn={mediaType:"video"},En=function(){function e(e,t,n,i,r){var o,c,d,l,u=this;this.options=e,this.telemetryContext=t,this.delayLoadedMetadataPromise=n,this.onePlayerLogging=i,this.settingsStore=r,this._itemTitle=new v.e(void 0),this._captionsAvailable=new v.e(void 0),this._authProvider=void 0,this.loadDataForPhase=function(e){return Object(a.t)(u,void 0,void 0,function(){var t,n,i,r,o,c,d,l,u,f,p,m,_,h,b,g,v,y,S=this;return Object(a.i)(this,function(a){switch(a.label){case 0:return"BeforePlayer"!==e?[3,2]:[4,this._delayLoadedMetadataPromise];case 1:return t=a.sent(),this._isTranscriptionShown.value=t.mediaSettings.isTranscriptionShown,this._spokenLanguageTag.value=t.mediaSettings.spokenLanguageTag,this._isNoiseSuppressionControlShown.value=t.mediaSettings.isNoiseSuppressionControlShown,this._noiseSuppressionEnabledByDefault.value=t.mediaSettings.noiseSuppressionEnabledByDefault,this._tableOfContentsVisibility.value=t.mediaSettings.tableOfContentsVisibility,this._aboutVisibility.value=t.mediaSettings.aboutVisibility,this._commentsOptions.value=t.mediaSettings.commentsOptions,this._analyticsVisibility.value=t.mediaSettings.analyticsVisibility,this._notesVisibility.value=t.mediaSettings.notesVisibility,this._meetingRecordingContext.value=t.meetingRecordingMetadata,this._contentSourceApplication.value=t.contentSourceApplication,Object(s.e)(this.settingsStore.getSettingObject("isCobaltFixEnabled","boolean"))&&(n=t.mediaSettings.areAlternateStreamsSupported,this._areAlternateStreamsSupported.value=n,this._isReuploadSuggestedInMediaSettings.value=!1===n),t.sharePointLocator&&(this._sharePointLocator.value=t.sharePointLocator),t.sharePointTitle&&(this._itemTitle.value=t.sharePointTitle),[3,9];case 2:return"BeforeUi"!==e?[3,8]:(this._authProvider&&(this._authProviderSignOnPromise=this._authProvider.signOn()),this.options.getTranscriptData?(i=this._transcripts,[4,this.options.getTranscriptData().catch(function(e){return S.onePlayerLogging.warn("PluginError",e.message,{name:"TranscriptDataFetch",isExpected:!1,url:"",method:void 0,pluginName:"OneTranscript",pluginVersion:""}),[]})]):[3,4]);case 3:return i.value=a.sent(),[3,5];case 4:this._transcripts.value=[],a.label=5;case 5:return r=Object(s.e)(this.settingsStore.getSettingObject("isGetUserCanEditEnabled","boolean")),o=Object(s.e)(this.settingsStore.getSettingObject("isPermMaskForODSPOnePlayerHostEnabled","boolean")),c=Object(s.e)(this.settingsStore.getSettingObject("isPermissionsFetchEnabledWheneverUserCanEditNotSupplied","boolean")),d=void 0,c?void 0===(null===(f=this.options.itemMetadata)||void 0===f?void 0:f.userCanEditItem)&&r&&(d=this._msOdspPermissionProvider.getUserCanEdit(this._sharePointLocator.value)):r&&"OneUp"!==this._hostIntegrationType&&"OneUpEmbedPage"!==this._hostIntegrationType&&(o&&"ODSPOnePlayerHost"===this._hostIntegrationType||(d=this._msOdspPermissionProvider.getUserCanEdit(this._sharePointLocator.value))),d?(l=this._userPermissions,u=this.getPermissionsFromFlags,[4,d]):[3,7];case 6:l.value=u.apply(this,[a.sent(),this.options.isEmbedHostTrusted,null===(p=this.options.hostContext)||void 0===p?void 0:p.integrationType]),a.label=7;case 7:return this._arePOISettingsEnabled.value=Object(s.e)(this.settingsStore.getSettingObject("isMeetingCatchupEnabled","boolean"))&&Object.values(xn.e).some(function(e){return Object(s.e)(S.settingsStore.getSettingObject(e,"boolean"))}),In.e.getShouldFetchPOIs(this._arePOISettingsEnabled.value,this._meetingRecordingContext.value,this._userContext.value,this.onePlayerLogging)&&(this._mcuServicePromise.value=this._msOdspPOIProvider.getMCURequestPromise(null===(m=this._meetingRecordingContext.value)||void 0===m?void 0:m.externalId,null===(_=this._meetingRecordingContext.value)||void 0===_?void 0:_.threadId,null===(h=this._meetingRecordingContext.value)||void 0===h?void 0:h.meetingOrganizerId,null===(b=this._meetingRecordingContext.value)||void 0===b?void 0:b.meetingOrganizerTenantId,null===(g=this.metadata.meetingRecordingContext.value)||void 0===g?void 0:g.recordingStartTime,null===(v=this.metadata.meetingRecordingContext.value)||void 0===v?void 0:v.recordingEndTime,null===(y=this.options.odspContext)||void 0===y?void 0:y.fileDuration)),Object(s.e)(this.settingsStore.getSettingObject(Cn.t,"boolean"))&&(this._msOdspTimelineEventsPromise.value=this._msOdspTimelineEventsProvider.getTimelineEventsData(this.metadata,this.onePlayerLogging)),[3,9];case 8:"AfterUi"===e&&Object(s.e)(this.settingsStore.getSettingObject("isAboutVideoExpirationDateEnabled","boolean"))&&(this._msOdspSharePointProvider.value=new vn(this.getAccessTokenFromSupportedHosts,this.onePlayerLogging)),a.label=9;case 9:return[2,Promise.resolve()]}})})},this.loadOCPSData=function(){return(Object(s.e)(u.settingsStore.getSettingObject("isHelpingReportIssueEnabled","boolean"))||Object(s.e)(u.settingsStore.getSettingObject("isReportIssueErrorBoxEnable","boolean")))&&u.options.getOCPSData&&!u.options.isEnvInGovCloud()?u.options.getOCPSData(u.onePlayerLogging).catch(function(e){return u.onePlayerLogging.fatal("PlayerError",e.message,{name:"OCPSErrorEndpoint",isExpected:!1,backendName:"OCV"}),Promise.resolve(void 0)}):Promise.resolve(void 0)},this.getAccessTokenFromSupportedHosts=function(e){return Object(a.t)(u,void 0,void 0,function(){var t=this;return Object(a.i)(this,function(n){return[2,this.onePlayerLogging.measureQos("PlayerInitEndQos",{name:"MSOdspOnePlayergetAccessToken",resultVariant:e},function(){return Object(a.t)(t,void 0,void 0,function(){return Object(a.i)(this,function(t){switch(t.label){case 0:return this.isHostNotAllowed()?[2,Promise.reject("Host does not support GetAccessToken")]:[3,1];case 1:return[4,this.options.getAccessToken(e)];case 2:return[2,t.sent()]}})})},function(){return!1})]})})},this._itemId=new v.e(this.options.odspContext&&this.options.odspContext.itemId||""),this._hostIntegrationType=this.options.hostContext&&this.options.hostContext.integrationType||void 0;var f=this.options.itemMetadata||wn,p=f.mediaType,m=f.fileName,_=f.userCanEditItem;if(this._userPermissions=new v.e(this.getPermissionsFromFlags(null!=_&&_,e.isEmbedHostTrusted,null===(c=null===(o=this.options)||void 0===o?void 0:o.hostContext)||void 0===c?void 0:c.integrationType)),this._mediaType=new v.e(p),this._contentSourceApplication=new v.e(void 0),this._isTranscriptionShown=new v.e(void 0),this._spokenLanguageTag=new v.e(void 0),this._isNoiseSuppressionControlShown=new v.e(void 0),this._noiseSuppressionEnabledByDefault=new v.e(void 0),this._tableOfContentsVisibility=new v.e(void 0),this._aboutVisibility=new v.e(void 0),this._analyticsVisibility=new v.e(void 0),this._notesVisibility=new v.e(void 0),this._areAlternateStreamsSupported=new v.e(void 0),this._isReuploadSuggestedInMediaSettings=new v.e(!1),this._transcripts=new v.e(void 0),this._meetingRecordingContext=new v.e(void 0),this._extension=new v.e(this.options.mediaServiceContext&&this.options.mediaServiceContext.extension||""),this._mediaServiceUrl=new v.e(this.options.mediaServiceContext&&this.options.mediaServiceContext.mediaServiceUrl||""),this._documentId=new v.e(this.options.mediaServiceContext&&this.options.mediaServiceContext.documentId||""),this._sharePointLocator=new v.e(void 0),this._userContext=new v.e(this.options.userContext),this._siteId=new v.e(this.options.odspContext&&this.options.odspContext.siteId||""),this._itemPath=new v.e(this.options.odspContext&&this.options.odspContext.itemPath),this._driveId=new v.e(this.options.odspContext&&this.options.odspContext.driveId||""),this._fileDuration=new v.e(this.options.odspContext&&this.options.odspContext.fileDuration||0),this._vroomRouteUrl=new v.e(this.options.odspContext&&this.options.odspContext.vroomRouteUrl||""),this._delayLoadedMetadataPromise=this.delayLoadedMetadataPromise,m?(this._fileName=m,this._itemTitle.value=m.value):this._fileName=new v.e(void 0),this._msOdspPermissionProvider=new Sn(null===(d=this._userContext.value)||void 0===d?void 0:d.userEmail,this.getAccessTokenFromSupportedHosts,this.onePlayerLogging),this._msOdspPOIProvider=new In.e(this.getAccessTokenFromSupportedHosts,this.onePlayerLogging,t,Object(s.e)(this.settingsStore.getSettingObject("isTMRRecordingEndTimeEnabled","boolean")),Object(s.e)(this.settingsStore.getSettingObject("isAtMentionPOIEnabled","boolean"))),this._msOdspTimelineEventsProvider=new On.e,this._msOdspSharePointProvider=new v.e(void 0),this._mcuServicePromise=new v.e(void 0),this._msOdspTimelineEventsPromise=new v.e(void 0),this._webTitle=new v.e(this.options.odspContext&&this.options.odspContext.webTitle||""),this._listTitle=new v.e(this.options.odspContext&&this.options.odspContext.listTitle||""),this._webId=new v.e(this.options.mediaServiceContext&&this.options.mediaServiceContext.webId||""),this._playbackOptions=new v.e(this.options.playbackOptions),this._commentsOptions=new v.e(void 0),this._arePOISettingsEnabled=new v.e(!1),Object(s.e)(this.settingsStore.getSettingObject("isTokenRefactoringEnabled","boolean"))&&"Business"===(null===(l=this._userContext.value)||void 0===l?void 0:l.accountType)){var h=r.getSettingObject("tokenRefactoringAadClientId","string"),b="5eecb03e-a8b5-4052-bacf-32ac0ec67924";(null==h?void 0:h.value)&&(b=h.value);var g=Object(s.e)(this.settingsStore.getSettingObject("isTokenRefactoringUserInteractionSignOnEnabled","boolean"));this._authProvider=new mn.e(_n,this.onePlayerLogging,this.options.isEnvInGovCloud(),b,void 0,void 0,g)}}return Object.defineProperty(e.prototype,"metadata",{get:function(){var e,t=this;return{getSurveyAdminSettings:this.loadOCPSData,extension:this._extension,itemTitle:this._itemTitle,fileName:this._fileName,itemId:this._itemId,userPermissions:this._userPermissions,mediaType:this._mediaType,contentSourceApplication:this._contentSourceApplication,isTranscriptionShown:this._isTranscriptionShown,spokenLanguageTag:this._spokenLanguageTag,isNoiseSuppressionControlShown:this._isNoiseSuppressionControlShown,noiseSuppressionEnabledByDefault:this._noiseSuppressionEnabledByDefault,aboutVisibility:this._aboutVisibility,analyticsVisibility:this._analyticsVisibility,notesVisibility:this._notesVisibility,areAlternateStreamsSupported:this._areAlternateStreamsSupported,isReuploadSuggestedInMediaSettings:this._isReuploadSuggestedInMediaSettings,tableOfContentsVisibility:this._tableOfContentsVisibility,transcripts:this._transcripts,telemetryContext:this.telemetryContext,userContext:this._userContext,mediaServiceUrl:this._mediaServiceUrl,documentId:this._documentId,sharePointLocator:this._sharePointLocator,meetingRecordingContext:this._meetingRecordingContext,siteId:this._siteId,itemPath:this._itemPath,fileDuration:this._fileDuration,driveId:this._driveId,vroomRouteUrl:this._vroomRouteUrl,captionsAvailable:this._captionsAvailable,mcuRequestPromise:this._mcuServicePromise,msOdspTimelineEventsPromise:this._msOdspTimelineEventsPromise,codec:null===(e=this.options.itemMetadata)||void 0===e?void 0:e.codec,isDevSession:this.options.isDevMode||this.options.hostContext&&"Dev"===this.options.hostContext.environment,getAccessTokenVroom2_1:this.options.getAccessTokenVroom2_1,getAccessTokenVroom2_0:this.options.getAccessTokenVroom2_0,getAccessToken:this.getAccessTokenFromSupportedHosts,getPlaybackUrls:this.options.getPlaybackUrls,isEnvInGovCloud:this.options.isEnvInGovCloud,isDownloadBlocked:this.options.isDownloadBlocked,webTitle:this._webTitle,listTitle:this._listTitle,webId:this._webId,playbackOptions:this._playbackOptions,commentsOptions:this._commentsOptions,getGenerateRequestDigest:function(e){return t._msOdspSharePointProvider.value?t._msOdspSharePointProvider.value.getGenerateRequestDigest(e):Promise.resolve(void 0)},arePOISettingsEnabled:this._arePOISettingsEnabled,oneDsEndpointOverride:this.options.oneDsEndPointOverride,authProvider:this._authProvider,isNextGenEngineEnabled:this.options.isNextGenEngineEnabled}},enumerable:!1,configurable:!0}),e.prototype.isHostNotAllowed=function(){var e,t=this.settingsStore.getSettingObject("firstPartyHostAppAuthNotAllowedList","string[]"),n=(null==t?void 0:t.value)||[],a=(null===(e=this.options.hostContext)||void 0===e?void 0:e.app)||"";return n.includes(a)},e.prototype.getPermissionsFromFlags=function(e,t,n){if(Object(s.e)(this.settingsStore.getSettingObject("isEditInEmbedEnabled","boolean")))return e?t?"EditTrustedHost":"EditUntrustedHost":t?"NoEditTrustedHost":"NoEditUntrustedHost";var a=!1;return n&&(a="OneUpEmbedPage"!==n&&"OneUpMicroservice"!==n),e?a?"EditTrustedHost":"EditUntrustedHost":a?"NoEditTrustedHost":"NoEditUntrustedHost"},e}(),An=function(e){function t(t,n,a){void 0===n&&(n=function(){return[]}),void 0===a&&(a="OnePlayer");var i=e.call(this,t,a)||this;return i.options=t,i.getPlugins=n,i}return Object(a.a)(t,e),t.prototype.getMediaContext=function(e,t){var n,a,i,r,c=e.mediaServiceContext?e.mediaServiceContext:{},d=e.odspContext||{},l=e.itemMetadata?e.itemMetadata.mediaType:"video",u=Object(s.e)(this.settingsStore.getSettingObject("isUserCanEditTelemetryEnabled","boolean")),f=Object(s.e)(this.settingsStore.getSettingObject("isIsHostTrustedTelemetryEnabled","boolean")),p=Object(s.e)(this.settingsStore.getSettingObject("isItemDimensionsLoggingEnabled","boolean"));return{mediaService:c.mediaService||o.e,mediaType:l,userCanEditItem:u?null===(n=e.itemMetadata)||void 0===n?void 0:n.userCanEditItem:void 0,isHostTrusted:f?e.isEmbedHostTrusted:void 0,contentType:t?t.contentType:o.e,environment:d.ring||o.e,extension:kn(c.extension)||o.e,itemWidth:p?null===(a=e.itemMetadata)||void 0===a?void 0:a.itemWidth:void 0,itemHeight:p?null===(i=e.itemMetadata)||void 0===i?void 0:i.itemHeight:void 0,workload:d.workload||o.e,siteSubscriptionId:d.siteSubscriptionId||o.e,siteId:d.siteId||o.e,odspItemId:d.itemId||o.e,farmName:d.farmName,farmLabel:d.farmLabel,odspCorrelationId:d.correlationId,teamsCallId:(null===(r=null==t?void 0:t.meetingRecordingMetadata)||void 0===r?void 0:r.externalId)||void 0,bitrate:c.bitrate}},t.prototype.decoratePlaybackUrlsCallback=function(e,t,n,i){var r,o=this,s=function(){return Object(a.t)(o,void 0,void 0,function(){return Object(a.i)(this,function(t){return[2,this.prepareForNoiseSuppression(e)]})})},c=null===(r=this.options.mediaServiceContext)||void 0===r?void 0:r.isTeamsMeetingRecording;return void 0!==c?function(){return Object($t.n)(s,t,i,c?pn.e.TeamsMeetingRecording:pn.e.Unknown)}:Object($t.e)(s,t,n,i)},t.prototype.decorateDownloadRequestParametersCallback=function(e){var t=function(e,t){var n=t.getSettingObject("routeStrategy","object"),a=null==n?void 0:n.value;if(a&&0!==Object.keys(a).length){var i=function(e){var t=function(e){if(e&&0!==e.length){if(1===e.length){var t="&routeHint="+e[0];return function(e){return{url:e.url+t,headers:e.headers}}}var n=e.map(function(e){return"&routeHint="+e}),a=0;return function(e){return{url:e.url+n[a++%n.length],headers:e.headers}}}return function(e){return e}}(e.routeHints);return e.filters?function(n){return e.filters.every(function(e){return n.url.includes(e)})?Promise.resolve(t(n)):Promise.resolve(n)}:function(e){return Promise.resolve(t(e))}}(a);return function(t,n){return e(t,n).then(i)}}}(e,this.settingsStore);return null!=t?t:e},t.prototype.getDataLayer=function(e,t,n,a,i){return new En(e,t,n,a,i)},t.prototype.getRegisteredPlugins=function(){var e;return this.getPlugins(this.telemetryContext.hostContext,null===(e=this.options.mediaServiceContext)||void 0===e?void 0:e.isTeamsMeetingRecording,Object(s.e)(this.settingsStore.getSettingObject("isTABTestSessionCheckEnabled","boolean")))},t.prototype.getUiConfiguration=function(){return Object(fn.e)(this.options,this.settingsStore,this.telemetryContext.hostContext)},t.prototype.getMaxBufferInSec=function(e,t){var n,a,i=(null===(n=this.settingsStore.getSettingObject("maxBufferInSec","number"))||void 0===n?void 0:n.value)||0,r=e.mediaServiceContext&&e.mediaServiceContext.bitrate;if(!(void 0===t||t||void 0===r||i<=0)){var o=(null===(a=this.settingsStore.getSettingObject("minBitrateForBufferingControl","number"))||void 0===a?void 0:a.value)||0;if(!(o>0&&r<o))return i}},t.prototype.getCustomRenderOptions=function(){return{}},t.prototype.getEngineHeuristicSettings=function(){var e,t=null===(e=this.settingsStore.getSettingObject("odspEngineHeuristicSettings","object"))||void 0===e?void 0:e.value;return Object(a.e)(Object(a.e)({},c),t)},t.prototype.getDiagnosticTool=function(e,t,i){return Object(a.t)(this,void 0,void 0,function(){return Object(a.i)(this,function(a){switch(a.label){case 0:return[4,Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(507)]).then(n.bind(null,3537))];case 1:return[2,new(a.sent().MsOdspOnePlayerDiagnosticTool)(e,t,i)]}})})},t.prototype.prepareForNoiseSuppression=function(e){var t,n;return Object(a.t)(this,void 0,void 0,function(){var r,o,c;return Object(a.i)(this,function(a){switch(a.label){case 0:return r=function(e){var t=Object(i.c)(e);return t?(t.searchParams.set("enhanceAudio","true"),t.toString()):e},o=Object(s.e)(this.settingsStore.getSettingObject("isNoiseSuppressionPluginEnabled","boolean")),[4,e()];case 1:return(c=a.sent())&&o?[2,{dashUrl:null===(t=c.dashUrl)||void 0===t?void 0:t.map(function(e){return r(e)}),hlsUrl:null===(n=c.hlsUrl)||void 0===n?void 0:n.map(function(e){return r(e)}),progressiveUrl:c.progressiveUrl}]:[2,c]}})})},t}(cn),Ln=[".3g2",".3gp",".3gpp",".asf",".avi",".flv",".m1v",".m4v",".mkv",".mod",".mov",".mp2",".mp4",".mp4v",".mpe",".mpeg",".mpg",".mts",".ogg",".qt",".swf",".ts",".vob",".webm",".wlmp",".wm",".wmv",".wmx",".aif",".aiff",".aac",".amr",".au",".dss",".flac",".gsm",".m4a",".m4p",".mp3",".ogg",".oga",".rm",".wav",".wma",".m2ts",".bmp"];function kn(e){if(e)return e=e.toLowerCase(),Ln.indexOf(e)>-1?e:r.a}}],Array(16),[function(e,t,n){"use strict";n.d(t,"e",function(){return ne}),n.d(t,"t",function(){return ae});var a=n(1891),i=n(0),r=n(644),o=n(549),s={name:"Chat",version:r.e,phasesToInit:["BeforeUi","AfterUi"],getIsPluginEnabled:function(e){return function(){var t,n,a,i,r,s,c,d,l,u,f;if(!Object(o.a)(e.userContext.value))return!1;if(!Object(o.n)(e.userPermissions.value))return!1;var p=Object(o.t)(e),m=Object(o.e)(null===(t=e.userContext.value)||void 0===t?void 0:t.userEmail)&&Object(o.e)(null===(a=null===(n=e.meetingRecordingContext)||void 0===n?void 0:n.value)||void 0===a?void 0:a.threadId)&&Object(o.e)(null===(r=null===(i=e.meetingRecordingContext)||void 0===i?void 0:i.value)||void 0===r?void 0:r.recordingStartTime)&&Object(o.e)(null===(c=null===(s=e.meetingRecordingContext)||void 0===s?void 0:s.value)||void 0===c?void 0:c.iCalUId)&&Object(o.e)(null===(l=null===(d=e.meetingRecordingContext)||void 0===d?void 0:d.value)||void 0===l?void 0:l.meetingOrganizerId)&&!Object(o.e)(null===(f=null===(u=e.meetingRecordingContext)||void 0===u?void 0:u.value)||void 0===f?void 0:f.groupId);return p&&m}},getPluginInstanceFactory:function(e){return function(t){return Object(i.t)(void 0,void 0,void 0,function(){return Object(i.i)(this,function(a){switch(a.label){case 0:return[4,t("LoadPluginModule",function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(581)]).then(n.bind(null,3550))})];case 1:return[2,a.sent().createPluginInstance(e)]}})})}}},c={name:"Comment",version:r.e,phasesToInit:["BeforeUi","AfterUi"],getIsPluginEnabled:function(e){return function(){var t,n;if(null===(t=e.commentsOptions.value)||void 0===t?void 0:t.commentsDisabledOnTenant)return!1;var a=e.userContext.value;return!(!a||["BusinessAnonymous","ConsumerAnonymous","Unknown"].includes(a.accountType))&&void 0!==(null===(n=e.commentsOptions.value)||void 0===n?void 0:n.areCommentsEnabled)&&(e.commentsOptions.value.areCommentsEnabled||"EditTrustedHost"===e.userPermissions.value||"EditUntrustedHost"===e.userPermissions.value)}},getPluginInstanceFactory:function(e){return function(t){return Object(i.t)(void 0,void 0,void 0,function(){return Object(i.i)(this,function(a){switch(a.label){case 0:return[4,t("LoadPluginModule",function(){return Promise.all([n.e(0),n.e(1),n.e(8),n.e(582)]).then(n.bind(null,3397))})];case 1:return[2,a.sent().createPluginInstance(e)]}})})}}},d=n(43),l=n.n(d),u=n(424),f=n(804),p=n(1762),m=n(263),_=n(822),h=n(245),b=function(e,t,n){var a,i,r;e.log.userAction({name:t,actionType:n,playbackTimeSec:null!==(r=null===(i=null===(a=e.player)||void 0===a?void 0:a.currentTimeInSeconds)||void 0===i?void 0:i.value)&&void 0!==r?r:-1})},g=function(e,t,n){var a,i;return e&&n.log.appLogic({name:t,currentAudioTrack:null===(i=null===(a=n.player)||void 0===a?void 0:a.playbackTrack)||void 0===i?void 0:i.value}),e},v=function(e,t){if(t){var n={text:e.localization.getString(_.O),messageType:h.e.warning,userActionName:_.O},a=t.enqueueMessageBarMessage(n);return null==a||a.messageState.subscribe(function(e){"Appeared"===e&&setTimeout(function(){a&&a.closeAutomatically()},1e3*_.g)}),a}},y=n(3613),S=l.a.lazy(function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(16),n.e(499)]).then(n.bind(null,3623))});function D(e){return new C(e)}function I(e){return e===f.n.Hls||e===f.n.Dash}function x(e){return e===f.n.Progressive}var C=function(){function e(e){var t=this;this.metadata=e,this._messageBarMessages={},this.addButton=function(e){return Object(i.t)(t,void 0,void 0,function(){var t,n,a,r,o,s,c,d,l,u=this;return Object(i.i)(this,function(i){switch(i.label){case 0:return t=function(){if(!u.isNotSupportedPlaybackFormat(e.player.playbackFormat.value)||u._hasTriedAdaptiveStreamingForce||u.trySwitchToAdaptiveStreaming(e,!1)){var t=e.player.playbackTrack.value===_.n?_.w:_.n;t===_.n&&(u._bufferingTimeoutCancel=function(e,t,n,a){if(n.value=e.log.startQos({name:_.L,resultVariant:_.k}),t&&!a[_.y]){if(!Object(m.e)(e.onePlayerSettingsStore.getSettingObject("isNoiseSuppressionBufferingMessageEnabled","boolean")))return void e.log.appLogic({name:"NoiseSuppressionSkippedMessage-".concat(_.v)});var i=setTimeout(function(){n.value&&e.player.playbackTrack.value===_.n&&(a[_.y]=function(e,t){if(t){var n={text:e.localization.getString(_.y),messageType:h.e.warning,userActionName:_.v,links:[{text:e.localization.getString(_.F),onClick:function(){b(e,_.x,"LeftClick"),e.player.playbackTrack.value=_.w},dismissMessageOnInteraction:!0}]};return t.enqueueMessageBarMessage(n)}}(e,t))},1e3*_.S);return function(){clearTimeout(i)}}}(e,u._uiApi,u._timeToInteractionResponseQosEvent,u._messageBarMessages)),e.player.playbackTrack.value=t}},n=null===(d=this.metadata.telemetryContext.hostContext)||void 0===d?void 0:d.hostIntegrationType,a=Object(p.a)(e.onePlayerSettingsStore,n),r=function(){return u._isEnhancedAudioTrackDefault?a?e.localization.getString(_.M):e.localization.getString(_.T):a?e.localization.getString(_.P):e.localization.getString(_.U)},o={ariaLabel:e.localization.getString(_.b),ariaDescription:a?e.localization.getString(_.r):e.localization.getString(_.h),icon:_.I,isEnabled:!0,isVisible:!0,toggleButtonRole:"menuitemcheckbox",isUnderlined:this._isEnhancedAudioTrackDefault,reflowThreshold:220,onClick:t,tooltip:r(),userActionName:this._isEnhancedAudioTrackDefault?_.R:_.N,type:"Primary",keyboardShortcut:{code:"KeyA",callback:t}},null===(l=this._uiApi)||void 0===l?[3,1]:[3,3];case 1:return s=this,[4,e.ui];case 2:s._uiApi=i.sent(),i.label=3;case 3:return c=this._uiApi.addButton(o,"PlaybackExperience"),e.player.hasAudioStream.subscribe(function(t){e.player.playbackFormat.value&&!x(e.player.playbackFormat.value)&&(c.isEnabled=t,c.isVisible=t,g(!t,_.B,e))}),e.player.playbackTrack.subscribe(function(t){if(t===_.w){c.tooltip=a?e.localization.getString(_.P):e.localization.getString(_.U),c.userActionName=_.N,c.isUnderlined=!1;var n=u._messageBarMessages[_.O];n&&("Appeared"===n.messageState.value&&b(e,_.C,"LeftClick"),n.closeAutomatically());var i=u._messageBarMessages[_.y];i&&i.closeAutomatically()}else t===_.n&&(c.tooltip=a?e.localization.getString(_.M):e.localization.getString(_.T),c.userActionName=_.R,c.isUnderlined=!0,e.player.playbackRate.value>1&&!u._messageBarMessages[_.O]&&(u._messageBarMessages[_.O]=v(e,u._uiApi)))}),e.player.playbackRate.subscribe(function(t){var n=u._messageBarMessages[_.O];t>1&&e.player.playbackTrack.value===_.n&&!n?u._messageBarMessages[_.O]=v(e,u._uiApi):n&&t<=1&&n.closeAutomatically()}),e.player.isEnhancedTrackReady.subscribe(function(e){e&&u._timeToInteractionResponseQosEvent.value&&(u._timeToInteractionResponseQosEvent.value.end(),u._timeToInteractionResponseQosEvent.value=void 0,u._bufferingTimeoutCancel&&(u._bufferingTimeoutCancel(),u._bufferingTimeoutCancel=void 0))}),e.player.playbackFormat.subscribe(function(t){u._previousPlaybackFormat?((g(I(u._previousPlaybackFormat)&&!I(t),_.i,e)||g(u._hasTriedAdaptiveStreamingForce&&x(t),_.o,e)||g(I(t)&&!e.player.hasAudioStream.value,_.B,e))&&(e.player.playbackTrack.value=_.w,c.isEnabled=!1,c.isVisible=!1),!u._messageBarMessages[_.D]&&(u._hasTriedAdaptiveStreamingForce&&x(t)||I(u._previousPlaybackFormat)&&!I(t))&&(u._messageBarMessages[_.D]=function(e,t){if(t){var n={text:e.localization.getString(_.D),messageType:h.e.warning,userActionName:_.D};return t.enqueueMessageBarMessage(n)}}(e,u._uiApi)),u._previousPlaybackFormat=t):u._previousPlaybackFormat=t}),e.player.audioStreamSwitchingFailed.subscribe(function(t){t&&(e.player.playbackFormat.value===_.E?u._timeToInteractionResponseQosEvent.value&&u._timeToInteractionResponseQosEvent.value.endExpectedError("Fatal",_.a):u._timeToInteractionResponseQosEvent.value&&u._timeToInteractionResponseQosEvent.value.endUnexpectedError("Fatal",_.H),u._timeToInteractionResponseQosEvent.value=void 0)}),[2]}})})},this.isNotSupportedPlaybackFormat=function(e){var n=x(e);return t._isNextGenEngineEnabled?n||e===f.n.Hls:n}}return e.prototype.phaseHandler=function(e,t){var n,a;return Object(i.t)(this,void 0,void 0,function(){var r,o,s;return Object(i.i)(this,function(i){switch(i.label){case 0:switch(e){case"BeforePlayer":return[3,1];case"BeforeUi":return[3,2]}return[3,8];case 1:return this._isEnhancedAudioTrackDefault=null!==(n=this.metadata.noiseSuppressionEnabledByDefault.value)&&void 0!==n&&n,this._isNextGenEngineEnabled="Engine 2.0"===this.metadata.telemetryContext.onePlayerContext.engineName,r=this._isEnhancedAudioTrackDefault?_.n:_.w,t.player.playbackTrack.value!==r&&(t.player.playbackTrack.value=r),t.log.appLogic({name:this._isEnhancedAudioTrackDefault?_.e:_.t}),[3,8];case 2:return this._hasTriedAdaptiveStreamingForce=!1,this._timeToInteractionResponseQosEvent={value:void 0},null===(a=this._uiApi)||void 0===a?[3,3]:[3,5];case 3:return o=this,[4,t.ui];case 4:o._uiApi=i.sent(),i.label=5;case 5:return s=this.isNotSupportedPlaybackFormat(t.player.playbackFormat.value),g(!this.canSwitchToAdaptiveStreaming(t)&&s,_.A,t)?(t.player.playbackTrack.value===_.n&&(t.player.playbackTrack.value=_.w),[3,8]):t.player.playbackTrack.value===_.n&&s&&!this.trySwitchToAdaptiveStreaming(t,!0)?[3,8]:g(I(t.player.playbackFormat.value)&&!t.player.hasAudioStream.value,_.B,t)?[3,7]:[4,this.addButton(t)];case 6:i.sent(),i.label=7;case 7:return this.registerSetting(t,this.metadata),[3,8];case 8:return[2]}})})},e.prototype.canSwitchToAdaptiveStreaming=function(e){return this._isNextGenEngineEnabled?e.player.availablePlaybackFormats.value.some(function(e){return I(e)}):e.player.canSwitchToAdaptiveStreaming()},e.prototype.switchToAdaptiveStreaming=function(e){if(this._isNextGenEngineEnabled){var t=f.n.Dash;return!Object(y.t)()&&!g(!t,_.o,e)&&(e.player.playbackFormat.value=t,!0)}return e.player.switchToAdaptiveStreaming()},e.prototype.trySwitchToAdaptiveStreaming=function(e,t){return this._hasTriedAdaptiveStreamingForce=!0,!g(!this.switchToAdaptiveStreaming(e),_.o,e)||(t&&(e.player.playbackTrack.value=_.w),!1)},e.prototype.registerSetting=function(e,t){var n=this;this._uiApi?this._uiApi.registerSetting({icon:_.I,label:e.localization.getString(_.f),infoTooltip:{ariaLabel:e.localization.getString(_.p),tooltipContent:e.localization.getString(_.m)},userActionName:_._,customSettingElement:{getSettingsElement:function(){return l.a.createElement(l.a.Suspense,{fallback:l.a.createElement(l.a.Fragment,null)},l.a.createElement(S,{initialValue:n._isEnhancedAudioTrackDefault,log:e.log,localization:e.localization,currentPlaybackTimeInSeconds:e.player.currentTimeInSeconds,checkboxOnChangeAsync:function(a){return Object(i.t)(n,void 0,void 0,function(){return Object(i.i)(this,function(n){switch(n.label){case 0:return[4,Object(u.e)(t,e.log,_.d,a,Object(m.e)(e.onePlayerSettingsStore.getSettingObject("isVideoDataSourceVROOMTokenDisabled","boolean")))];case 1:return n.sent(),this._isEnhancedAudioTrackDefault=a,[2]}})})}}))},ariaLabel:e.localization.getString(_.f)}}):e.log.unhandledError(_.s,{name:_.c})},e}(),O={name:"NoiseSuppression",version:r.e,phasesToInit:["BeforePlayer","BeforeUi"],getPluginInstanceFactory:function(e){return function(t){return Object(i.t)(void 0,void 0,void 0,function(){return Object(i.i)(this,function(t){return[2,D(e)]})})}}},w=n(1892),E=n(1893),A=n(1894),L=[".3g2",".3gp",".3gpp",".asf",".avi",".m4v",".mkv",".mov",".mp4",".mp4v",".mts",".ts",".webm",".wmv",".m4a",".mp3",".wav",".wma",".m2ts"],k={name:"Chaptering",version:r.e,phasesToInit:["BeforeUi","BeforeMarkersUi"],getIsPluginEnabled:function(e){return function(){return(!e.areAlternateStreamsSupported||!1!==e.areAlternateStreamsSupported.value)&&!!L.includes(e.extension.value.toLowerCase())&&(e.tableOfContentsVisibility&&"all"===e.tableOfContentsVisibility.value||"EditTrustedHost"===e.userPermissions.value)}},getPluginInstanceFactory:function(e){return function(t){return Object(i.t)(void 0,void 0,void 0,function(){return Object(i.i)(this,function(a){switch(a.label){case 0:return[4,t("LoadPluginModule",function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(580)]).then(n.bind(null,3536))})];case 1:return[2,a.sent().createPluginInstance(e)]}})})}}},M={name:"Share",version:r.e,phasesToInit:["BeforeUi"],getPluginInstanceFactory:function(e){return function(){return Object(i.t)(void 0,void 0,void 0,function(){return Object(i.i)(this,function(t){switch(t.label){case 0:return[4,Promise.all([n.e(0),n.e(1),n.e(8),n.e(589)]).then(n.bind(null,3399))];case 1:return[2,t.sent().createPluginInstance(e)]}})})}},getIsPluginEnabled:function(e){var t,n=null===(t=e.telemetryContext.hostContext)||void 0===t?void 0:t.hostApp,a=e.isDevSession;return function(){return a||"Teams"===n}}},P={name:"Help",version:r.e,phasesToInit:["BeforeUi"],getPluginInstanceFactory:function(e){return function(t){return Object(i.t)(void 0,void 0,void 0,function(){return Object(i.i)(this,function(a){switch(a.label){case 0:return[4,t("LoadPluginModule",function(){return n.e(585).then(n.bind(null,3400))})];case 1:return[2,a.sent().createPluginInstance(e)]}})})}}},T={name:"CustomOptions",version:r.e,phasesToInit:["BeforeUi"],getIsPluginEnabled:function(e){return function(){return!(e.areAlternateStreamsSupported&&!1===e.areAlternateStreamsSupported.value||!L.includes(e.extension.value.toLowerCase())||"EditTrustedHost"!==e.userPermissions.value&&"EditUntrustedHost"!==e.userPermissions.value)}},getPluginInstanceFactory:function(e){return function(t){return Object(i.t)(void 0,void 0,void 0,function(){return Object(i.i)(this,function(a){switch(a.label){case 0:return[4,t("LoadPluginModule",function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(583)]).then(n.bind(null,3551))})];case 1:return[2,a.sent().createPluginInstance(e)]}})})}}},U=n(3204),F={name:"MeetingCatchup",version:r.e,phasesToInit:["BeforeMarkersUi","AfterUi"],getIsPluginEnabled:function(e){return function(){var t,n=null===(t=window.sessionStorage)||void 0===t?void 0:t.getItem("_isRunningTABTest");return!(!e.arePOISettingsEnabled.value||!n)||U.e.getShouldFetchPOIs(e.arePOISettingsEnabled.value,e.meetingRecordingContext.value,e.userContext.value,void 0)}},getPluginInstanceFactory:function(e){return function(t){return Object(i.t)(void 0,void 0,void 0,function(){return Object(i.i)(this,function(a){switch(a.label){case 0:return[4,t("LoadPluginModule",function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(853)]).then(n.bind(null,3558))})];case 1:return[2,a.sent().createPluginInstance(e)]}})})}}},H={name:"MeetingNotes",version:r.e,phasesToInit:["BeforeUi"],getPluginInstanceFactory:function(e){return function(t){return Object(i.t)(void 0,void 0,void 0,function(){return Object(i.i)(this,function(a){switch(a.label){case 0:return[4,t("LoadPluginModule",function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(14),n.e(587)]).then(n.bind(null,3541))})];case 1:return[2,a.sent().createPluginInstance(e)]}})})}},getIsPluginEnabled:function(e){return function(){var t=e.meetingRecordingContext.value,n=e.userContext.value;return Object(o.t)(e)&&Object(o.e)(null==t?void 0:t.iCalUId)&&Object(o.e)(null==t?void 0:t.meetingOrganizerId)&&Object(o.e)(null==t?void 0:t.meetingOrganizerTenantId)&&Object(o.e)(null==n?void 0:n.userId)&&Object(o.e)(null==n?void 0:n.tenantId)}}},R={name:"Interactivity",version:r.e,phasesToInit:["BeforeUi"],getPluginInstanceFactory:function(e){return function(t){return Object(i.t)(void 0,void 0,void 0,function(){return Object(i.i)(this,function(a){switch(a.label){case 0:return[4,t("LoadPluginModule",function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(586)]).then(n.bind(null,3546))})];case 1:return[2,a.sent().createPluginInstance(e)]}})})}}},N={name:"BareBones",version:r.e,phasesToInit:["BeforeUi"],getPluginInstanceFactory:function(){return function(e){return Object(i.t)(void 0,void 0,void 0,function(){return Object(i.i)(this,function(t){switch(t.label){case 0:return[4,e("LoadPluginModule",function(){return n.e(579).then(n.bind(null,3444))})];case 1:return[2,t.sent().createPluginInstance()]}})})}}},B={settingName:"isOneTranscriptEnabled",manifest:a.e},j={settingName:"isChatPluginEnabled",manifest:s},V={settingName:"isCommentsEnabled",manifest:c},z={settingName:"isNoiseSuppressionPluginEnabled",manifest:O},G={settingName:"isAboutVideoPluginEnabled",manifest:w.e},K={settingName:"isAboutVideoPluginEnabled",manifest:E.e},W={settingName:"isAnalyticsPluginEnabled",manifest:A.e},q={settingName:"isChapteringPluginEnabled",manifest:k},Q={settingName:"isShareEnabled",manifest:M},Y={settingName:"isHelpingReportIssueEnabled",manifest:P},J={settingName:"isCustomOptionsPluginEnabled",manifest:T},X={settingName:"isMeetingCatchupEnabled",manifest:F},Z={settingName:"isMeetingNotesPluginEnabled",manifest:H},$={settingName:"isInteractivityPluginEnabled",manifest:R},ee={settingName:"isBareBonesPluginEnabled",manifest:N},te=[j,X,Z];function ne(e,t,n){var a=null==e?void 0:e.hostIntegrationType;if(function(e){return"Yammer"===(null==e?void 0:e.hostApp)&&"moments"===(null==e?void 0:e.hostView)}(e))return[B];if(function(e){return"394866fc-eedb-4f01-8536-3ff84b16be2a"===(null==e?void 0:e.hostApp)}(e))return[B,Y];var i=[B,j,V,z,G,W,q,Q,Y,J,X,Z,ee];if(a&&["OneUpEmbedPage","OneUpMicroservice"].includes(a)){var r=i.indexOf(X);r>=0&&i.splice(r,1);var o,s=i.indexOf(Z);s>=0&&i.splice(s,1),(o=i.indexOf(V))>=0&&i.splice(o,1)}return"Loader"===a&&(o=i.indexOf(V))>=0&&i.splice(o,1),n&&window.sessionStorage.getItem("_isRunningTABTest")?i:!1===t?i.filter(function(e){return!te.includes(e)}):i}function ae(e,t,n){var a=[B,j,V,z,K,W,q,J,X,Z,$,ee];return t&&a.push(Y),n&&window.sessionStorage.getItem("_isRunningTABTest")?a:!1===e?a.filter(function(e){return!te.includes(e)}):a}}],Array(60),[function(e,t,n){"use strict";n.d(t,"n",function(){return i}),n.d(t,"r",function(){return r}),n.d(t,"t",function(){return s}),n.d(t,"a",function(){return c}),n.d(t,"e",function(){return l}),n.d(t,"i",function(){return u}),n.d(t,"o",function(){return f}),n.d(t,"s",function(){return p}),n.d(t,"c",function(){return m});var a=["a[href]","area[href]","input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","object","embed","[tabindex]:not(.modal)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'],i=function(){return o("local")},r=function(){return o("session")},o=function(e){try{var t="local"===e?window.localStorage:"session"===e?window.sessionStorage:void 0;return void 0!==t&&(t.setItem("key","value"),t.removeItem("key"),!0)}catch(e){return!1}};function s(e){if(window.MSStream)return!1;if(!/iPad|iPhone|iPod/.test(navigator.userAgent)||window.MSStream)return!1;if(e){var t=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/);return!!t&&d([parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||"0",10)].join("."),e)}return!0}function c(){return/macintosh/i.test(navigator.userAgent)}function d(e,t){for(var n=e.split("."),a=t.split("."),i=Math.max(n.length,a.length),r=0;r<i;r++){var o=parseInt(n[r],10)||0,s=parseInt(a[r],10)||0;if(o>s)return!0;if(o<s)return!1}return!0}function l(){return/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)&&!!(document.uniqueID||document.documentMode||window.ActiveXObject||window.MSInputMethodContext)}function u(){var e=/Edge\/(\d+)/.exec(window.navigator.userAgent);return!(e&&e.length>1&&"18"===e[1])}function f(e){return!(!e||!0!==d(e,"30")||!1!==d(e,"30.0.0.154"))}function p(e,t){if("Tab"===t.code){var n=e.querySelectorAll(a.join(", ")),i=document.activeElement;t.shiftKey&&i===n[0]?(t.preventDefault(),n[n.length-1].focus()):t.shiftKey||i!==n[n.length-1]||(t.preventDefault(),n[0].focus())}}function m(e){if("function"==typeof URL&&"function"==typeof URLSearchParams){var t=new URL(e);if(t.searchParams&&"function"==typeof t.searchParams.set)return t}}"undefined"!=typeof window&&(window.estimatedNavigationStartTime||(window.estimatedNavigationStartTime=new Date))},,,function(e,t,n){"use strict";n.d(t,"e",function(){return o});var a=n(1529),i=n(3361);function r(e,t,n,a){void 0===a&&(a=!1);var r=0;if("string"==typeof e){var o=n.numberDigitSeperator||",",s=e.replace(new RegExp("\\".concat(o),"g"),"");r=Number(s)}else"number"==typeof e&&(r=e);return r<0&&!a&&(r=0),1===r?Object(i.e)(t.Singular,e.toString()):Object(i.e)(t.Plural,e.toString())}function o(e,t){if(!e)return"";var n=[t.Second,t.Minute,t.Hour,t.Day,t.Month,t.Year],i=e.split(t.Seperator);if(i.some(function(e){return isNaN(+e)}))return"";for(var o="",s=0,c=i.length-1;s<i.length&&c>=0;s++,c--){var d=parseInt(i[s],10);(0===s||d>0)&&(o+="".concat(d," ").concat(r(d,n[c],Object(a.e)())))," "!==o.charAt(o.length-1)&&(o+=" ")}return o.trim()}}])]);